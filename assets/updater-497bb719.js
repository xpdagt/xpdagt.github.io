import{r as L,R as xt,aP as St,k as kt,j as u,s as J,X as zl,I as Tu,F as U,a6 as Bl,T as D,d as V,e as Ee,e9 as ql,v as pt,u as mt,fP as Ul,fQ as Vl,$ as Kt,fR as Hl,fS as ua,cH as me,l as ca,af as yt,aC as la,A as fa,dn as Su,am as ln,ag as et,ai as bn,G as wn,n as Wl,cx as Gl,fT as Kl,az as Yl,de as Xl,a5 as Zl,bl as Xt,ei as st,h as Ql,fU as Jl,fV as tf,x as ue,M as ce,aa as ye,cS as ef,bn as Ar,a1 as xe,fu as gt,t as da,fW as ku,fX as nf,dz as Cu,S as jr,dC as Au,fY as ju,bP as _n,fZ as rf,f_ as af,dF as sf,f$ as fs,g0 as of,ef as uf,eP as Ir,g1 as cf,g2 as lf,av as ff,f2 as df,fw as Ke,g3 as Ci,O as hf,fx as Er,Z as $r,Q as Rt,eO as ae,cu as Oe,cn as Cn,br as Ce,dR as pf,y as gf,a as mf,e5 as fn,g4 as ti,an as ar,as as yf,ej as xf,fH as Zn,g5 as vf,ap as bf,d$ as wf,bG as Mr,e0 as _f,cP as Iu,ab as Lr,at as Tf,c1 as Sf,dv as kf,em as sr,dI as Cf,g6 as Af,g7 as jf,dY as If,b as Eu,B as $e,aq as Nn,D as ds,eE as Or,eF as Je,bS as Pr,g8 as fe,g9 as Ef,ga as Pe,eI as ha,eJ as pa,bR as ft,gb as $f,gc as Mf,gd as Lf,ge as Of,gf as Pf,bK as Rf,gg as Df,gh as Nf,fD as $u,gi as Ff,bg as Mu,bo as Lu,c as zf,gj as Bf,gk as hs,dk as qf,_ as Uf,gl as Ai,Y as ei,g as Ve,cY as Vf,bp as ji,aR as Hf,gm as Wf,J as Ii,aX as Gf,cJ as Kf,fd as or,b0 as ps,dg as gs,U as ga,ek as Yf,gn as Ou,go as Pu,gp as Ru,a8 as Xf,cE as Zf,bE as ma,eR as Ht,ar as ge,w as Du,gq as Qf,gr as Jf,fG as td,cN as ed,gs as ni,gt as dn,cL as nd,gu as rd,au as Nu,gv as id,gw as ad,gx as sd,gy as ms,dq as od,gz as ud,gA as xn,gB as ur,gC as Pt,fm as Fu,fh as Mt,f8 as ri,gD as cd,cv as ld,gE as fd,gF as dd,gG as hd,gH as pd,b2 as gd,dT as ys,gI as md}from"./index-201afa5f.js";import{u as yd,P as ie,c as zu,g as An,d as ve,N as xs,n as Ae,e as oe,f as Ye,F as it,t as pe,h as xd,i as vd,b as bd}from"./usePools-183a4c92.js";import{u as Q}from"./index-87f0fe63.js";import{u as wd,P as hn,z as vs,A as _d,C as Bu,d as Rr,a as qu,D as Td,E as Sd,p as kd,G as Cd,H as Ad,I as jd,R as Id,J as Ed}from"./ProAmmPooledTokens-a40fd101.js";import{u as Uu}from"./useTransactionDeadline-c5bbcb75.js";import{G as $d,a as Md}from"./SlippageSettingGroup-b73dffc7.js";import{S as Ld,u as Od}from"./useParsedAmount-dabd93bf.js";function Ei(){return Ei=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ei.apply(this,arguments)}function Pd(t,e){if(t==null)return{};var n=Rd(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rd(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ya=L.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=t.size,a=i===void 0?24:i,s=Pd(t,["color","size"]);return xt.createElement("svg",Ei({ref:e,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),xt.createElement("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),xt.createElement("path",{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"}))});ya.propTypes={color:St.string,size:St.oneOfType([St.string,St.number])};ya.displayName="Inbox";const Dd=ya;function $i(){return $i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$i.apply(this,arguments)}function Nd(t,e){if(t==null)return{};var n=Fd(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fd(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var xa=L.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=t.size,a=i===void 0?24:i,s=Nd(t,["color","size"]);return xt.createElement("svg",$i({ref:e,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),xt.createElement("polyline",{points:"23 4 23 10 17 10"}),xt.createElement("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"}))});xa.propTypes={color:St.string,size:St.oneOfType([St.string,St.number])};xa.displayName="RotateCw";const zd=xa;function Mi(){return Mi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mi.apply(this,arguments)}function Bd(t,e){if(t==null)return{};var n=qd(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qd(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var va=L.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=t.size,a=i===void 0?24:i,s=Bd(t,["color","size"]);return xt.createElement("svg",Mi({ref:e,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),xt.createElement("circle",{cx:"11",cy:"11",r:"8"}),xt.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),xt.createElement("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),xt.createElement("line",{x1:"8",y1:"11",x2:"14",y2:"11"}))});va.propTypes={color:St.string,size:St.oneOfType([St.string,St.number])};va.displayName="ZoomIn";const Ud=va;function Li(){return Li=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Li.apply(this,arguments)}function Vd(t,e){if(t==null)return{};var n=Hd(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hd(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ba=L.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=t.size,a=i===void 0?24:i,s=Vd(t,["color","size"]);return xt.createElement("svg",Li({ref:e,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),xt.createElement("circle",{cx:"11",cy:"11",r:"8"}),xt.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),xt.createElement("line",{x1:"8",y1:"11",x2:"14",y2:"11"}))});ba.propTypes={color:St.string,size:St.oneOfType([St.string,St.number])};ba.displayName="ZoomOut";const Wd=ba;function Gd({size:t,color:e}){const n=kt();return u.jsxs("svg",{width:t||20,height:t||20,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M8.66669 2.58006V2.59339C8.66669 3.04006 8.96669 3.41339 9.38669 3.54672C11.2867 4.14006 12.6667 5.90672 12.6667 8.00006C12.6667 8.34672 12.6267 8.67339 12.5534 8.99339C12.46 9.42006 12.6334 9.86006 13.0134 10.0867L13.02 10.0934C13.5934 10.4267 14.34 10.1267 14.4934 9.48672C14.6067 9.00672 14.6667 8.50672 14.6667 8.00006C14.6667 5.00006 12.68 2.45339 9.94669 1.62006C9.31336 1.42673 8.66669 1.91339 8.66669 2.58006ZM7.29336 12.6134C5.30002 12.3267 3.68002 10.7067 3.38669 8.72006C3.02669 6.32006 4.49336 4.20672 6.60669 3.54672C7.03336 3.42006 7.33336 3.04006 7.33336 2.59339V2.58006C7.33336 1.91339 6.68669 1.42673 6.04669 1.62006C3.04002 2.54006 0.940024 5.52673 1.39336 8.92672C1.78669 11.8467 4.14669 14.2067 7.06669 14.6001C9.16002 14.8801 11.0934 14.1934 12.4867 12.9134C12.98 12.4601 12.8934 11.6534 12.3134 11.3201C11.9267 11.0934 11.4467 11.1667 11.1134 11.4667C10.1334 12.3601 8.77336 12.8334 7.29336 12.6134Z",fill:e||n.primary}),u.jsx("defs",{children:u.jsx("clipPath",{id:"clip0_13985_178979",children:u.jsx("rect",{width:"16",height:"16",fill:"white"})})})]})}function Fn({size:t,color:e}){return u.jsxs("svg",{width:t||20,height:t||20,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("g",{clipPath:"url(#clip0_13985_178979)",children:u.jsx("path",{d:"M16 8C16 11.4725 13.7883 14.4413 10.6666 15.5447C10.3417 15.6595 9.98425 15.4895 9.86902 15.1637C9.75403 14.8383 9.92468 14.4811 10.2501 14.3661C12.9417 13.4148 14.75 10.8564 14.75 8C14.75 4.8219 12.5725 2.22156 9.73181 1.47302L10.9003 2.64148C11.1443 2.8855 11.1443 3.28125 10.9003 3.52527C10.6561 3.76929 10.2605 3.76941 10.0164 3.52527L7.55798 1.06689C7.16492 0.673828 7.44482 0 8 0C12.422 0 16 3.57861 16 8ZM5.98364 12.4747C5.7395 12.2306 5.34387 12.2306 5.09973 12.4747C4.85571 12.7188 4.85571 13.1145 5.09973 13.3585L6.26819 14.527C3.42749 13.7784 1.25 11.1781 1.25 8C1.25 5.14355 3.05835 2.58521 5.75 1.63391C6.07544 1.51892 6.24597 1.16187 6.13098 0.836426C6.01599 0.510986 5.65894 0.340332 5.33337 0.455444C2.21167 1.55872 0 4.52747 0 8C0 12.4214 3.578 16 8 16C8.55518 16 8.83508 15.3262 8.44189 14.9331L5.98364 12.4747ZM8 4.91663C9.7002 4.91663 11.0834 6.2998 11.0834 8C11.0834 9.7002 9.7002 11.0834 8 11.0834C6.2998 11.0834 4.91663 9.7002 4.91663 8C4.91663 6.2998 6.2998 4.91663 8 4.91663ZM6.16663 8C6.16663 9.01086 6.98914 9.83337 8 9.83337C9.01086 9.83337 9.83337 9.01086 9.83337 8C9.83337 6.98914 9.01086 6.16663 8 6.16663C6.98914 6.16663 6.16663 6.98914 6.16663 8Z",fill:e||"currentColor"})}),u.jsx("defs",{children:u.jsx("clipPath",{id:"clip0_13985_178979",children:u.jsx("rect",{width:"16",height:"16",fill:"white"})})})]})}const ii=({width:t,height:e,color:n})=>u.jsx("svg",{width:t||"16",height:e||"16",viewBox:"0 0 16 16",fill:"none",display:"block",children:u.jsx("path",{d:"M11.3405 8.66669L11.3405 9.86002C11.3405 10.16 11.7005 10.3067 11.9071 10.0934L13.7605 8.23335C13.8871 8.10002 13.8871 7.89335 13.7605 7.76002L11.9071 5.90669C11.7005 5.69335 11.3405 5.84002 11.3405 6.14002L11.3405 7.33335L4.66047 7.33335L4.66047 6.14002C4.66047 5.84002 4.30047 5.69335 4.0938 5.90669L2.24047 7.76669C2.1138 7.90002 2.1138 8.10669 2.24047 8.24002L4.0938 10.1C4.30047 10.3134 4.66047 10.16 4.66047 9.86669L4.66047 8.66669L11.3405 8.66669Z",fill:n||"currentcolor"})}),Kd=J(zl)`
  height: 20px;
  width: 20px;
  :hover {
    cursor: pointer;
  }

  > * {
    stroke: ${({theme:t})=>t.text};
  }
`,Yd=({isOpen:t,onClose:e,onConfirm:n})=>{const r=kt();return u.jsx(Tu,{isOpen:t,width:"480px",maxWidth:"unset",children:u.jsxs(U,{flexDirection:"column",padding:"20px",bg:r.background,children:[u.jsx(U,{justifyContent:"flex-end",children:u.jsx(Kd,{onClick:e})}),u.jsx(U,{justifyContent:"center",children:u.jsx(Bl,{color:r.warning,size:64})}),u.jsx(D,{marginTop:"20px",textAlign:"center",fontSize:"16px",fontWeight:500,lineHeight:"24px",children:u.jsx(V,{id:"pwk8Yy"})}),u.jsx(D,{marginTop:"8px",textAlign:"center",fontSize:14,lineHeight:"20px",color:r.subText,children:u.jsx(V,{id:"3Zzf3u"})}),u.jsxs(U,{sx:{gap:"16px"},marginTop:"20px",children:[u.jsx(Ee,{style:{flex:1,fontSize:"16px",padding:"10px"},onClick:e,children:u.jsx(V,{id:"yz7wBu"})}),u.jsx(ql,{style:{fontSize:"16px",flex:1,padding:"10px"},onClick:n,children:u.jsx(V,{id:"BjcwDj"})})]})]})})},bs={[pt.ARBITRUM]:"https://raw.githubusercontent.com/KyberNetwork/unclaimed-rewards-elastic-lm/main/snapshots/arbitrum.json",[pt.MATIC]:"https://raw.githubusercontent.com/KyberNetwork/unclaimed-rewards-elastic-lm/main/snapshots/polygon.json",[pt.MAINNET]:"https://raw.githubusercontent.com/KyberNetwork/unclaimed-rewards-elastic-lm/main/snapshots/ethereum.json",[pt.OPTIMISM]:"https://raw.githubusercontent.com/KyberNetwork/unclaimed-rewards-elastic-lm/main/snapshots/optimism.json",[pt.AVAXMAINNET]:"https://raw.githubusercontent.com/KyberNetwork/unclaimed-rewards-elastic-lm/main/snapshots/avalanche.json"},Xd=(t=!0)=>{const{chainId:e,account:n}=mt(),[r,i]=L.useState(null),[a,s]=L.useState(!1),[o,c]=L.useState(null),f=L.useCallback(async()=>{try{const[l,h]=await Promise.all([fetch(bs[e]).then(d=>d.json()),fetch(`${Ul}/rewards/claim`,{method:"POST",body:JSON.stringify({wallet:n,chainId:e.toString(),clientCode:"elastic"})}).then(d=>d.json())]);h!=null&&h.data&&Array.isArray(l)&&(c({address:h.data.ContractAddress,encodedData:h.data.EncodedData}),Array.isArray(l)&&i(l.filter(d=>{var y;return((y=d==null?void 0:d.user)==null?void 0:y.toLowerCase())===(n==null?void 0:n.toLowerCase())})))}catch{i(null),c(null)}},[n,e]);return L.useEffect(()=>{if(i(null),c(null),bs[e]&&n&&(s(!0),f().finally(()=>s(!1)),t)){const l=setInterval(()=>{f()},15e3);return()=>clearInterval(l)}},[e,f,n,t]),{data:r,loading:a,claimInfo:o}},Vu=Xd,ai=new Kt.Interface(Hl.abi),je={[pt.MAINNET]:{subgraphUrl:"https://ethereum-graph.kyberengineering.io/subgraphs/name/kybernetwork/kyberswap-elastic-ethereum-legacy",farmContract:"0xb85ebe2e4ea27526f817ff33fb55fb240057c03f",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"},[pt.BSCMAINNET]:{subgraphUrl:"https://bsc-graph.kyberengineering.io/subgraphs/name/kybernetwork/kyberswap-elastic-bsc-legacy",farmContract:"",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"},[pt.ARBITRUM]:{subgraphUrl:"https://arbitrum-graph.kyberengineering.io/subgraphs/name/kybernetwork/kyberswap-elastic-arbitrum-legacy",farmContract:"0xbdec4a045446f583dc564c0a227ffd475b329bf0",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"},[pt.AVAXMAINNET]:{subgraphUrl:"https://avalanche-graph.kyberengineering.io/subgraphs/name/kybernetwork/kyberswap-elastic-avalanche-legacy",farmContract:"0xbdec4a045446f583dc564c0a227ffd475b329bf0",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"},[pt.OPTIMISM]:{subgraphUrl:"https://optimism-graph.kyberengineering.io/subgraphs/name/kybernetwork/kyberswap-elastic-optimism-legacy",farmContract:"0xb85ebe2e4ea27526f817ff33fb55fb240057c03f",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"},[pt.MATIC]:{subgraphUrl:"https://api.thegraph.com/subgraphs/id/QmbFWXTtjsqU688dj1aG33UGS32bZVFc3fdDr7YTmwGaSc",farmContract:"0xbdec4a045446f583dc564c0a227ffd475b329bf0",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"},[pt.FANTOM]:{subgraphUrl:"https://fantom-graph.kyberengineering.io/subgraphs/name/kybernetwork/kyberswap-elastic-fantom-legacy",farmContract:"",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"},[pt.BTTC]:{subgraphUrl:"https://bttc-graph.kyberengineering.io/subgraphs/name/kybernetwork/kyberswap-elastic-bttc-legacy",farmContract:"",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"},[pt.CRONOS]:{subgraphUrl:"https://cronos-graph.kyberengineering.io/subgraphs/name/kybernetwork/kyberswap-elastic-cronos-legacy",farmContract:"",positionManagerContract:"0x2B1c7b41f6A8F2b2bc45C3233a5d5FB3cD6dC9A8",tickReaderContract:"0x165c68077ac06c83800d19200e6E2B08D02dE75D"}};function Hu(t=!0){var y;const{chainId:e,account:n}=mt(),[r,i]=L.useState(!1),{positions:a}=wd(n,(y=je[e])==null?void 0:y.positionManagerContract,"0x5F1dddbf348aC2fbe22a163e30F99F9ECE3DD50a","0xc597aba1bb02db42ba24a8878837965718c032f8b46be94a6e46452a9f89ca01"),s=L.useMemo(()=>(a==null?void 0:a.filter(p=>p.liquidity.gt("0")))||[],[a]),o=L.useMemo(()=>[...new Set(s.map(p=>[p.token0,p.token1]).flat())],[s]),{data:c}=Vl({addresses:o,chainId:e},{skip:!o.length}),f=L.useMemo(()=>[...new Set(s.map(x=>x.poolId))].map(x=>{const g=s.find(S=>S.poolId===x),v=c==null?void 0:c.find(S=>S.wrapped.address===(g==null?void 0:g.token0)),w=c==null?void 0:c.find(S=>S.wrapped.address===(g==null?void 0:g.token1));return!g||!v||!w?null:[v.wrapped,w.wrapped,g.fee]}).filter(Boolean),[s,c]),l=yd(f,"0x5F1dddbf348aC2fbe22a163e30F99F9ECE3DD50a","0xc597aba1bb02db42ba24a8878837965718c032f8b46be94a6e46452a9f89ca01"),h=L.useMemo(()=>l.map(p=>p[0]===ie.EXISTS?p[1]:null).filter(Boolean),[l]),d=L.useMemo(()=>s.map(p=>{const m=c==null?void 0:c.find(v=>v.wrapped.address===(p==null?void 0:p.token0)),x=c==null?void 0:c.find(v=>v.wrapped.address===(p==null?void 0:p.token1)),g=h.find(v=>v?zu({factoryAddress:"0x5F1dddbf348aC2fbe22a163e30F99F9ECE3DD50a",tokenA:v.token0.wrapped,tokenB:v.token1.wrapped,fee:v.fee,initCodeHashManualOverride:"0xc597aba1bb02db42ba24a8878837965718c032f8b46be94a6e46452a9f89ca01"})===p.poolId:!1);return!m||!x||!g||!n?null:{id:p.tokenId.toString(),owner:n,liquidity:p.liquidity.toString(),token0:{id:m.wrapped.address,symbol:m.symbol,decimals:m.wrapped.decimals.toString(),name:m.name},token1:{id:x.wrapped.address,symbol:x.symbol,decimals:x.wrapped.decimals.toString(),name:x.name},tickLower:{tickIdx:p.tickLower.toString()},tickUpper:{tickIdx:p.tickUpper.toString()},pool:{id:p.poolId,feeTier:p.fee.toString(),sqrtPrice:g.sqrtRatioX96.toString(),liquidity:g.liquidity.toString(),reinvestL:g.reinvestLiquidity.toString(),tick:g.tickCurrent.toString()}}}).filter(Boolean),[s,n,h,c]);return{loading:r,positions:d.filter(p=>p.liquidity!=="0"),allPositions:d,farmPositions:[]}}function Wu(t){const[e,n]=L.useState(()=>t.reduce((s,o)=>({...s,[o.id]:["0","0"]}),{})),r=ua(),{chainId:i,networkInfo:a}=mt();return L.useEffect(()=>{const s=async()=>{if(!r)return;const c=ai.getFunction("getTotalFeesOwedToPosition"),f=t.map(h=>({target:a.elastic.tickReader,callData:ai.encodeFunctionData(c,[je[i].positionManagerContract,h.pool.id,h.id])})),{returnData:l}=await(r==null?void 0:r.callStatic.tryBlockAndAggregate(!1,f));n(l.reduce((h,d,y)=>{if(d.success){const p=ai.decodeFunctionResult(c,d.returnData);return{...h,[t[y].id]:[p.token0Owed.toString(),p.token1Owed.toString()]}}return{...h,[t[y].id]:["0","0"]}},{}))};s();const o=setInterval(()=>{s()},1e4);return()=>clearInterval(o)},[i,r,a,t.length]),e}const Gu=(t,e,n)=>{const r=Q(new me(e,t.token0.id,Number(t.token0.decimals),t.token0.symbol,t.token0.name)),i=Q(new me(e,t.token1.id,Number(t.token1.decimals),t.token1.symbol,t.token1.name)),a=new An(r.wrapped,i.wrapped,+t.pool.feeTier,t.pool.sqrtPrice,t.pool.liquidity,t.pool.reinvestL,+t.pool.tick),s=new ve({pool:a,liquidity:t.liquidity,tickLower:+t.tickLower.tickIdx,tickUpper:+t.tickUpper.tickIdx}),o=(n[s.amount0.currency.wrapped.address]||0)*+s.amount0.toExact()+(n[s.amount1.currency.wrapped.address]||0)*+s.amount1.toExact();return{token0:r,token1:i,pool:a,position:s,usd:o}},Ku=(t,e,n)=>{var E,$;const{chainId:r,account:i}=mt(),{library:a}=ca(),{token0:s,token1:o,position:c,usd:f}=Gu(t,r,e),l=yt.fromRawAmount(Q(s),((E=n[t.id])==null?void 0:E[0])||"0"),h=yt.fromRawAmount(Q(o),(($=n[t.id])==null?void 0:$[1])||"0"),[d]=la(),y=Uu(),[p,m]=L.useState(""),[x,g]=L.useState(!1),[v,w]=L.useState(),S=fa(),[C,k]=L.useState(null);return{removeLiquidity:z=>{if(k("removeLiquidity"),g(!0),!y||!i||!a){m("Something went wrong!");return}const{calldata:N,value:b}=xs.removeCallParameters(c,{tokenId:t.id,liquidityPercentage:new Su("100","100"),slippageTolerance:ln(d),deadline:y.toString(),collectOptions:{expectedCurrencyOwed0:z?l.subtract(l.multiply(ln(d))):yt.fromRawAmount(l.currency,0),expectedCurrencyOwed1:z?h.subtract(h.multiply(ln(d))):yt.fromRawAmount(h.currency,0),recipient:i,deadline:y.toString(),isRemovingLiquid:!0,havingFee:z&&!(l.equalTo(et.BigInt("0"))&&h.equalTo(et.BigInt("0")))}}),A={to:je[r].positionManagerContract,data:N,value:b};a.getSigner().estimateGas(A).then(async _=>{const T={...A,gasLimit:bn(_)};return a.getSigner().sendTransaction(T).then(P=>{const O=c.amount0.toSignificant(6),j=c.amount1.toSignificant(6),M=s.symbol,B=o.symbol;S({hash:P.hash,type:wn.ELASTIC_REMOVE_LIQUIDITY,extraInfo:{tokenAmountIn:O,tokenAmountOut:j,tokenSymbolIn:M,tokenSymbolOut:B,tokenAddressIn:s.wrapped.address,tokenAddressOut:o.wrapped.address,contract:t.pool.id,nftId:t.id}}),g(!1),w(P.hash)})}).catch(_=>{if(k("removeLiquidity"),g(!1),!Wl(_)){const T=new Error("Remove Legacy Elastic Liquidity Error",{cause:_});T.name=Gl.RemoveElasticLiquidityError,Kl(T,{extra:{calldata:N,value:b,to:je[r].positionManagerContract}})}m((_==null?void 0:_.message)||JSON.stringify(_))})},handleDismiss:()=>{k(null),w(""),g(!1),m("")},removeLiquidityError:p,attemptingTxn:x,txnHash:v,showPendingModal:C,token0:s,token1:o,position:c,usd:f,feeValue1:h,feeValue0:l,collectFee:()=>{if(k("collectFee"),g(!0),!l||!h||!i||!a||!y){g(!1),m("Something went wrong!");return}const{calldata:z,value:N}=xs.collectCallParameters({tokenId:t.id,expectedCurrencyOwed0:l.subtract(l.multiply(ln(d))),expectedCurrencyOwed1:h.subtract(h.multiply(ln(d))),recipient:i,deadline:y.toString(),havingFee:!0,isPositionClosed:t.liquidity==="0",legacyMode:!0}),b={to:je[r].positionManagerContract,data:z,value:N};a.getSigner().estimateGas(b).then(A=>{const _={...b,gasLimit:bn(A)};return a.getSigner().sendTransaction(_).then(T=>{const P=l==null?void 0:l.toSignificant(6),O=h==null?void 0:h.toSignificant(6),j=(l==null?void 0:l.currency.symbol)??"",M=(h==null?void 0:h.currency.symbol)??"";S({hash:T.hash,type:wn.ELASTIC_COLLECT_FEE,extraInfo:{tokenAmountIn:P,tokenAmountOut:O,tokenAddressIn:l==null?void 0:l.currency.wrapped.address,tokenAddressOut:h==null?void 0:h.currency.wrapped.address,tokenSymbolIn:j,tokenSymbolOut:M,arbitrary:{token_1:j,token_2:M,token_1_amount:P,token_2_amount:O}}}),g(!1),w(T.hash)})}).catch(A=>{k("collectFee"),g(!1),m((A==null?void 0:A.message)||JSON.stringify(A)),console.error(A)})}}};function Jj(){const t=Yl(),e=kt(),n=Xl(),[r,i]=Zl(),a=n.pathname.startsWith(Xt.FARMS),s=n.pathname.startsWith(Xt.MY_POOLS),{positions:o,farmPositions:c}=Hu(!1),{claimInfo:f}=Vu(!1),l=!!c.length||!!f,h=!!o.length,d=Object.fromEntries(r),{tab:y=st.ELASTIC,...p}=d,m=Ql(y,st)?y:st.ELASTIC,{chainId:x}=mt(),g=Jl()[x],v=tf()[x],w=!s&&m===st.ELASTIC,S=ue(`(max-width: ${ce.upToMedium}px)`),C=[pt.ZKEVM,pt.BASE,pt.LINEA,pt.SCROLL,pt.BLAST,pt.MANTLE,pt.XLAYER].includes(x),k=S||C?!1:a?l:h;L.useEffect(()=>{if(C&&m===st.ELASTIC_LEGACY){const b={...p,tab:st.ELASTIC};i(b)}},[m,C,i,p]);const F=b=>u.jsx(D,{sx:{fontSize:b?"10px":"14px",fontWeight:"500",padding:"2px 8px",borderRadius:"999px",color:m===st.ELASTIC_LEGACY?e.primary:e.subText,background:m===st.ELASTIC_LEGACY?xe(e.primary,.2):xe(e.subText,.2),marginTop:b?0:"-12px",marginLeft:"2px",lineHeight:1.5},children:"Legacy"}),R=b=>{if(v&&b===st.CLASSIC||g&&b!==st.CLASSIC)return;const A={...p,tab:b};i(A)},I=()=>g?e.disableText:k?m===st.ELASTIC?e.primary:e.subText:[st.ELASTIC,st.ELASTIC_LEGACY].includes(m)?e.primary:e.subText,E=()=>v?e.disableText:m===st.CLASSIC?e.primary:e.subText,$=()=>g?e.disableText:m===st.ELASTIC_LEGACY?e.primary:e.subText,z=I(),N=$();return L.useEffect(()=>{if(!(v&&g)){if(v&&m===st.CLASSIC){const b={...p,tab:st.ELASTIC};i(b)}else if(g&&m!==st.CLASSIC){const b={...p,tab:st.CLASSIC};i(b)}}},[i,g,v,p,m]),u.jsxs(U,{width:"max-content",children:[u.jsx(ye,{width:"fit-content",placement:"bottom",text:g||(C?"":k?null:u.jsxs(U,{flexDirection:"column",sx:{gap:"16px",padding:"8px"},children:[u.jsxs(U,{role:"button",color:m===st.ELASTIC?e.primary:e.subText,sx:{gap:"8px",cursor:"pointer"},fontSize:"14px",fontWeight:500,onClick:()=>R(st.ELASTIC),children:[u.jsx(Fn,{size:16}),a?u.jsx(V,{id:"RC6jom"}):u.jsx(V,{id:"S9d0eK"})]}),u.jsxs(U,{role:"button",color:m===st.ELASTIC_LEGACY?e.primary:e.subText,sx:{gap:"8px",cursor:"pointer"},fontWeight:500,fontSize:"14px",onClick:()=>R(st.ELASTIC_LEGACY),children:[u.jsx(Fn,{size:16}),a?u.jsx(V,{id:"RC6jom"}):u.jsx(V,{id:"S9d0eK"}),F(!0)]})]})),children:u.jsxs(U,{alignItems:"center",onClick:()=>{ef?(k||C)&&R(st.ELASTIC):R(st.ELASTIC)},children:[u.jsx(Fn,{size:20,color:z}),u.jsx(D,{fontWeight:500,fontSize:[18,20,24],color:z,width:"auto",marginLeft:"4px",role:"button",style:{cursor:g?"not-allowed":"pointer"},children:a?u.jsx(V,{id:"RC6jom"}):u.jsx(V,{id:"S9d0eK"})}),!k&&m===st.ELASTIC_LEGACY&&F(),!C&&!k&&u.jsx(Ar,{style:{color:z}})]})}),u.jsx(D,{fontWeight:500,fontSize:[18,20,24],color:e.subText,marginX:"12px",children:"|"}),k&&u.jsxs(u.Fragment,{children:[u.jsx(ye,{text:g||"",placement:"top",children:u.jsxs(U,{sx:{position:"relative"},alignItems:"center",onClick:()=>{R(st.ELASTIC_LEGACY)},children:[u.jsx(Fn,{size:20,color:N}),u.jsx(D,{fontWeight:500,fontSize:[18,20,24],color:N,width:"auto",marginLeft:"4px",role:"button",style:{cursor:g?"not-allowed":"pointer"},children:a?u.jsx(V,{id:"RC6jom"}):u.jsx(V,{id:"S9d0eK"})}),F()]})}),u.jsx(D,{fontWeight:500,fontSize:[18,20,24],color:e.subText,marginX:"12px",children:"|"})]}),u.jsx(ye,{text:v||"",children:u.jsxs(U,{alignItems:"center",onClick:()=>{R(st.CLASSIC)},children:[u.jsx(Gd,{size:20,color:E()}),u.jsx(D,{fontWeight:500,fontSize:[18,20,24],color:E(),width:"auto",marginLeft:"4px",style:{cursor:"pointer"},role:"button",children:a?u.jsx(V,{id:"BdnH3e"}):u.jsx(V,{id:"e5d803"})})]})}),u.jsx(Yd,{isOpen:w,onClose:()=>{v?t({pathname:Xt.MY_POOLS}):R(st.CLASSIC)},onConfirm:()=>{t({pathname:Xt.MY_POOLS})}})]})}var ws=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Zd(t,e){return!!(t===e||ws(t)&&ws(e))}function Qd(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Zd(t[n],e[n]))return!1;return!0}function Yu(t,e){e===void 0&&(e=Qd);var n=null;function r(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var s=t.apply(this,i);return n={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){n=null},r}function Xu(t,e,n){return L.useMemo(()=>({[gt.LOWER]:t&&e?e===Ae(Ye.MIN_TICK,oe[t]):void 0,[gt.UPPER]:t&&n?n===Ae(Ye.MAX_TICK,oe[t]):void 0}),[t,e,n])}function Jd(t,e,n){return Math.max(e,Math.min(t,n))}const jt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function _s(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function Ts(t,e,n,r=.15){return r===0?Jd(t,e,n):t<e?-_s(e-t,n-e,r)+e:t>n?+_s(t-n,n-e,r)+n:t}function th(t,[e,n],[r,i]){const[[a,s],[o,c]]=t;return[Ts(e,a,s,r),Ts(n,o,c,i)]}function eh(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nh(t){var e=eh(t,"string");return typeof e=="symbol"?e:String(e)}function $t(t,e,n){return e=nh(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ss(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ss(Object(n),!0).forEach(function(r){$t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Zu={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ks(t){return t?t[0].toUpperCase()+t.slice(1):""}const rh=["enter","leave"];function ih(t=!1,e){return t&&!rh.includes(e)}function ah(t,e="",n=!1){const r=Zu[t],i=r&&r[e]||e;return"on"+ks(t)+ks(i)+(ih(n,i)?"Capture":"")}const sh=["gotpointercapture","lostpointercapture"];function oh(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=sh.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function uh(t,e=""){const n=Zu[t],r=n&&n[e]||e;return t+r}function Qu(t){return"touches"in t}function ch(t){return Qu(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function lh(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function fh(t){return lh(t).map(e=>e.identifier)}function dh(t){var e,n;const{scrollX:r,scrollY:i,scrollLeft:a,scrollTop:s}=t.currentTarget;return[(e=r??a)!==null&&e!==void 0?e:0,(n=i??s)!==null&&n!==void 0?n:0]}function hh(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return e}function cr(t,...e){return typeof t=="function"?t(...e):t}function ph(){}function gh(...t){return t.length===0?ph:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function Cs(t,e){return Object.assign({},e,t||{})}const mh=32;class yh{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?cr(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let a=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,hh(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,a=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const k=n._delta.map(Math.abs);jt.addTo(n._distance,k)}this.axisIntent&&this.axisIntent(e);const[s,o]=n._movement,[c,f]=r.threshold,{_step:l,values:h}=n;if(r.hasCustomTransform?(l[0]===!1&&(l[0]=Math.abs(s)>=c&&h[0]),l[1]===!1&&(l[1]=Math.abs(o)>=f&&h[1])):(l[0]===!1&&(l[0]=Math.abs(s)>=c&&Math.sign(s)*c),l[1]===!1&&(l[1]=Math.abs(o)>=f&&Math.sign(o)*f)),n.intentional=l[0]!==!1||l[1]!==!1,!n.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[k,F]=h;d[0]=l[0]!==!1?k-l[0]:0,d[1]=l[1]!==!1?F-l[1]:0}else d[0]=l[0]!==!1?s-l[0]:0,d[1]=l[1]!==!1?o-l[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(d);const y=n.offset,p=n._active&&!n._blocked||n.active;p&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=cr(r.bounds,n)),this.setup&&this.setup()),n.movement=d,this.computeOffset()));const[m,x]=n.offset,[[g,v],[w,S]]=n._bounds;n.overflow=[m<g?-1:m>v?1:0,x<w?-1:x>S?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const C=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=th(n._bounds,n.offset,C),n.delta=jt.sub(n.offset,y),this.computeMovement(),p&&(!n.last||a>mh)){n.delta=jt.sub(n.offset,y);const k=n.delta.map(Math.abs);jt.addTo(n.distance,k),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&a>0&&(n.velocity=[k[0]/a,k[1]/a],n.timeDelta=a)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(ht(ht(ht({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function xh([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class vh extends yh{constructor(...e){super(...e),$t(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=jt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=jt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[ch(e)]:r.axisThreshold;n.axis=xh(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const bh=t=>t,As=.15,Ju={enabled(t=!0){return t},eventOptions(t,e,n){return ht(ht({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[As,As];case!1:return[0,0];default:return jt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return jt.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||bh},threshold(t){return jt.toVector(t,0)}},wh=0,jn=ht(ht({},Ju),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=wh){return t},bounds(t={}){if(typeof t=="function")return a=>jn.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),In=typeof window<"u"&&window.document&&window.document.createElement;function _h(){return In&&"ontouchstart"in window}function js(){return _h()||In&&window.navigator.maxTouchPoints>1}function Th(){return In&&"onpointerdown"in window}function Sh(){return In&&"exitPointerLock"in window.document}function kh(){try{return"constructor"in GestureEvent}catch{return!1}}const Ft={isBrowser:In,gesture:kh(),touch:js(),touchscreen:js(),pointer:Th(),pointerLock:Sh()},Ch=250,Ah=180,jh=.5,Ih=50,Eh=250,$h=10,Is={mouse:0,touch:0,pen:8};ht(ht({},jn),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Ft.pointerLock,Ft.touch&&n?"touch":this.pointerLock?"mouse":Ft.pointer&&!i?"pointer":Ft.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?Ch:void 0,!(!Ft.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const a=jt.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,a},swipe({velocity:t=jh,distance:e=Ih,duration:n=Eh}={}){return{velocity:this.transform(jt.toVector(t)),distance:this.transform(jt.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return Ah;case!1:return 0;default:return t}},axisThreshold(t){return t?ht(ht({},Is),t):Is},keyboardDisplacement(t=$h){return t}});ht(ht({},Ju),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Ft.touch&&Ft.gesture)return"gesture";if(Ft.touch&&r)return"touch";if(Ft.touchscreen){if(Ft.pointer)return"pointer";if(Ft.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=s=>{const o=Cs(cr(n,s),{min:-1/0,max:1/0});return[o.min,o.max]},a=s=>{const o=Cs(cr(r,s),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof n!="function"&&typeof r!="function"?[i(),a()]:s=>[i(s),a(s)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",jt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});ht(ht({},jn),{},{mouseOnly:(t=!0)=>t});class Mh extends vh{constructor(...e){super(...e),$t(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const n=this.state,r=dh(e);n._delta=jt.sub(r,n._values),jt.addTo(n._movement,n._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const Lh=jn;ht(ht({},jn),{},{mouseOnly:(t=!0)=>t});const tc=new Map,Oi=new Map;function Oh(t){tc.set(t.key,t.engine),Oi.set(t.key,t.resolver)}const Ph={key:"scroll",engine:Mh,resolver:Lh};function Rh(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Dh(t,e){if(t==null)return{};var n=Rh(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const Nh={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Ft.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},Fh=["target","eventOptions","window","enabled","transform"];function Qn(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=Qn(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function zh(t,e,n={}){const r=t,{target:i,eventOptions:a,window:s,enabled:o,transform:c}=r,f=Dh(r,Fh);if(n.shared=Qn({target:i,eventOptions:a,window:s,enabled:o,transform:c},Nh),e){const l=Oi.get(e);n[e]=Qn(ht({shared:n.shared},f),l)}else for(const l in f){const h=Oi.get(l);h&&(n[l]=Qn(ht({shared:n.shared},f[l]),h))}return n}class ec{constructor(e,n){$t(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,a){const s=this._listeners,o=uh(n,r),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},f=ht(ht({},c),a);e.addEventListener(o,i,f);const l=()=>{e.removeEventListener(o,i,f),s.delete(l)};return s.add(l),l}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Bh{constructor(){$t(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class qh{constructor(e){$t(this,"gestures",new Set),$t(this,"_targetEventStore",new ec(this)),$t(this,"gestureEventStores",{}),$t(this,"gestureTimeoutStores",{}),$t(this,"handlers",{}),$t(this,"config",{}),$t(this,"pointerIds",new Set),$t(this,"touchIds",new Set),$t(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Uh(this,e)}setEventIds(e){if(Qu(e))return this.touchIds=new Set(fh(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=zh(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const s of this.gestures){const o=this.config[s],c=Es(r,o.eventOptions,!!i);if(o.enabled){const f=tc.get(s);new f(this,e,s).bind(c)}}const a=Es(r,n.eventOptions,!!i);for(const s in this.nativeHandlers)a(s,"",o=>this.nativeHandlers[s](ht(ht({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const a in r)r[a]=gh(...r[a]);if(!i)return r;for(const a in r){const{device:s,capture:o,passive:c}=oh(a);this._targetEventStore.add(i,s,"",r[a],{capture:o,passive:c})}}}}function Fe(t,e){t.gestures.add(e),t.gestureEventStores[e]=new ec(t,e),t.gestureTimeoutStores[e]=new Bh}function Uh(t,e){e.drag&&Fe(t,"drag"),e.wheel&&Fe(t,"wheel"),e.scroll&&Fe(t,"scroll"),e.move&&Fe(t,"move"),e.pinch&&Fe(t,"pinch"),e.hover&&Fe(t,"hover")}const Es=(t,e,n)=>(r,i,a,s={},o=!1)=>{var c,f;const l=(c=s.capture)!==null&&c!==void 0?c:e.capture,h=(f=s.passive)!==null&&f!==void 0?f:e.passive;let d=o?r:ah(r,i,l);n&&h&&(d+="Passive"),t[d]=t[d]||[],t[d].push(a)};function Vh(t,e={},n,r){const i=xt.useMemo(()=>new qh(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),xt.useEffect(i.effect.bind(i)),xt.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function Hh(t,e){return Oh(Ph),Vh({scroll:t},e||{},"scroll")}const Wh=t=>L.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},L.createElement("path",{d:"M5.79274 10.2643H3.57898C3.30989 10.2643 3.11242 10.1471 2.98658 9.91282C2.86073 9.67851 2.87776 9.44976 3.03766 9.22657L9.02899 0.584519C9.13044 0.443453 9.25725 0.349131 9.40943 0.301553C9.5616 0.253964 9.71378 0.261086 9.86594 0.32292C10.0181 0.378475 10.1394 0.478359 10.2297 0.62257C10.3201 0.76677 10.3541 0.920514 10.3319 1.0838L9.66306 6.39395H12.4362C12.7164 6.39395 12.9151 6.5198 13.0323 6.77149C13.1494 7.02319 13.1225 7.25749 12.9515 7.4744L6.40071 15.3527C6.29927 15.4826 6.16968 15.5659 6.01194 15.6023C5.85421 15.6388 5.70167 15.623 5.55433 15.5549C5.41327 15.493 5.30349 15.3931 5.22498 15.2552C5.14648 15.1173 5.11834 14.9636 5.14056 14.794L5.79274 10.2643Z",fill:"currentColor"})),nc=[{inputs:[{internalType:"address",name:"_weth",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes",name:"_clientData",type:"bytes"}],name:"ClientData",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"reason",type:"string"}],name:"Error",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_executor",type:"address"},{indexed:!0,internalType:"bool",name:"_grantOrRevoke",type:"bool"}],name:"ExecutorWhitelisted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20",name:"_token",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"bool",name:"_isNative",type:"bool"},{indexed:!1,internalType:"bool",name:"_isPermit",type:"bool"}],name:"TokenCollected",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"bool",name:"grantOrRevoke",type:"bool"}],name:"UpdateGuardian",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"bool",name:"grantOrRevoke",type:"bool"}],name:"UpdateOperator",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_validator",type:"address"},{indexed:!0,internalType:"bool",name:"_grantOrRevoke",type:"bool"}],name:"ValidatorWhitelisted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint8",name:"_dexType",type:"uint8"},{indexed:!0,internalType:"contract IERC20",name:"_srcToken",type:"address"},{indexed:!0,internalType:"uint256",name:"_srcAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"_validator",type:"address"},{indexed:!1,internalType:"address",name:"_executor",type:"address"},{indexed:!1,internalType:"bytes",name:"_zapInfo",type:"bytes"},{indexed:!1,internalType:"bytes",name:"_extraData",type:"bytes"},{indexed:!1,internalType:"bytes",name:"_initialData",type:"bytes"},{indexed:!1,internalType:"bytes",name:"_zapResults",type:"bytes"}],name:"ZapExecuted",type:"event"},{inputs:[],name:"disableLogic",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"enableLogic",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"guardians",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"operators",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"rescueFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bool",name:"grantOrRevoke",type:"bool"}],name:"updateGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"bool",name:"grantOrRevoke",type:"bool"}],name:"updateOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"weth",outputs:[{internalType:"contract IWETH",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_executors",type:"address[]"},{internalType:"bool",name:"_grantOrRevoke",type:"bool"}],name:"whitelistExecutors",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_validators",type:"address[]"},{internalType:"bool",name:"_grantOrRevoke",type:"bool"}],name:"whitelistValidators",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelistedExecutor",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whitelistedValidator",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"uint8",name:"dexType",type:"uint8"},{internalType:"contract IERC20",name:"srcToken",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"bytes",name:"zapInfo",type:"bytes"},{internalType:"bytes",name:"extraData",type:"bytes"},{internalType:"bytes",name:"permitData",type:"bytes"}],internalType:"struct IKSZapRouter.ZapDescription",name:"_desc",type:"tuple"},{components:[{internalType:"address",name:"validator",type:"address"},{internalType:"address",name:"executor",type:"address"},{internalType:"uint32",name:"deadline",type:"uint32"},{internalType:"bytes",name:"executorData",type:"bytes"},{internalType:"bytes",name:"clientData",type:"bytes"}],internalType:"struct IKSZapRouter.ZapExecutionData",name:"_exe",type:"tuple"}],name:"zapIn",outputs:[{internalType:"bytes",name:"zapResults",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint8",name:"dexType",type:"uint8"},{internalType:"contract IERC20",name:"srcToken",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"bytes",name:"zapInfo",type:"bytes"},{internalType:"bytes",name:"extraData",type:"bytes"},{internalType:"bytes",name:"permitData",type:"bytes"}],internalType:"struct IKSZapRouter.ZapDescription",name:"_desc",type:"tuple"},{components:[{internalType:"address",name:"validator",type:"address"},{internalType:"address",name:"executor",type:"address"},{internalType:"uint32",name:"deadline",type:"uint32"},{internalType:"bytes",name:"executorData",type:"bytes"},{internalType:"bytes",name:"clientData",type:"bytes"}],internalType:"struct IKSZapRouter.ZapExecutionData",name:"_exe",type:"tuple"}],name:"zapInWithNative",outputs:[{internalType:"bytes",name:"zapResults",type:"bytes"}],stateMutability:"payable",type:"function"}],Gh=[{inputs:[{internalType:"address",name:"quoterAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidZapParams",type:"error"},{inputs:[{internalType:"contract IPool",name:"pool",type:"address"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint256",name:"amount0Desired",type:"uint256"},{internalType:"uint256",name:"amount1Desired",type:"uint256"}],name:"getAddLiquidityAmounts",outputs:[{internalType:"uint256",name:"qty0",type:"uint256"},{internalType:"uint256",name:"qty1",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IPool",name:"pool",type:"address"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"precision",type:"uint256"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"}],name:"getOptimalSwapAmountToZapIn",outputs:[{components:[{internalType:"uint256",name:"swapAmount",type:"uint256"},{internalType:"uint256",name:"returnedAmount",type:"uint256"},{internalType:"uint160",name:"sqrtP",type:"uint160"},{internalType:"uint256",name:"baseL",type:"uint256"},{internalType:"uint256",name:"reinvestL",type:"uint256"}],internalType:"struct IKSElasticZapHelper.GetOptimalSwapAmountResults",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IPool",name:"pool",type:"address"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"precision",type:"uint256"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"}],name:"getZapInPoolResults",outputs:[{components:[{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"usedAmount0",type:"uint256"},{internalType:"uint256",name:"usedAmount1",type:"uint256"},{internalType:"uint256",name:"remainingAmount0",type:"uint256"},{internalType:"uint256",name:"remainingAmount1",type:"uint256"},{internalType:"int24",name:"currentTick",type:"int24"},{internalType:"uint160",name:"sqrtP",type:"uint160"},{internalType:"uint256",name:"baseL",type:"uint256"},{internalType:"uint256",name:"reinvestL",type:"uint256"}],internalType:"struct IKSElasticZapHelper.ZapInResults",name:"results",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"positionManager",type:"address"},{internalType:"contract IPool",name:"pool",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"address",name:"receivedToken",type:"address"}],name:"getZapOutPoolResults",outputs:[{internalType:"uint256",name:"returnAmount",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"quoter",outputs:[{internalType:"contract IQuoterV2",name:"",type:"address"}],stateMutability:"view",type:"function"}],Kh=new Kt.Interface(nc);function Yh(t){var C;const{networkInfo:e,chainId:n}=mt(),r=da((C=e.elastic.zap)==null?void 0:C.helper,Gh),[i]=ku(),[a,s]=L.useState(!1),[o]=nf(),[c]=la(),{aggregatorDomain:f}=Cu(),l=`${f}/${jr[n].aggregatorRoute}${Au.GET_ROUTE}`,h=L.useMemo(()=>t!=null&&t.amountIn?[10,20,30,40,50,60,70,80,90].map(R=>new Su(R,100)).map(R=>t.amountIn.multiply(R)):[],[t==null?void 0:t.amountIn]),[d,y]=L.useState([]),{tokenIn:p,tokenOut:m,poolAddress:x}=t||{},g=L.useCallback(()=>{p&&m&&x&&(y([]),i&&(s(!0),Promise.all(h.map(k=>o({url:l,authentication:!1,params:{tokenIn:p,tokenOut:m,amountIn:k.quotient.toString(),excludedPools:x,gasInclude:"true"},clientId:"kyberswap-zap"}))).then(k=>(k==null?void 0:k.map(F=>{var R,I;return(I=(R=F==null?void 0:F.data)==null?void 0:R.data)==null?void 0:I.routeSummary}))||[]).then(k=>y(k.filter(Boolean))).finally(()=>{setTimeout(()=>s(!1),100)})))},[p,m,x,h,o,l,i,c]);L.useEffect(()=>{g();const k=setInterval(()=>{g()},1e4);return()=>k&&clearInterval(k)},[g]);const v=L.useMemo(()=>t&&!a&&t.tickLower<t.tickUpper?[[t.poolAddress,t.tokenIn,t.amountIn.quotient.toString(),"0",1,t.tickLower,t.tickUpper],...d.filter(k=>et.greaterThan(t.amountIn.quotient,et.BigInt(k.amountIn))).map(k=>[t.poolAddress,t.tokenIn,et.subtract(t.amountIn.quotient,et.BigInt(k.amountIn)).toString(),k.amountOut,1,t.tickLower,t.tickUpper])]:void 0,[t,d,a]),w=ju(t?r:void 0,"getZapInPoolResults",v||[]),S=L.useMemo(()=>{var I;let k=-1,F,R=_n.from("0");return w.forEach((E,$)=>{var N,b,A,_;const z=_n.from(((A=(b=(N=E==null?void 0:E.result)==null?void 0:N.results)==null?void 0:b.liquidity)==null?void 0:A.toString())||"0");z.gt(R)&&(R=z,k=$,F=(_=E==null?void 0:E.result)==null?void 0:_.results)}),{result:F,loading:(w==null?void 0:w.some(E=>E==null?void 0:E.loading))||a,aggregatorData:k===0||!t?null:(I=d==null?void 0:d.filter(E=>et.greaterThan(t.amountIn.quotient,et.BigInt(E.amountIn))))==null?void 0:I[k-1]}},[w,a,d,t]);return console.debug("Zap: best return from zap helper ",S),S}function rc(){var x;const{networkInfo:t,account:e,chainId:n}=mt(),{library:r}=ca(),{router:i,validator:a,executor:s}=((x=t.elastic)==null?void 0:x.zap)||{},o=rf(i,nc),c=t.elastic.nonfungiblePositionManager,[f]=la(),l=Uu(),[h]=ku(),[d]=af(),{aggregatorDomain:y}=Cu(),p=`${y}/${jr[n].aggregatorRoute}${Au.BUILD_ROUTE}`;return{zapIn:L.useCallback(async({tokenId:g=0,tokenIn:v,amountIn:w,equivalentQuoteAmount:S,poolAddress:C,tickUpper:k,tickLower:F,poolInfo:R,tickPrevious:I,liquidity:E,aggregatorRoute:$},z)=>{var N;if(o&&e&&r&&s){let b=null;$&&h&&(b=await d({url:p,payload:{routeSummary:$,deadline:+((l==null?void 0:l.toString())||(Math.floor(Date.now()/1e3)+1200).toString()),slippageTolerance:f,sender:e,recipient:s,source:"kyberswap-zap",skipSimulateTx:!1},authentication:!1}));const A=et.divide(et.multiply(et.BigInt(E),et.BigInt(1e4-f)),et.BigInt(1e4)).toString(),_=Kt.defaultAbiCoder.encode(["address","address","uint256"],[C,c,g]),T=g?Kt.defaultAbiCoder.encode(["uint128"],[A]):Kt.defaultAbiCoder.encode(["address","int24","int24","uint128"],[e,F,k,A]),P="0".repeat(128),O=et.BigInt(1e6),j=et.divide(et.multiply(et.greaterThan(et.BigInt(w),O)?et.BigInt(w):O,et.BigInt(1)),O).toString(2),M=et.divide(et.multiply(et.greaterThan(et.BigInt(S),O)?et.BigInt(S):O,et.BigInt(1)),O).toString(2),B=BigInt("0b"+(P+j).slice(-128)+(P+M).slice(-128)).toString(),H=B,W=Kt.defaultAbiCoder.encode(["address","address","tupple(address token0,int24 fee,address token1)","uint256","address","uint256","uint256","uint256","int24","int24","int24[2]","uint128","bytes"],[c,C,{token0:R.token0,fee:R.fee,token1:R.token1},g,e,1,B,H,F,k,I,A,"0x"]);let G="0x";(N=b==null?void 0:b.data)!=null&&N.data&&(G="0x0000000000000000000000000000000000000000000000000000000000000020"+Kt.defaultAbiCoder.encode(["address","uint256","bytes"],[b.data.data.routerAddress,b.data.data.amountIn,b.data.data.data]).slice(2));const X=Kt.defaultAbiCoder.encode(["uint8","address","uint256","bytes","bytes","bytes"],[0,v,w,"0x",G,"0x0000000000000000000000000000000000000000000000000000000000000020"+W.slice(2)]),q=[[0,v,w,_,T,"0x"],[a,s,l==null?void 0:l.toString(),X,"0x"]],Y=Kh.encodeFunctionData(z.zapWithNative?"zapInWithNative":"zapIn",q);console.debug("zap data",{value:z.zapWithNative?w:void 0,data:Y,to:i,minRefundAmounts:H});const rt=await o.estimateGas[z.zapWithNative?"zapInWithNative":"zapIn"](...q,{value:z.zapWithNative?w:void 0});if(z.estimateOnly)return{gasEstimated:rt,hash:""};const nt={value:z.zapWithNative?w:void 0,data:Y,to:i,gasLimit:bn(rt)},{hash:tt}=await r.getSigner().sendTransaction(nt);return{gasEstimated:rt,hash:tt}}return{gasEstimated:0,hash:""}},[e,l,s,a,c,o,f,d,h,p,r,i])}}const Xh=[it.VERY_STABLE,it.VERY_STABLE1,it.VERY_STABLE2,it.STABLE,it.MOST_PAIR,it.MOST_PAIR1,it.MOST_PAIR2,it.EXOTIC,it.VOLATILE,it.RARE];Xh.reduce((t,e)=>({...t,[e]:0}),{});it.VERY_STABLE+"",V,it.VERY_STABLE1+"",V,it.VERY_STABLE2+"",V,it.STABLE+"",V,it.MOST_PAIR+"",V,it.MOST_PAIR1+"",V,it.MOST_PAIR2+"",V,it.EXOTIC+"",V,it.VOLATILE+"",V,it.RARE+"",V;J.div`
  padding: 12px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;

  :hover {
    background: ${({theme:t})=>t.buttonBlack};
  }
`;const Zh=J.div`
  display: flex;
  padding: 8px 12px;
  justify-content: space-between;
  align-items: center;
  background: ${({theme:t})=>t.buttonBlack};
  position: relative;
  cursor: pointer;
  border-radius: 16px;
  z-index: 3;
`,Qh=J.div`
  position: absolute;
  left: 0;
  right: 0;
  top: 56px;
  border-radius: 20px;
  overflow: hidden;
  background: ${({theme:t})=>t.tableHeader};
  padding: ${({show:t})=>t?"4px":0};
  transition: padding 0.15s ${({show:t})=>t?"ease-in":"ease-out"};
`,Jh=J.div`
  border-radius: 20px;
  z-index: 2;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.04);
  max-height: ${({show:t})=>t?"252px":0};
  overflow-y: scroll;
  transition: max-height 0.15s ${({show:t})=>t?"ease-in":"ease-out"};

  /* width */
  ::-webkit-scrollbar {
    display: unset;
    width: 4px;
    border-radius: 999px;
  }

  /* Track */
  ::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 999px;
    margin: 8px 0;
  }

  /* Handle */
  ::-webkit-scrollbar-thumb {
    background: ${({theme:t})=>t.border};
    border-radius: 999px;
  }
`;J.div`
  border-radius: 999px;
  height: fit-content;
  padding: 4px 8px;
  font-size: 10px;
  background: ${({theme:t})=>xe(t.subText,.2)};
  color: ${({theme:t})=>t.subText};
`;const tp=t=>t.every(e=>ff.includes(e.chainId)&&typeof e.address=="string"&&typeof e.symbol=="string"&&typeof e.name=="string"&&typeof e.decimals=="number"&&typeof e.marketCap=="number"&&typeof e.logoURI=="string"&&typeof e.isWhitelisted=="boolean"),ep=()=>{const{chainId:t}=mt(),e=uf(i=>i.topTokens[t]),n=Ir(),[r]=cf();return L.useEffect(()=>{(async()=>{var o;const{data:a}=await r({chainId:t,page:1}),s=((o=a==null?void 0:a.data)==null?void 0:o.tokens)||[];s.length&&(tp(s)?n(lf({chainId:t,topTokens:s})):console.error("Validate top tokens API failed",a))})()},[t,n,r]),L.useMemo(()=>e?e.reduce((i,a)=>{const s=new me(a.chainId,a.address,a.decimals,a.symbol,a.name);return i[s.address]=s,i[s.address.toLowerCase()]=s,i},{}):{},[e])},ic=t=>{const{chainId:e}=mt(),n=ep(),{isStableCoin:r}=sf(e),i=t[0],a=t[1];if(!i||!a)return hn.EXOTIC;if(fs[e].includes(i.address)&&fs[e].includes(a.address))return hn.SUPER_STABLE;const o=r(i.address)&&r(a.address),c=of[e].some(l=>l.includes(i.address)&&l.includes(a.address));return o||c?hn.STABLE:n[i.address]&&n[a.address]&&!r(i.address)&&!r(a.address)?hn.NOMAL:hn.EXOTIC},np=J(Qh)`
  background: ${({theme:t})=>t.buttonGray};
`,$s=J.div`
  padding: 12px;
  cursor: pointer;

  :hover {
    background: ${({theme:t})=>t.buttonBlack};
  }
`,si=it.MOST_PAIR,ac=(t,e)=>{const n=ic([e==null?void 0:e.token0,e==null?void 0:e.token1]),r=L.useMemo(()=>({[gt.LOWER]:Ae(Ye.MIN_TICK,oe[(e==null?void 0:e.fee)||si]),[gt.UPPER]:Ae(Ye.MAX_TICK,oe[(e==null?void 0:e.fee)||si])}),[e==null?void 0:e.fee]);return typeof t=="object"&&t?[t.tickLower,t.tickUpper]:t===Ci.FULL_RANGE?[r.LOWER,r.UPPER]:e&&t?Bu(t,e.token0,e.token1,e.tickCurrent,n).map(a=>Ae(a,oe[(e==null?void 0:e.fee)||si])):[0,0]};function rp({pool:t,selectedRange:e,onChange:n,farmV2:r}){const[i,a]=L.useState(!1),s=kt(),o=L.useRef(null);df(o,()=>{a(!1)});const c=Ke(t.token0.chainId,t.token0.address,Q(t.token0).symbol),f=Ke(t.token1.chainId,t.token1.address,Q(t.token1).symbol),[l,h]=ac(e,t),d=e===Ci.FULL_RANGE,y=pe(t.token0,t.token1,l),p=pe(t.token0,t.token1,h);L.useEffect(()=>{var v;if(!e){const w=((v=r==null?void 0:r.ranges.filter(S=>!S.isRemoved))==null?void 0:v[0])||vs[1];n(w)}},[e,r,n]);const m=ic([t.token0,t.token1]),x=L.useMemo(()=>({[gt.LOWER]:Ae(Ye.MIN_TICK,oe[t.fee]),[gt.UPPER]:Ae(Ye.MAX_TICK,oe[t.fee])}),[t.fee]),g=_d();return u.jsxs(Zh,{role:"button",onClick:()=>a(v=>!v),ref:o,children:[u.jsxs("div",{children:[u.jsx(D,{fontSize:12,fontWeight:"500",children:typeof e=="object"?u.jsx(V,{id:"hsg3XL"}):g[e].title}),u.jsxs(U,{fontSize:12,marginTop:"8px",sx:{gap:"4px"},children:[u.jsxs(D,{color:s.subText,children:["Range (",c,"/",f,"):"]}),u.jsx(D,{children:d?"0":y.toSignificant(6)}),u.jsx(ii,{}),u.jsx(D,{children:d?"∞":p.toSignificant(6)})]})]}),u.jsx(Ar,{style:{transform:`rotate(${i?"-180deg":0})`,transition:"transform 0.15s"}}),u.jsx(np,{show:i,children:u.jsxs(Jh,{show:i,children:[r==null?void 0:r.ranges.filter(v=>!v.isRemoved).map(v=>{const w=pe(t.token0,t.token1,v.tickLower),S=pe(t.token0,t.token1,v.tickUpper);return u.jsxs($s,{role:"button",onClick:()=>n(v),children:[u.jsx(D,{fontSize:12,fontWeight:"500",children:u.jsx(V,{id:"hsg3XL"})}),u.jsxs(U,{fontSize:12,marginTop:"8px",sx:{gap:"4px"},children:[u.jsxs(D,{color:s.subText,children:["Range (",c,"/",f,"):"]}),u.jsx(D,{children:w.toSignificant(6)}),u.jsx(ii,{}),u.jsx(D,{children:S.toSignificant(6)})]})]},v.id)}),vs.map(v=>{const w=v===Ci.FULL_RANGE,[S,C]=w?[x.LOWER,x.UPPER]:Bu(v,t.token0,t.token1,t.tickCurrent,m),k=pe(t.token0,t.token1,S),F=pe(t.token0,t.token1,C);return u.jsxs($s,{role:"button",onClick:()=>n(v),children:[u.jsx(D,{fontSize:12,fontWeight:"500",children:g[v].title}),u.jsxs(U,{fontSize:12,marginTop:"8px",sx:{gap:"4px"},children:[u.jsxs(D,{color:s.subText,children:["Range (",c,"/",f,"):"]}),u.jsx(D,{children:w?"0":k.toSignificant(6)}),u.jsx(ii,{}),u.jsx(D,{children:w?"∞":F.toSignificant(6)})]})]},v)})]})})]})}const ip=J(hf)`
  display: flex;
  flex-direction: column;
  gap: 8px;
  border: 1px solid ${({theme:t})=>t.border};
  border-radius: 1rem;
  padding: 12px;
`,ap=({pool:t,zapResult:e,position:n,amountIn:r,tokenIn:i,tokenId:a,poolAddress:s,tickLower:o,tickUpper:c,previousTicks:f,aggregatorRoute:l})=>{var H,W,G,X,q,Y,rt,nt;const{chainId:h}=mt(),{readProvider:d}=Oe(),y=r&&t&&((H=r.multiply(t.priceOf(t.token0.address.toLowerCase()===(i==null?void 0:i.toLowerCase())?t.token0:t.token1)))==null?void 0:H.quotient.toString())||"0",p=(t==null?void 0:t.token0)&&Q(t.token0),m=(t==null?void 0:t.token1)&&Q(t.token1),x=t&&e?new An(t.token0,t.token1,t.fee,e.sqrtP.toString(),e.baseL.toString(),e.reinvestL.toString(),e.currentTick):void 0,g=t&&e&&x&&o!==void 0&&c!==void 0&&o<c?new ve({pool:x,tickLower:o,tickUpper:c,liquidity:e.liquidity.toString()}):void 0;let v=g==null?void 0:g.amount0,w=g==null?void 0:g.amount1;n&&v&&w&&(v=v.add(n.amount0),w=w.add(n.amount1));const S=(t==null?void 0:t.token0)&&(e==null?void 0:e.remainingAmount0)&&yt.fromRawAmount(t.token0,e.remainingAmount0.toString()),C=(t==null?void 0:t.token1)&&(e==null?void 0:e.remainingAmount1)&&yt.fromRawAmount(t.token1,e.remainingAmount1.toString()),k=Cn([Ce[h].address,p==null?void 0:p.wrapped.address,m==null?void 0:m.wrapped.address].filter(Boolean)),F=+((n==null?void 0:n.amount0.toExact())||"0")*(k[(p==null?void 0:p.wrapped.address)||""]||0)+ +((n==null?void 0:n.amount1.toExact())||"0")*(k[(m==null?void 0:m.wrapped.address)||""]||0),R=+((v==null?void 0:v.toExact())||"0")*(k[((W=p==null?void 0:p.wrapped)==null?void 0:W.address)||""]||0)+ +((w==null?void 0:w.toExact())||"0")*(k[((G=m==null?void 0:m.wrapped)==null?void 0:G.address)||""]||0),I=+((r==null?void 0:r.toExact())||"0")*(k[((X=r==null?void 0:r.currency)==null?void 0:X.wrapped.address)||""]||0),E=p&&m?+((S==null?void 0:S.toExact())||0)*(k[p.wrapped.address]||0)+ +((C==null?void 0:C.toExact())||0)*(k[m.wrapped.address]||0):0,$=(p&&m?+(((q=g==null?void 0:g.amount0)==null?void 0:q.toExact())||0)*(k[p.wrapped.address]||0)+ +(((Y=g==null?void 0:g.amount1)==null?void 0:Y.toExact())||0)*(k[m.wrapped.address]||0):0)+E,z=!k[((rt=p==null?void 0:p.wrapped)==null?void 0:rt.address)||""]||!k[((nt=m==null?void 0:m.wrapped)==null?void 0:nt.address)||""]?NaN:(I-$)*100/I,N=pf(z),[b,A]=L.useState(""),{zapIn:_}=rc(),T=r==null?void 0:r.quotient.toString(),[P,O]=L.useState("0");L.useEffect(()=>{d==null||d.getGasPrice().then(tt=>O(tt.toString()))},[d]),L.useEffect(()=>{t&&s&&i&&T&&e&&o!==void 0&&c!==void 0&&(f!=null&&f.length)?_({tokenId:(a==null?void 0:a.toString())||0,tokenIn:i,amountIn:T,equivalentQuoteAmount:y,poolAddress:s,tickLower:o,tickUpper:c,tickPrevious:[f[0],f[1]],poolInfo:{token0:t.token0.wrapped.address,fee:t.fee,token1:t.token1.wrapped.address},liquidity:e.liquidity.toString(),aggregatorRoute:l},{zapWithNative:!!(r!=null&&r.currency.isNative),estimateOnly:!0}).then(({gasEstimated:tt})=>{A(tt.toString())}).catch(()=>{A("")}):A("")},[T,l,r==null?void 0:r.currency.isNative,_,i,s,a,o,c,f,y,d,e,t]);const j=b&&k[Ce[h].address]?+P*+b/1e18*k[Ce[h].address]:0,M=kt(),B=tt=>u.jsx(Ld,{height:"13px",width:`${tt||169}px`,baseColor:M.border,highlightColor:M.buttonGray,borderRadius:"999px"});return{estimateGasUsd:j,priceImpact:{value:z,...N},zapResult:e,position:n,pool:t,oldUsdValue:F,newUsdValue:R,amountInUsd:I,newPooledAmount0:v,newPooledAmount1:w,newPosDraft:g,token0IsNative:!!(r!=null&&r.currency.isNative&&(r==null?void 0:r.currency.wrapped.address)===(t==null?void 0:t.token0.address)),token1IsNative:!!(r!=null&&r.currency.isNative&&(r==null?void 0:r.currency.wrapped.address)===(t==null?void 0:t.token1.address)),skeleton:B}};function sp({zapLoading:t,sx:e,zapDetail:n}){var S,C;const{pool:r,position:i,estimateGasUsd:a,zapResult:s,newPooledAmount0:o,newPooledAmount1:c,oldUsdValue:f,newUsdValue:l,priceImpact:h,skeleton:d,token0IsNative:y,token1IsNative:p}=n,m=kt(),x=(r==null?void 0:r.token0)&&Q(r.token0),g=(r==null?void 0:r.token1)&&Q(r.token1),v=y?x==null?void 0:x.symbol:Ke(r==null?void 0:r.token0.chainId,(S=r==null?void 0:r.token0)==null?void 0:S.wrapped.address,(x==null?void 0:x.wrapped.symbol)||""),w=p?g==null?void 0:g.symbol:Ke(r==null?void 0:r.token0.chainId,(C=r==null?void 0:r.token1)==null?void 0:C.wrapped.address,(g==null?void 0:g.wrapped.symbol)||"");return u.jsxs(ip,{sx:e,children:[u.jsxs(U,{justifyContent:"space-between",children:[u.jsxs(U,{children:[u.jsxs(D,{fontWeight:"500",children:[v," - ",w]}),u.jsxs(Rr,{children:["FEE ",((r==null?void 0:r.fee)||0)*100/Er,"%"]})]}),t?d(40):u.jsxs(U,{alignItems:"center",sx:{gap:"2px"},children:[u.jsx($d,{}),u.jsx(D,{fontSize:12,fontWeight:"500",children:a?"$"+a.toFixed(2):"--"})]})]}),u.jsx($r,{}),u.jsxs(U,{justifyContent:"space-between",fontSize:12,children:[u.jsxs(D,{color:m.subText,children:["Est. Pooled ",v]}),t?d():s?u.jsxs(U,{fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[i&&u.jsxs(u.Fragment,{children:[u.jsx(Rt,{currency:x,size:"14px"}),u.jsxs(D,{color:m.subText,children:[i.amount0.toSignificant(6)," →"]})]}),u.jsxs(D,{children:[(o==null?void 0:o.toSignificant(6))||"--"," ",v]})]}):"--"]}),u.jsxs(U,{justifyContent:"space-between",fontSize:12,children:[u.jsxs(D,{color:m.subText,children:["Est. Pooled ",w]}),t?d():s?u.jsxs(U,{fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[i&&u.jsxs(u.Fragment,{children:[u.jsx(Rt,{currency:g,size:"14px"}),u.jsxs(D,{color:m.subText,children:[i.amount1.toSignificant(6)," →"]})]}),u.jsxs(D,{children:[(c==null?void 0:c.toSignificant(6))||"--"," ",w]})]}):"--"]}),u.jsxs(U,{justifyContent:"space-between",fontSize:12,children:[u.jsx(D,{color:m.subText,children:"Est. Liquidity Value"}),t?d(120):s?u.jsxs(U,{sx:{gap:"4px"},children:[i&&u.jsxs(D,{color:m.subText,children:[ae(f)," →"]}),u.jsx(D,{children:ae(l)})]}):"--"]}),u.jsxs(U,{justifyContent:"space-between",fontSize:12,children:[u.jsx(D,{color:m.subText,children:"Price Impact"}),t?d(40):s?u.jsx(D,{fontWeight:"500",color:h.isVeryHigh?m.red:h.isHigh?m.warning:m.text,children:h.isInvalid?"--":h.value<.01?"<0.01%":h.value.toFixed(2)+"%"}):"--"]}),u.jsxs(U,{justifyContent:"space-between",fontSize:12,children:[u.jsx(D,{color:m.subText,children:"Zap Fee"}),u.jsx(D,{fontWeight:"500",color:m.primary,children:"Free"})]})]})}const op=J(Ee)`
  padding: 0;
  width: ${({size:t})=>t==="small"?"28px":"36px"};
  max-width: ${({size:t})=>t==="small"?"28px":"36px"};
  height: ${({size:t})=>t==="small"?"28px":"36px"};
  background: ${({theme:t,disabled:e})=>xe(e?t.subText:t.warning,.2)};
  color: ${({theme:t,disabled:e})=>e?t.subText:"#FF9901"};
  &:hover {
    cursor: ${({disabled:t})=>t?"not-allowed":"pointer"};
    border: 1px solid ${({theme:t,disabled:e})=>xe(e?t.subText:t.warning,.2)};
  }

  border: 1px solid ${({theme:t,disabled:e})=>xe(e?t.subText:t.warning,.2)};

  &:active {
    box-shadow: none;
  }

  &:focus {
    box-shadow: none;
  }
`,up=J.div`
  padding: 1rem;
  width: 100%;
`,cp=J.div`
  opacity: ${({overlay:t})=>t?.4:1};
  pointer-events: ${({overlay:t})=>t?"none":""};
`,lp=({onClick:t,size:e="medium"})=>{const{networkInfo:n}=mt(),r=!!n.elastic.zap,i=kt();return!0?null:u.jsx(ye,{text:r?u.jsx(V,{id:"TURxX4"}):u.jsx(V,{id:"l1Q315"}),children:u.jsx(op,{onClick:t,size:e,disabled:!r,color:r?i.warning:i.subText,children:u.jsx(Wh,{})})})};function fp(t){return t.isOpen?u.jsx(dp,{...t}):null}function dp({isOpen:t,onDismiss:e,poolAddress:n,tokenId:r,expectedChainId:i}){var is,as,ss,os,us,cs,ls;const{chainId:a,networkInfo:s,account:o}=mt(),c=(is=s.elastic.zap)==null?void 0:is.router,{changeNetwork:f}=gf(),l=kt(),[h,d]=L.useState(null),{farms:y}=qu(),p=y==null?void 0:y.filter(ot=>ot.endTime>Date.now()/1e3&&!ot.isSettled).find(ot=>ot.poolAddress.toLowerCase()===n.toLowerCase()),m=mf(),x=da(n,xd),{loading:g,position:v}=Td(r?_n.from(r):void 0),{loading:w,result:S}=fn(x,"getPoolState"),{loading:C,result:k}=fn(x,"token0",void 0,ti),{loading:F,result:R}=fn(x,"token1",void 0,ti),{loading:I,result:E}=fn(x,"swapFeeUnits",void 0,ti),{loading:$,result:z}=fn(x,"getLiquidityState"),N=ar(k==null?void 0:k[0]),b=ar(R==null?void 0:R[0]),A=N?Q(N.wrapped):void 0,_=b?Q(b.wrapped):void 0,T=L.useMemo(()=>{const ot=E==null?void 0:E[0];return!z||!S||!N||!b||!ot?null:new An(N.wrapped,b.wrapped,ot,S.sqrtP,z.baseL,z.reinvestL,S.currentTick)},[N,b,S,z,E]),P=L.useMemo(()=>!v||!T?null:new ve({pool:T,tickLower:v.tickLower,tickUpper:v.tickUpper,liquidity:v.liquidity.toString()}),[v,T]),O=w||$||C||F||I||g,j=!!P&&(P.pool.tickCurrent<P.tickLower||P.pool.tickCurrent>=P.tickUpper),M=L.useMemo(()=>[A,_,A==null?void 0:A.wrapped,_==null?void 0:_.wrapped],[A,_]),B=yf(M),[H,W]=L.useState(!1),[G,X]=L.useState(!1),q=L.useMemo(()=>{const ot=H?_:A;return G?ot==null?void 0:ot.wrapped:ot&&Q(ot)},[H,A,_,G]),Y=L.useMemo(()=>H?A:_,[H,A,_]),[rt,nt]=L.useState(""),tt=xf(rt,300),K=Od(q,tt);L.useEffect(()=>{K!=null&&K.toExact()&&Zn.track("Zap - Input detailed",{token0:q==null?void 0:q.symbol,token1:Y==null?void 0:Y.symbol,zap_token:q==null?void 0:q.symbol,token_amount:K.toExact(),source:r?"my_pool_page":"pool_page"})},[K==null?void 0:K.toExact(),q]);const ct=K&&T&&q&&K.multiply(T.priceOf(q.wrapped)),[Ct,Ot]=ac(h,T||void 0),It=vf(),Z=P?P.tickLower:Ct,at=P?P.tickUpper:Ot,Bt=ju(It,"getNearestInitializedTicks",[[n,Z],[n,at]]),At=L.useMemo(()=>Bt.map(ot=>{var cn;return(cn=ot.result)==null?void 0:cn.previous}),[Bt]),Rn=L.useMemo(()=>K!=null&&K.greaterThan("0")&&q&&Y?{poolAddress:n,tokenIn:q.wrapped.address,tokenOut:Y.wrapped.address,amountIn:K,tickLower:Z,tickUpper:at}:void 0,[K,n,q,Z,at,Y]),{loading:De,result:de,aggregatorData:bt}=Yh(Rn),[wt,Ne]=bf(K,c),{zapIn:he}=rc(),Dn=G?H?3:2:H?1:0;let be=null;rt?K?B[Dn]&&(K!=null&&K.greaterThan(B[Dn]))?be=u.jsx(V,{id:"N2DUxS"}):de||(be=u.jsx(V,{id:"5SMp/O"})):be=u.jsx(V,{id:"SEKlEq"}):be=u.jsx(V,{id:"iPMIoT"});const Pl=()=>be||(wt===Nn.PENDING?u.jsx(ds,{children:u.jsx(V,{id:"j2Uisd"})}):wt!==Nn.APPROVED?u.jsx(V,{id:"Z7ZXbT"}):De?u.jsx(ds,{children:u.jsx(V,{id:"yQE2r9"})}):P?u.jsx(V,{id:"+zruvG"}):u.jsx(V,{id:"OBdohg"})),Qr=Ke(a,N==null?void 0:N.wrapped.address,G?A==null?void 0:A.wrapped.symbol:A==null?void 0:A.symbol),Jr=Ke(a,b==null?void 0:b.wrapped.address,G?_==null?void 0:_.wrapped.symbol:_==null?void 0:_.symbol),[Rl,un]=L.useState(!1),[ts,Dl]=L.useState(""),[es,ns]=L.useState(""),Nl=fa(),qt=ap({pool:T,tokenIn:q==null?void 0:q.wrapped.address,tokenId:r==null?void 0:r.toString(),position:P,zapResult:de,amountIn:K,poolAddress:n,tickLower:Z,tickUpper:at,previousTicks:At,aggregatorRoute:bt}),{newPosDraft:Nt}=qt,Fl=async()=>{var ot,cn;if(wt===Nn.NOT_APPROVED){Ne();return}if(q&&(r||At.every(Boolean))&&de&&(K!=null&&K.quotient)&&T)try{un(!0);const{hash:we}=await he({tokenId:r?r.toString():0,tokenIn:q.wrapped.address,amountIn:K.quotient.toString(),equivalentQuoteAmount:(ct==null?void 0:ct.quotient.toString())||"0",poolAddress:n,tickLower:Z,tickUpper:at,tickPrevious:[At[0],At[1]],poolInfo:{token0:T.token0.wrapped.address,fee:T.fee,token1:T.token1.wrapped.address},liquidity:de.liquidity.toString(),aggregatorRoute:bt},{zapWithNative:q.isNative});Dl(we),Nl({hash:we,type:wn.ELASTIC_ZAP_IN_LIQUIDITY,extraInfo:{zapSymbolIn:(q==null?void 0:q.symbol)??"",tokenSymbolIn:Qr??"",tokenSymbolOut:Jr??"",zapAmountIn:K.toSignificant(6),tokenAmountIn:((ot=Nt==null?void 0:Nt.amount0)==null?void 0:ot.toSignificant(6))||"0",tokenAmountOut:((cn=Nt==null?void 0:Nt.amount1)==null?void 0:cn.toSignificant(6))||"0",tokenAddressIn:(A==null?void 0:A.wrapped.address)||"",tokenAddressOut:(_==null?void 0:_.wrapped.address)||""}}),un(!1),Zn.track("Zap - Confirmed",{token0:q==null?void 0:q.symbol,token1:Y==null?void 0:Y.symbol,zap_token:q==null?void 0:q.symbol,token_amount:K.toExact(),source:r?"my_pool_page":"pool_page"})}catch(we){un(!1),ns((we==null?void 0:we.message)||JSON.stringify(we))}},rs=`/${s.route}${r?Xt.ELASTIC_INCREASE_LIQ:Xt.ELASTIC_CREATE_POOL}/${A!=null&&A.isNative?A.symbol:(A==null?void 0:A.wrapped.address)||""}/${_!=null&&_.isNative?_.symbol:(_==null?void 0:_.wrapped.address)||""}/${T==null?void 0:T.fee}${r?`/${r}`:""}`;return u.jsx(Tu,{isOpen:t,children:Rl?u.jsx(wf,{onDismiss:()=>{un(!1)},pendingText:u.jsx(V,{id:"KTRtLW",values:{symbol0:Qr,symbol1:Jr,0:K==null?void 0:K.toSignificant(6),1:q==null?void 0:q.symbol,2:(as=Nt==null?void 0:Nt.amount0)==null?void 0:as.toSignificant(6),3:(ss=Nt==null?void 0:Nt.amount1)==null?void 0:ss.toSignificant(6)}})}):es?u.jsx(Mr,{onDismiss:()=>{ns(""),un(!1)},message:es}):ts?u.jsx(_f,{chainId:a,hash:ts,onDismiss:e}):u.jsx(up,{children:O?u.jsx(Iu,{}):u.jsxs(u.Fragment,{children:[u.jsxs(cp,{overlay:!!i&&i!==a,children:[u.jsxs(U,{justifyContent:"space-between",children:[u.jsxs(U,{children:[u.jsx(Lr,{currency0:A,currency1:_,size:20}),u.jsxs(D,{children:[Qr," - ",Jr]})]}),!!P&&u.jsxs(D,{fontSize:12,fontWeight:"500",color:j?l.warning:l.primary,children:["#",r==null?void 0:r.toString()]})]}),u.jsx(D,{marginTop:"12px",color:l.subText,fontSize:12,children:u.jsx(V,{id:"NcGk8j"})}),P?u.jsx(D,{fontWeight:"500",fontSize:14,marginTop:"20px",marginBottom:"12px",children:u.jsx(V,{id:"+zruvG"})}):u.jsx(D,{fontWeight:"500",fontSize:14,marginTop:"20px",marginBottom:"12px",children:u.jsx(V,{id:"MefuDB"})}),u.jsx(Tf,{id:"quick-zap",value:rt,onUserInput:ot=>{nt(ot)},onMax:()=>{var ot;nt(((ot=Sf(B[Dn]))==null?void 0:ot.toExact())||"")},onHalf:()=>{nt(B[Dn].divide("2").toExact())},currency:q,estimatedUsd:kf(qt.amountInUsd.toString(),!0)||void 0,positionMax:"top",showCommonBases:!0,isSwitchMode:!0,onSwitchCurrency:()=>{q!=null&&q.isNative?X(!0):(X(!1),W(ot=>!ot))}}),!P&&T&&u.jsxs(u.Fragment,{children:[u.jsxs(U,{justifyContent:"space-between",alignItems:"center",marginTop:"20px",marginBottom:"12px",children:[u.jsx(D,{fontWeight:"500",fontSize:14,children:u.jsx(V,{id:"I9+Vm4"})}),u.jsx(sr,{to:rs,children:u.jsxs(D,{fontSize:"12px",fontWeight:"500",children:[u.jsx(V,{id:"5wm2gW"})," ↗"]})})]}),u.jsx(rp,{pool:T,selectedRange:h,onChange:ot=>d(ot),farmV2:p})]}),u.jsx("div",{style:{margin:"20px -8px"},children:u.jsx(Md,{isWrapOrUnwrap:!1,isStablePairSwap:!1})}),u.jsx(sp,{zapLoading:De,zapDetail:qt}),!!((os=qt.priceImpact)!=null&&os.isVeryHigh||(us=qt.priceImpact)!=null&&us.isHigh||(cs=qt.priceImpact)!=null&&cs.isInvalid)&&de&&!De&&u.jsxs(u.Fragment,{children:[u.jsx(U,{marginTop:"1rem"}),qt.priceImpact.isVeryHigh?u.jsx(Cf,{level:"serious",shortText:u.jsx(D,{children:u.jsx(V,{id:"V09X5t",components:{0:u.jsx(Af,{as:"a",href:jf,target:"_blank",rel:"noreferrer noopener"}),1:u.jsx(sr,{to:`${rs}?showSetting=true`})}})})}):u.jsx(If,{priceImpact:qt.priceImpact.value})]})]}),u.jsxs(U,{sx:{gap:"1rem"},marginTop:"1.25rem",children:[u.jsx(Ee,{onClick:()=>{Zn.track("Zap - Canceled",{source:r?"my_pool_page":"pool_page",token0:T==null?void 0:T.token0.symbol,token1:T==null?void 0:T.token1.symbol,zap_token:q==null?void 0:q.symbol}),e()},children:u.jsx(V,{id:"dEgA5A"})}),o?i&&i!==a?u.jsx($e,{onClick:()=>f(i),children:"Switch Network"}):u.jsx($e,{backgroundColor:qt.priceImpact.isVeryHigh?l.red:qt.priceImpact.isHigh?l.warning:void 0,onClick:Fl,disabled:!!be||wt===Nn.PENDING||De||((ls=qt.priceImpact)==null?void 0:ls.isVeryHigh),children:Pl()}):u.jsx(Eu,{onClick:m,children:u.jsx(V,{id:"iSLIjg"})})]})]})})})}function Jn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hp(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sc(t){let e,n,r;t.length!==2?(e=Jn,n=(o,c)=>Jn(t(o),c),r=(o,c)=>t(o)-c):(e=t===Jn||t===hp?t:pp,n=t,r=t);function i(o,c,f=0,l=o.length){if(f<l){if(e(c,c)!==0)return l;do{const h=f+l>>>1;n(o[h],c)<0?f=h+1:l=h}while(f<l)}return f}function a(o,c,f=0,l=o.length){if(f<l){if(e(c,c)!==0)return l;do{const h=f+l>>>1;n(o[h],c)<=0?f=h+1:l=h}while(f<l)}return f}function s(o,c,f=0,l=o.length){const h=i(o,c,f,l-1);return h>f&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function pp(){return 0}function gp(t){return t===null?NaN:+t}function*tI(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const mp=sc(Jn),yp=mp.right;sc(gp).center;const xp=yp;var Pi=Math.sqrt(50),Ri=Math.sqrt(10),Di=Math.sqrt(2);function vp(t,e,n){var r,i=-1,a,s,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(a=t,t=e,e=a),(o=oc(t,e,n))===0||!isFinite(o))return[];if(o>0){let c=Math.round(t/o),f=Math.round(e/o);for(c*o<t&&++c,f*o>e&&--f,s=new Array(a=f-c+1);++i<a;)s[i]=(c+i)*o}else{o=-o;let c=Math.round(t*o),f=Math.round(e*o);for(c/o<t&&++c,f/o>e&&--f,s=new Array(a=f-c+1);++i<a;)s[i]=(c+i)/o}return r&&s.reverse(),s}function oc(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Pi?10:a>=Ri?5:a>=Di?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Pi?10:a>=Ri?5:a>=Di?2:1)}function bp(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Pi?i*=10:a>=Ri?i*=5:a>=Di&&(i*=2),e<t?-i:i}function wp(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function _p(t){return t}var oi=1,ui=2,Ni=3,zn=4,Ms=1e-6;function Tp(t){return"translate("+t+",0)"}function Sp(t){return"translate(0,"+t+")"}function kp(t){return e=>+t(e)}function Cp(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ap(){return!this.__axis}function jp(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,f=t===oi||t===zn?-1:1,l=t===zn||t===ui?"x":"y",h=t===oi||t===Ni?Tp:Sp;function d(y){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):_p),x=Math.max(a,0)+o,g=e.range(),v=+g[0]+c,w=+g[g.length-1]+c,S=(e.bandwidth?Cp:kp)(e.copy(),c),C=y.selection?y.selection():y,k=C.selectAll(".domain").data([null]),F=C.selectAll(".tick").data(p,e).order(),R=F.exit(),I=F.enter().append("g").attr("class","tick"),E=F.select("line"),$=F.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(I),E=E.merge(I.append("line").attr("stroke","currentColor").attr(l+"2",f*a)),$=$.merge(I.append("text").attr("fill","currentColor").attr(l,f*x).attr("dy",t===oi?"0em":t===Ni?"0.71em":"0.32em")),y!==C&&(k=k.transition(y),F=F.transition(y),E=E.transition(y),$=$.transition(y),R=R.transition(y).attr("opacity",Ms).attr("transform",function(z){return isFinite(z=S(z))?h(z+c):this.getAttribute("transform")}),I.attr("opacity",Ms).attr("transform",function(z){var N=this.parentNode.__axis;return h((N&&isFinite(N=N(z))?N:S(z))+c)})),R.remove(),k.attr("d",t===zn||t===ui?s?"M"+f*s+","+v+"H"+c+"V"+w+"H"+f*s:"M"+c+","+v+"V"+w:s?"M"+v+","+f*s+"V"+c+"H"+w+"V"+f*s:"M"+v+","+c+"H"+w),F.attr("opacity",1).attr("transform",function(z){return h(S(z)+c)}),E.attr(l+"2",f*a),$.attr(l,f*x).text(m),C.filter(Ap).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ui?"start":t===zn?"end":"middle"),C.each(function(){this.__axis=S})}return d.scale=function(y){return arguments.length?(e=y,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(y){return arguments.length?(n=y==null?[]:Array.from(y),d):n.slice()},d.tickValues=function(y){return arguments.length?(r=y==null?null:Array.from(y),d):r&&r.slice()},d.tickFormat=function(y){return arguments.length?(i=y,d):i},d.tickSize=function(y){return arguments.length?(a=s=+y,d):a},d.tickSizeInner=function(y){return arguments.length?(a=+y,d):a},d.tickSizeOuter=function(y){return arguments.length?(s=+y,d):s},d.tickPadding=function(y){return arguments.length?(o=+y,d):o},d.offset=function(y){return arguments.length?(c=+y,d):c},d}function Ip(t){return jp(Ni,t)}var Ep={value:()=>{}};function Dr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new tr(n)}function tr(t){this._=t}function $p(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}tr.prototype=Dr.prototype={constructor:tr,on:function(t,e){var n=this._,r=$p(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=Mp(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=Ls(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ls(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new tr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Mp(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ls(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ep,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Fi="http://www.w3.org/1999/xhtml";const Os={svg:"http://www.w3.org/2000/svg",xhtml:Fi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Os.hasOwnProperty(e)?{space:Os[e],local:t}:t}function Lp(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Fi&&e.documentElement.namespaceURI===Fi?e.createElement(t):e.createElementNS(n,t)}}function Op(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function uc(t){var e=Nr(t);return(e.local?Op:Lp)(e)}function Pp(){}function wa(t){return t==null?Pp:function(){return this.querySelector(t)}}function Rp(t){typeof t!="function"&&(t=wa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),c,f,l=0;l<s;++l)(c=a[l])&&(f=t.call(c,c.__data__,l,a))&&("__data__"in c&&(f.__data__=c.__data__),o[l]=f);return new Dt(r,this._parents)}function Dp(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Np(){return[]}function cc(t){return t==null?Np:function(){return this.querySelectorAll(t)}}function Fp(t){return function(){return Dp(t.apply(this,arguments))}}function zp(t){typeof t=="function"?t=Fp(t):t=cc(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,c,f=0;f<o;++f)(c=s[f])&&(r.push(t.call(c,c.__data__,f,s)),i.push(c));return new Dt(r,i)}function lc(t){return function(){return this.matches(t)}}function fc(t){return function(e){return e.matches(t)}}var Bp=Array.prototype.find;function qp(t){return function(){return Bp.call(this.children,t)}}function Up(){return this.firstElementChild}function Vp(t){return this.select(t==null?Up:qp(typeof t=="function"?t:fc(t)))}var Hp=Array.prototype.filter;function Wp(){return Array.from(this.children)}function Gp(t){return function(){return Hp.call(this.children,t)}}function Kp(t){return this.selectAll(t==null?Wp:Gp(typeof t=="function"?t:fc(t)))}function Yp(t){typeof t!="function"&&(t=lc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],c,f=0;f<s;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&o.push(c);return new Dt(r,this._parents)}function dc(t){return new Array(t.length)}function Xp(){return new Dt(this._enter||this._groups.map(dc),this._parents)}function lr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}lr.prototype={constructor:lr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Zp(t){return function(){return t}}function Qp(t,e,n,r,i,a){for(var s=0,o,c=e.length,f=a.length;s<f;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new lr(t,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function Jp(t,e,n,r,i,a,s){var o,c,f=new Map,l=e.length,h=a.length,d=new Array(l),y;for(o=0;o<l;++o)(c=e[o])&&(d[o]=y=s.call(c,c.__data__,o,e)+"",f.has(y)?i[o]=c:f.set(y,c));for(o=0;o<h;++o)y=s.call(t,a[o],o,a)+"",(c=f.get(y))?(r[o]=c,c.__data__=a[o],f.delete(y)):n[o]=new lr(t,a[o]);for(o=0;o<l;++o)(c=e[o])&&f.get(d[o])===c&&(i[o]=c)}function t0(t){return t.__data__}function e0(t,e){if(!arguments.length)return Array.from(this,t0);var n=e?Jp:Qp,r=this._parents,i=this._groups;typeof t!="function"&&(t=Zp(t));for(var a=i.length,s=new Array(a),o=new Array(a),c=new Array(a),f=0;f<a;++f){var l=r[f],h=i[f],d=h.length,y=n0(t.call(l,l&&l.__data__,f,r)),p=y.length,m=o[f]=new Array(p),x=s[f]=new Array(p),g=c[f]=new Array(d);n(l,h,m,x,g,y,e);for(var v=0,w=0,S,C;v<p;++v)if(S=m[v]){for(v>=w&&(w=v+1);!(C=x[w])&&++w<p;);S._next=C||null}}return s=new Dt(s,r),s._enter=o,s._exit=c,s}function n0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function r0(){return new Dt(this._exit||this._groups.map(dc),this._parents)}function i0(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function a0(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),c=0;c<s;++c)for(var f=n[c],l=r[c],h=f.length,d=o[c]=new Array(h),y,p=0;p<h;++p)(y=f[p]||l[p])&&(d[p]=y);for(;c<i;++c)o[c]=n[c];return new Dt(o,this._parents)}function s0(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function o0(t){t||(t=u0);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,c=i[a]=new Array(o),f,l=0;l<o;++l)(f=s[l])&&(c[l]=f);c.sort(e)}return new Dt(i,this._parents).order()}function u0(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function c0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function l0(){return Array.from(this)}function f0(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function d0(){let t=0;for(const e of this)++t;return t}function h0(){return!this.node()}function p0(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function g0(t){return function(){this.removeAttribute(t)}}function m0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function y0(t,e){return function(){this.setAttribute(t,e)}}function x0(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function v0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function b0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function w0(t,e){var n=Nr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?m0:g0:typeof e=="function"?n.local?b0:v0:n.local?x0:y0)(n,e))}function hc(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _0(t){return function(){this.style.removeProperty(t)}}function T0(t,e,n){return function(){this.style.setProperty(t,e,n)}}function S0(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function k0(t,e,n){return arguments.length>1?this.each((e==null?_0:typeof e=="function"?S0:T0)(t,e,n??"")):Xe(this.node(),t)}function Xe(t,e){return t.style.getPropertyValue(e)||hc(t).getComputedStyle(t,null).getPropertyValue(e)}function C0(t){return function(){delete this[t]}}function A0(t,e){return function(){this[t]=e}}function j0(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function I0(t,e){return arguments.length>1?this.each((e==null?C0:typeof e=="function"?j0:A0)(t,e)):this.node()[t]}function pc(t){return t.trim().split(/^|\s+/)}function _a(t){return t.classList||new gc(t)}function gc(t){this._node=t,this._names=pc(t.getAttribute("class")||"")}gc.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function mc(t,e){for(var n=_a(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function yc(t,e){for(var n=_a(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function E0(t){return function(){mc(this,t)}}function $0(t){return function(){yc(this,t)}}function M0(t,e){return function(){(e.apply(this,arguments)?mc:yc)(this,t)}}function L0(t,e){var n=pc(t+"");if(arguments.length<2){for(var r=_a(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?M0:e?E0:$0)(n,e))}function O0(){this.textContent=""}function P0(t){return function(){this.textContent=t}}function R0(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function D0(t){return arguments.length?this.each(t==null?O0:(typeof t=="function"?R0:P0)(t)):this.node().textContent}function N0(){this.innerHTML=""}function F0(t){return function(){this.innerHTML=t}}function z0(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function B0(t){return arguments.length?this.each(t==null?N0:(typeof t=="function"?z0:F0)(t)):this.node().innerHTML}function q0(){this.nextSibling&&this.parentNode.appendChild(this)}function U0(){return this.each(q0)}function V0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function H0(){return this.each(V0)}function W0(t){var e=typeof t=="function"?t:uc(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function G0(){return null}function K0(t,e){var n=typeof t=="function"?t:uc(t),r=e==null?G0:typeof e=="function"?e:wa(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Y0(){var t=this.parentNode;t&&t.removeChild(this)}function X0(){return this.each(Y0)}function Z0(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Q0(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function J0(t){return this.select(t?Q0:Z0)}function tg(t){return arguments.length?this.property("__data__",t):this.node().__data__}function eg(t){return function(e){t.call(this,e,this.__data__)}}function ng(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function rg(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function ig(t,e,n){return function(){var r=this.__on,i,a=eg(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function ag(t,e,n){var r=ng(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,f=o.length,l;c<f;++c)for(i=0,l=o[c];i<a;++i)if((s=r[i]).type===l.type&&s.name===l.name)return l.value}return}for(o=e?ig:rg,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function xc(t,e,n){var r=hc(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function sg(t,e){return function(){return xc(this,t,e)}}function og(t,e){return function(){return xc(this,t,e.apply(this,arguments))}}function ug(t,e){return this.each((typeof e=="function"?og:sg)(t,e))}function*cg(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var vc=[null];function Dt(t,e){this._groups=t,this._parents=e}function En(){return new Dt([[document.documentElement]],vc)}function lg(){return this}Dt.prototype=En.prototype={constructor:Dt,select:Rp,selectAll:zp,selectChild:Vp,selectChildren:Kp,filter:Yp,data:e0,enter:Xp,exit:r0,join:i0,merge:a0,selection:lg,order:s0,sort:o0,call:c0,nodes:l0,node:f0,size:d0,empty:h0,each:p0,attr:w0,style:k0,property:I0,classed:L0,text:D0,html:B0,raise:U0,lower:H0,append:W0,insert:K0,remove:X0,clone:J0,datum:tg,on:ag,dispatch:ug,[Symbol.iterator]:cg};function dt(t){return typeof t=="string"?new Dt([[document.querySelector(t)]],[document.documentElement]):new Dt([[t]],vc)}function fg(t){let e;for(;e=t.sourceEvent;)t=e;return t}function re(t,e){if(t=fg(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const zi={capture:!0,passive:!1};function Bi(t){t.preventDefault(),t.stopImmediatePropagation()}function bc(t){var e=t.document.documentElement,n=dt(t).on("dragstart.drag",Bi,zi);"onselectstart"in e?n.on("selectstart.drag",Bi,zi):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function wc(t,e){var n=t.document.documentElement,r=dt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Bi,zi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ta(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _c(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function $n(){}var Tn=.7,fr=1/Tn,He="\\s*([+-]?\\d+)\\s*",Sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dg=/^#([0-9a-f]{3,8})$/,hg=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),pg=new RegExp(`^rgb\\(${Zt},${Zt},${Zt}\\)$`),gg=new RegExp(`^rgba\\(${He},${He},${He},${Sn}\\)$`),mg=new RegExp(`^rgba\\(${Zt},${Zt},${Zt},${Sn}\\)$`),yg=new RegExp(`^hsl\\(${Sn},${Zt},${Zt}\\)$`),xg=new RegExp(`^hsla\\(${Sn},${Zt},${Zt},${Sn}\\)$`),Ps={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ta($n,Me,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Rs,formatHex:Rs,formatHex8:vg,formatHsl:bg,formatRgb:Ds,toString:Ds});function Rs(){return this.rgb().formatHex()}function vg(){return this.rgb().formatHex8()}function bg(){return Tc(this).formatHsl()}function Ds(){return this.rgb().formatRgb()}function Me(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=dg.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ns(e):n===3?new Lt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=hg.exec(t))?new Lt(e[1],e[2],e[3],1):(e=pg.exec(t))?new Lt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gg.exec(t))?Bn(e[1],e[2],e[3],e[4]):(e=mg.exec(t))?Bn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=yg.exec(t))?Bs(e[1],e[2]/100,e[3]/100,1):(e=xg.exec(t))?Bs(e[1],e[2]/100,e[3]/100,e[4]):Ps.hasOwnProperty(t)?Ns(Ps[t]):t==="transparent"?new Lt(NaN,NaN,NaN,0):null}function Ns(t){return new Lt(t>>16&255,t>>8&255,t&255,1)}function Bn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Lt(t,e,n,r)}function wg(t){return t instanceof $n||(t=Me(t)),t?(t=t.rgb(),new Lt(t.r,t.g,t.b,t.opacity)):new Lt}function qi(t,e,n,r){return arguments.length===1?wg(t):new Lt(t,e,n,r??1)}function Lt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ta(Lt,qi,_c($n,{brighter(t){return t=t==null?fr:Math.pow(fr,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tn:Math.pow(Tn,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Lt(Ie(this.r),Ie(this.g),Ie(this.b),dr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fs,formatHex:Fs,formatHex8:_g,formatRgb:zs,toString:zs}));function Fs(){return`#${ke(this.r)}${ke(this.g)}${ke(this.b)}`}function _g(){return`#${ke(this.r)}${ke(this.g)}${ke(this.b)}${ke((isNaN(this.opacity)?1:this.opacity)*255)}`}function zs(){const t=dr(this.opacity);return`${t===1?"rgb(":"rgba("}${Ie(this.r)}, ${Ie(this.g)}, ${Ie(this.b)}${t===1?")":`, ${t})`}`}function dr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ie(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ke(t){return t=Ie(t),(t<16?"0":"")+t.toString(16)}function Bs(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vt(t,e,n,r)}function Tc(t){if(t instanceof Vt)return new Vt(t.h,t.s,t.l,t.opacity);if(t instanceof $n||(t=Me(t)),!t)return new Vt;if(t instanceof Vt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Vt(s,o,c,t.opacity)}function Tg(t,e,n,r){return arguments.length===1?Tc(t):new Vt(t,e,n,r??1)}function Vt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ta(Vt,Tg,_c($n,{brighter(t){return t=t==null?fr:Math.pow(fr,t),new Vt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tn:Math.pow(Tn,t),new Vt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Lt(ci(t>=240?t-240:t+120,i,r),ci(t,i,r),ci(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Vt(qs(this.h),qn(this.s),qn(this.l),dr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=dr(this.opacity);return`${t===1?"hsl(":"hsla("}${qs(this.h)}, ${qn(this.s)*100}%, ${qn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function qs(t){return t=(t||0)%360,t<0?t+360:t}function qn(t){return Math.max(0,Math.min(1,t||0))}function ci(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Sa=t=>()=>t;function Sg(t,e){return function(n){return t+n*e}}function kg(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Cg(t){return(t=+t)==1?Sc:function(e,n){return n-e?kg(e,n,t):Sa(isNaN(e)?n:e)}}function Sc(t,e){var n=e-t;return n?Sg(t,n):Sa(isNaN(t)?e:t)}const hr=function t(e){var n=Cg(e);function r(i,a){var s=n((i=qi(i)).r,(a=qi(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),f=Sc(i.opacity,a.opacity);return function(l){return i.r=s(l),i.g=o(l),i.b=c(l),i.opacity=f(l),i+""}}return r.gamma=t,r}(1);function Ag(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function jg(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ig(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Fr(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Eg(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ut(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function $g(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Fr(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ui=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,li=new RegExp(Ui.source,"g");function Mg(t){return function(){return t}}function Lg(t){return function(e){return t(e)+""}}function kc(t,e){var n=Ui.lastIndex=li.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=Ui.exec(t))&&(i=li.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Ut(r,i)})),n=li.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?Lg(c[0].x):Mg(e):(e=c.length,function(f){for(var l=0,h;l<e;++l)o[(h=c[l]).i]=h.x(f);return o.join("")})}function Fr(t,e){var n=typeof e,r;return e==null||n==="boolean"?Sa(e):(n==="number"?Ut:n==="string"?(r=Me(e))?(e=r,hr):kc:e instanceof Me?hr:e instanceof Date?Eg:jg(e)?Ag:Array.isArray(e)?Ig:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?$g:Ut)(t,e)}function Og(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Us=180/Math.PI,Vi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cc(t,e,n,r,i,a){var s,o,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,c/=o),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Us,skewX:Math.atan(c)*Us,scaleX:s,scaleY:o}}var Un;function Pg(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Vi:Cc(e.a,e.b,e.c,e.d,e.e,e.f)}function Rg(t){return t==null||(Un||(Un=document.createElementNS("http://www.w3.org/2000/svg","g")),Un.setAttribute("transform",t),!(t=Un.transform.baseVal.consolidate()))?Vi:(t=t.matrix,Cc(t.a,t.b,t.c,t.d,t.e,t.f))}function Ac(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function a(f,l,h,d,y,p){if(f!==h||l!==d){var m=y.push("translate(",null,e,null,n);p.push({i:m-4,x:Ut(f,h)},{i:m-2,x:Ut(l,d)})}else(h||d)&&y.push("translate("+h+e+d+n)}function s(f,l,h,d){f!==l?(f-l>180?l+=360:l-f>180&&(f+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ut(f,l)})):l&&h.push(i(h)+"rotate("+l+r)}function o(f,l,h,d){f!==l?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ut(f,l)}):l&&h.push(i(h)+"skewX("+l+r)}function c(f,l,h,d,y,p){if(f!==h||l!==d){var m=y.push(i(y)+"scale(",null,",",null,")");p.push({i:m-4,x:Ut(f,h)},{i:m-2,x:Ut(l,d)})}else(h!==1||d!==1)&&y.push(i(y)+"scale("+h+","+d+")")}return function(f,l){var h=[],d=[];return f=t(f),l=t(l),a(f.translateX,f.translateY,l.translateX,l.translateY,h,d),s(f.rotate,l.rotate,h,d),o(f.skewX,l.skewX,h,d),c(f.scaleX,f.scaleY,l.scaleX,l.scaleY,h,d),f=l=null,function(y){for(var p=-1,m=d.length,x;++p<m;)h[(x=d[p]).i]=x.x(y);return h.join("")}}}var Dg=Ac(Pg,"px, ","px)","deg)"),Ng=Ac(Rg,", ",")",")"),Fg=1e-12;function Vs(t){return((t=Math.exp(t))+1/t)/2}function zg(t){return((t=Math.exp(t))-1/t)/2}function Bg(t){return((t=Math.exp(2*t))-1)/(t+1)}const qg=function t(e,n,r){function i(a,s){var o=a[0],c=a[1],f=a[2],l=s[0],h=s[1],d=s[2],y=l-o,p=h-c,m=y*y+p*p,x,g;if(m<Fg)g=Math.log(d/f)/e,x=function(F){return[o+F*y,c+F*p,f*Math.exp(e*F*g)]};else{var v=Math.sqrt(m),w=(d*d-f*f+r*m)/(2*f*n*v),S=(d*d-f*f-r*m)/(2*d*n*v),C=Math.log(Math.sqrt(w*w+1)-w),k=Math.log(Math.sqrt(S*S+1)-S);g=(k-C)/e,x=function(F){var R=F*g,I=Vs(C),E=f/(n*v)*(I*Bg(e*R+C)-zg(C));return[o+E*y,c+E*p,f*I/Vs(e*R+C)]}}return x.duration=g*1e3*e/Math.SQRT2,x}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,c=o*o;return t(s,o,c)},i}(Math.SQRT2,2,4);var Ze=0,mn=0,pn=0,jc=1e3,pr,yn,gr=0,Le=0,zr=0,kn=typeof performance=="object"&&performance.now?performance:Date,Ic=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ka(){return Le||(Ic(Ug),Le=kn.now()+zr)}function Ug(){Le=0}function mr(){this._call=this._time=this._next=null}mr.prototype=Ec.prototype={constructor:mr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ka():+n)+(e==null?0:+e),!this._next&&yn!==this&&(yn?yn._next=this:pr=this,yn=this),this._call=t,this._time=n,Hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hi())}};function Ec(t,e,n){var r=new mr;return r.restart(t,e,n),r}function Vg(){ka(),++Ze;for(var t=pr,e;t;)(e=Le-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ze}function Hs(){Le=(gr=kn.now())+zr,Ze=mn=0;try{Vg()}finally{Ze=0,Wg(),Le=0}}function Hg(){var t=kn.now(),e=t-gr;e>jc&&(zr-=e,gr=t)}function Wg(){for(var t,e=pr,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:pr=n);yn=t,Hi(r)}function Hi(t){if(!Ze){mn&&(mn=clearTimeout(mn));var e=t-Le;e>24?(t<1/0&&(mn=setTimeout(Hs,t-kn.now()-zr)),pn&&(pn=clearInterval(pn))):(pn||(gr=kn.now(),pn=setInterval(Hg,jc)),Ze=1,Ic(Hs))}}function Ws(t,e,n){var r=new mr;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Gg=Dr("start","end","cancel","interrupt"),Kg=[],$c=0,Gs=1,Wi=2,er=3,Ks=4,Gi=5,nr=6;function Br(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Yg(t,n,{name:e,index:r,group:i,on:Gg,tween:Kg,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:$c})}function Ca(t,e){var n=Wt(t,e);if(n.state>$c)throw new Error("too late; already scheduled");return n}function Qt(t,e){var n=Wt(t,e);if(n.state>er)throw new Error("too late; already running");return n}function Wt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Yg(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ec(a,0,n.time);function a(f){n.state=Gs,n.timer.restart(s,n.delay,n.time),n.delay<=f&&s(f-n.delay)}function s(f){var l,h,d,y;if(n.state!==Gs)return c();for(l in r)if(y=r[l],y.name===n.name){if(y.state===er)return Ws(s);y.state===Ks?(y.state=nr,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete r[l]):+l<e&&(y.state=nr,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete r[l])}if(Ws(function(){n.state===er&&(n.state=Ks,n.timer.restart(o,n.delay,n.time),o(f))}),n.state=Wi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Wi){for(n.state=er,i=new Array(d=n.tween.length),l=0,h=-1;l<d;++l)(y=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=y);i.length=h+1}}function o(f){for(var l=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(c),n.state=Gi,1),h=-1,d=i.length;++h<d;)i[h].call(t,l);n.state===Gi&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=nr,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function We(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>Wi&&r.state<Gi,r.state=nr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function Xg(t){return this.each(function(){We(this,t)})}function Zg(t,e){var n,r;return function(){var i=Qt(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Qg(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Qt(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},c=0,f=i.length;c<f;++c)if(i[c].name===e){i[c]=o;break}c===f&&i.push(o)}a.tween=i}}function Jg(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Wt(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Zg:Qg)(n,t,e))}function Aa(t,e,n){var r=t._id;return t.each(function(){var i=Qt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Wt(i,r).value[e]}}function Mc(t,e){var n;return(typeof e=="number"?Ut:e instanceof Me?hr:(n=Me(e))?(e=n,hr):kc)(t,e)}function tm(t){return function(){this.removeAttribute(t)}}function em(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nm(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function rm(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function im(t,e,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o)))}}function am(t,e,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o)))}}function sm(t,e){var n=Nr(t),r=n==="transform"?Ng:Mc;return this.attrTween(t,typeof e=="function"?(n.local?am:im)(n,r,Aa(this,"attr."+t,e)):e==null?(n.local?em:tm)(n):(n.local?rm:nm)(n,r,e))}function om(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function um(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cm(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&um(t,a)),n}return i._value=e,i}function lm(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&om(t,a)),n}return i._value=e,i}function fm(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Nr(t);return this.tween(n,(r.local?cm:lm)(r,e))}function dm(t,e){return function(){Ca(this,t).delay=+e.apply(this,arguments)}}function hm(t,e){return e=+e,function(){Ca(this,t).delay=e}}function pm(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dm:hm)(e,t)):Wt(this.node(),e).delay}function gm(t,e){return function(){Qt(this,t).duration=+e.apply(this,arguments)}}function mm(t,e){return e=+e,function(){Qt(this,t).duration=e}}function ym(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gm:mm)(e,t)):Wt(this.node(),e).duration}function xm(t,e){if(typeof e!="function")throw new Error;return function(){Qt(this,t).ease=e}}function vm(t){var e=this._id;return arguments.length?this.each(xm(e,t)):Wt(this.node(),e).ease}function bm(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qt(this,t).ease=n}}function wm(t){if(typeof t!="function")throw new Error;return this.each(bm(this._id,t))}function _m(t){typeof t!="function"&&(t=lc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],c,f=0;f<s;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&o.push(c);return new le(r,this._parents,this._name,this._id)}function Tm(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var c=e[o],f=n[o],l=c.length,h=s[o]=new Array(l),d,y=0;y<l;++y)(d=c[y]||f[y])&&(h[y]=d);for(;o<r;++o)s[o]=e[o];return new le(s,this._parents,this._name,this._id)}function Sm(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function km(t,e,n){var r,i,a=Sm(e)?Ca:Qt;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function Cm(t,e){var n=this._id;return arguments.length<2?Wt(this.node(),n).on.on(t):this.each(km(n,t,e))}function Am(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function jm(){return this.on("end.remove",Am(this._id))}function Im(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wa(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],c=o.length,f=a[s]=new Array(c),l,h,d=0;d<c;++d)(l=o[d])&&(h=t.call(l,l.__data__,d,o))&&("__data__"in l&&(h.__data__=l.__data__),f[d]=h,Br(f[d],e,n,d,f,Wt(l,n)));return new le(a,this._parents,e,n)}function Em(t){var e=this._name,n=this._id;typeof t!="function"&&(t=cc(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var c=r[o],f=c.length,l,h=0;h<f;++h)if(l=c[h]){for(var d=t.call(l,l.__data__,h,c),y,p=Wt(l,n),m=0,x=d.length;m<x;++m)(y=d[m])&&Br(y,e,n,m,d,p);a.push(d),s.push(l)}return new le(a,s,e,n)}var $m=En.prototype.constructor;function Mm(){return new $m(this._groups,this._parents)}function Lm(t,e){var n,r,i;return function(){var a=Xe(this,t),s=(this.style.removeProperty(t),Xe(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Lc(t){return function(){this.style.removeProperty(t)}}function Om(t,e,n){var r,i=n+"",a;return function(){var s=Xe(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function Pm(t,e,n){var r,i,a;return function(){var s=Xe(this,t),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(t),Xe(this,t))),s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,o))}}function Rm(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var c=Qt(this,t),f=c.on,l=c.value[a]==null?o||(o=Lc(e)):void 0;(f!==n||i!==l)&&(r=(n=f).copy()).on(s,i=l),c.on=r}}function Dm(t,e,n){var r=(t+="")=="transform"?Dg:Mc;return e==null?this.styleTween(t,Lm(t,r)).on("end.style."+t,Lc(t)):typeof e=="function"?this.styleTween(t,Pm(t,r,Aa(this,"style."+t,e))).each(Rm(this._id,t)):this.styleTween(t,Om(t,r,e),n).on("end.style."+t,null)}function Nm(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Fm(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Nm(t,s,n)),r}return a._value=e,a}function zm(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Fm(t,e,n??""))}function Bm(t){return function(){this.textContent=t}}function qm(t){return function(){var e=t(this);this.textContent=e??""}}function Um(t){return this.tween("text",typeof t=="function"?qm(Aa(this,"text",t)):Bm(t==null?"":t+""))}function Vm(t){return function(e){this.textContent=t.call(this,e)}}function Hm(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Vm(i)),e}return r._value=t,r}function Wm(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Hm(t))}function Gm(){for(var t=this._name,e=this._id,n=Oc(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,f=0;f<o;++f)if(c=s[f]){var l=Wt(c,e);Br(c,t,n,f,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new le(r,this._parents,t,n)}function Km(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},c={value:function(){--i===0&&a()}};n.each(function(){var f=Qt(this,r),l=f.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),f.on=e}),i===0&&a()})}var Ym=0;function le(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Oc(){return++Ym}var Jt=En.prototype;le.prototype={constructor:le,select:Im,selectAll:Em,selectChild:Jt.selectChild,selectChildren:Jt.selectChildren,filter:_m,merge:Tm,selection:Mm,transition:Gm,call:Jt.call,nodes:Jt.nodes,node:Jt.node,size:Jt.size,empty:Jt.empty,each:Jt.each,on:Cm,attr:sm,attrTween:fm,style:Dm,styleTween:zm,text:Um,textTween:Wm,remove:jm,tween:Jg,delay:pm,duration:ym,ease:vm,easeVarying:wm,end:Km,[Symbol.iterator]:Jt[Symbol.iterator]};function Xm(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Zm={time:null,delay:0,duration:250,ease:Xm};function Qm(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Jm(t){var e,n;t instanceof le?(e=t._id,t=t._name):(e=Oc(),(n=Zm).time=ka(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,f=0;f<o;++f)(c=s[f])&&Br(c,t,e,f,s,n||Qm(c,e));return new le(r,this._parents,t,e)}En.prototype.interrupt=Xg;En.prototype.transition=Jm;const fi=t=>()=>t;function ty(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function ey(t){t.stopImmediatePropagation()}function di(t){t.preventDefault(),t.stopImmediatePropagation()}var Ys={name:"drag"},hi={name:"space"},ze={name:"handle"},Be={name:"center"};const{abs:Xs,max:_t,min:Tt}=Math;function Zs(t){return[+t[0],+t[1]]}function Qs(t){return[Zs(t[0]),Zs(t[1])]}var rr={name:"x",handles:["w","e"].map(yr),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},pi={name:"y",handles:["n","s"].map(yr),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},te={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Js={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},to={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ny={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ry={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function yr(t){return{type:t}}function iy(t){return!t.ctrlKey&&!t.button}function ay(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function sy(){return navigator.maxTouchPoints||"ontouchstart"in this}function gi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function oy(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function uy(){return cy(rr)}function cy(t){var e=ay,n=iy,r=sy,i=!0,a=Dr("start","brush","end"),s=6,o;function c(x){var g=x.property("__brush",m).selectAll(".overlay").data([yr("overlay")]);g.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",te.overlay).merge(g).each(function(){var w=gi(this).extent;dt(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),x.selectAll(".selection").data([yr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",te.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=x.selectAll(".handle").data(t.handles,function(w){return w.type});v.exit().remove(),v.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return te[w.type]}),x.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",y).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(x,g,v){x.tween?x.on("start.brush",function(w){l(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){l(this,arguments).end(w)}).tween("brush",function(){var w=this,S=w.__brush,C=l(w,arguments),k=S.selection,F=t.input(typeof g=="function"?g.apply(this,arguments):g,S.extent),R=Fr(k,F);function I(E){S.selection=E===1&&F===null?null:R(E),f.call(w),C.brush()}return k!==null&&F!==null?I:I(1)}):x.each(function(){var w=this,S=arguments,C=w.__brush,k=t.input(typeof g=="function"?g.apply(w,S):g,C.extent),F=l(w,S).beforestart();We(w),C.selection=k===null?null:k,f.call(w),F.start(v).brush(v).end(v)})},c.clear=function(x,g){c.move(x,null,g)};function f(){var x=dt(this),g=gi(this).selection;g?(x.selectAll(".selection").style("display",null).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1]),x.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?g[1][0]-s/2:g[0][0]-s/2}).attr("y",function(v){return v.type[0]==="s"?g[1][1]-s/2:g[0][1]-s/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?g[1][0]-g[0][0]+s:s}).attr("height",function(v){return v.type==="e"||v.type==="w"?g[1][1]-g[0][1]+s:s})):x.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(x,g,v){var w=x.__brush.emitter;return w&&(!v||!w.clean)?w:new h(x,g,v)}function h(x,g,v){this.that=x,this.args=g,this.state=x.__brush,this.active=0,this.clean=v}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(x,g){return this.starting?(this.starting=!1,this.emit("start",x,g)):this.emit("brush",x),this},brush:function(x,g){return this.emit("brush",x,g),this},end:function(x,g){return--this.active===0&&(delete this.state.emitter,this.emit("end",x,g)),this},emit:function(x,g,v){var w=dt(this.that).datum();a.call(x,this.that,new ty(x,{sourceEvent:g,target:c,selection:t.output(this.state.selection),mode:v,dispatch:a}),w)}};function d(x){if(o&&!x.touches||!n.apply(this,arguments))return;var g=this,v=x.target.__data__.type,w=(i&&x.metaKey?v="overlay":v)==="selection"?Ys:i&&x.altKey?Be:ze,S=t===pi?null:ny[v],C=t===rr?null:ry[v],k=gi(g),F=k.extent,R=k.selection,I=F[0][0],E,$,z=F[0][1],N,b,A=F[1][0],_,T,P=F[1][1],O,j,M=0,B=0,H,W=S&&C&&i&&x.shiftKey,G,X,q=Array.from(x.touches||[x],Z=>{const at=Z.identifier;return Z=re(Z,g),Z.point0=Z.slice(),Z.identifier=at,Z});We(g);var Y=l(g,arguments,!0).beforestart();if(v==="overlay"){R&&(H=!0);const Z=[q[0],q[1]||q[0]];k.selection=R=[[E=t===pi?I:Tt(Z[0][0],Z[1][0]),N=t===rr?z:Tt(Z[0][1],Z[1][1])],[_=t===pi?A:_t(Z[0][0],Z[1][0]),O=t===rr?P:_t(Z[0][1],Z[1][1])]],q.length>1&&ct(x)}else E=R[0][0],N=R[0][1],_=R[1][0],O=R[1][1];$=E,b=N,T=_,j=O;var rt=dt(g).attr("pointer-events","none"),nt=rt.selectAll(".overlay").attr("cursor",te[v]);if(x.touches)Y.moved=K,Y.ended=Ct;else{var tt=dt(x.view).on("mousemove.brush",K,!0).on("mouseup.brush",Ct,!0);i&&tt.on("keydown.brush",Ot,!0).on("keyup.brush",It,!0),bc(x.view)}f.call(g),Y.start(x,w.name);function K(Z){for(const at of Z.changedTouches||[Z])for(const Bt of q)Bt.identifier===at.identifier&&(Bt.cur=re(at,g));if(W&&!G&&!X&&q.length===1){const at=q[0];Xs(at.cur[0]-at[0])>Xs(at.cur[1]-at[1])?X=!0:G=!0}for(const at of q)at.cur&&(at[0]=at.cur[0],at[1]=at.cur[1]);H=!0,di(Z),ct(Z)}function ct(Z){const at=q[0],Bt=at.point0;var At;switch(M=at[0]-Bt[0],B=at[1]-Bt[1],w){case hi:case Ys:{S&&(M=_t(I-E,Tt(A-_,M)),$=E+M,T=_+M),C&&(B=_t(z-N,Tt(P-O,B)),b=N+B,j=O+B);break}case ze:{q[1]?(S&&($=_t(I,Tt(A,q[0][0])),T=_t(I,Tt(A,q[1][0])),S=1),C&&(b=_t(z,Tt(P,q[0][1])),j=_t(z,Tt(P,q[1][1])),C=1)):(S<0?(M=_t(I-E,Tt(A-E,M)),$=E+M,T=_):S>0&&(M=_t(I-_,Tt(A-_,M)),$=E,T=_+M),C<0?(B=_t(z-N,Tt(P-N,B)),b=N+B,j=O):C>0&&(B=_t(z-O,Tt(P-O,B)),b=N,j=O+B));break}case Be:{S&&($=_t(I,Tt(A,E-M*S)),T=_t(I,Tt(A,_+M*S))),C&&(b=_t(z,Tt(P,N-B*C)),j=_t(z,Tt(P,O+B*C)));break}}T<$&&(S*=-1,At=E,E=_,_=At,At=$,$=T,T=At,v in Js&&nt.attr("cursor",te[v=Js[v]])),j<b&&(C*=-1,At=N,N=O,O=At,At=b,b=j,j=At,v in to&&nt.attr("cursor",te[v=to[v]])),k.selection&&(R=k.selection),G&&($=R[0][0],T=R[1][0]),X&&(b=R[0][1],j=R[1][1]),(R[0][0]!==$||R[0][1]!==b||R[1][0]!==T||R[1][1]!==j)&&(k.selection=[[$,b],[T,j]],f.call(g),Y.brush(Z,w.name))}function Ct(Z){if(ey(Z),Z.touches){if(Z.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else wc(Z.view,H),tt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);rt.attr("pointer-events","all"),nt.attr("cursor",te.overlay),k.selection&&(R=k.selection),oy(R)&&(k.selection=null,f.call(g)),Y.end(Z,w.name)}function Ot(Z){switch(Z.keyCode){case 16:{W=S&&C;break}case 18:{w===ze&&(S&&(_=T-M*S,E=$+M*S),C&&(O=j-B*C,N=b+B*C),w=Be,ct(Z));break}case 32:{(w===ze||w===Be)&&(S<0?_=T-M:S>0&&(E=$-M),C<0?O=j-B:C>0&&(N=b-B),w=hi,nt.attr("cursor",te.selection),ct(Z));break}default:return}di(Z)}function It(Z){switch(Z.keyCode){case 16:{W&&(G=X=W=!1,ct(Z));break}case 18:{w===Be&&(S<0?_=T:S>0&&(E=$),C<0?O=j:C>0&&(N=b),w=ze,ct(Z));break}case 32:{w===hi&&(Z.altKey?(S&&(_=T-M*S,E=$+M*S),C&&(O=j-B*C,N=b+B*C),w=Be):(S<0?_=T:S>0&&(E=$),C<0?O=j:C>0&&(N=b),w=ze),nt.attr("cursor",te[v]),ct(Z));break}default:return}di(Z)}}function y(x){l(this,arguments).moved(x)}function p(x){l(this,arguments).ended(x)}function m(){var x=this.__brush||{selection:null};return x.extent=Qs(e.apply(this,arguments)),x.dim=t,x}return c.extent=function(x){return arguments.length?(e=typeof x=="function"?x:fi(Qs(x)),c):e},c.filter=function(x){return arguments.length?(n=typeof x=="function"?x:fi(!!x),c):n},c.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:fi(!!x),c):r},c.handleSize=function(x){return arguments.length?(s=+x,c):s},c.keyModifiers=function(x){return arguments.length?(i=!!x,c):i},c.on=function(){var x=a.on.apply(a,arguments);return x===a?c:x},c}const Ki=Math.PI,Yi=2*Ki,_e=1e-6,ly=Yi-_e;function Xi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ja(){return new Xi}Xi.prototype=ja.prototype={constructor:Xi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,s=this._y1,o=n-t,c=r-e,f=a-t,l=s-e,h=f*f+l*l;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>_e)if(!(Math.abs(l*o-c*f)>_e)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var d=n-a,y=r-s,p=o*o+c*c,m=d*d+y*y,x=Math.sqrt(p),g=Math.sqrt(h),v=i*Math.tan((Ki-Math.acos((p+h-m)/(2*x*g)))/2),w=v/g,S=v/x;Math.abs(w-1)>_e&&(this._+="L"+(t+w*f)+","+(e+w*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>f*y)+","+(this._x1=t+S*o)+","+(this._y1=e+S*c)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var s=n*Math.cos(r),o=n*Math.sin(r),c=t+s,f=e+o,l=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+f:(Math.abs(this._x1-c)>_e||Math.abs(this._y1-f)>_e)&&(this._+="L"+c+","+f),n&&(h<0&&(h=h%Yi+Yi),h>ly?this._+="A"+n+","+n+",0,1,"+l+","+(t-s)+","+(e-o)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=f):h>_e&&(this._+="A"+n+","+n+",0,"+ +(h>=Ki)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function fy(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Qe(t){return t=xr(Math.abs(t)),t?t[1]:NaN}function dy(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function hy(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var py=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vr(t){if(!(e=py.exec(t)))throw new Error("invalid format: "+t);var e;return new Ia({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vr.prototype=Ia.prototype;function Ia(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ia.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gy(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Pc;function my(t,e){var n=xr(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Pc=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+xr(t,Math.max(0,e+a-1))[0]}function eo(t,e){var n=xr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const no={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:fy,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>eo(t*100,e),r:eo,s:my,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ro(t){return t}var io=Array.prototype.map,ao=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function yy(t){var e=t.grouping===void 0||t.thousands===void 0?ro:dy(io.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ro:hy(io.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(h){h=vr(h);var d=h.fill,y=h.align,p=h.sign,m=h.symbol,x=h.zero,g=h.width,v=h.comma,w=h.precision,S=h.trim,C=h.type;C==="n"?(v=!0,C="g"):no[C]||(w===void 0&&(w=12),S=!0,C="g"),(x||d==="0"&&y==="=")&&(x=!0,d="0",y="=");var k=m==="$"?n:m==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",F=m==="$"?r:/[%p]/.test(C)?s:"",R=no[C],I=/[defgprs%]/.test(C);w=w===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E($){var z=k,N=F,b,A,_;if(C==="c")N=R($)+N,$="";else{$=+$;var T=$<0||1/$<0;if($=isNaN($)?c:R(Math.abs($),w),S&&($=gy($)),T&&+$==0&&p!=="+"&&(T=!1),z=(T?p==="("?p:o:p==="-"||p==="("?"":p)+z,N=(C==="s"?ao[8+Pc/3]:"")+N+(T&&p==="("?")":""),I){for(b=-1,A=$.length;++b<A;)if(_=$.charCodeAt(b),48>_||_>57){N=(_===46?i+$.slice(b+1):$.slice(b))+N,$=$.slice(0,b);break}}}v&&!x&&($=e($,1/0));var P=z.length+$.length+N.length,O=P<g?new Array(g-P+1).join(d):"";switch(v&&x&&($=e(O+$,O.length?g-N.length:1/0),O=""),y){case"<":$=z+$+N+O;break;case"=":$=z+O+$+N;break;case"^":$=O.slice(0,P=O.length>>1)+z+$+N+O.slice(P);break;default:$=O+z+$+N;break}return a($)}return E.toString=function(){return h+""},E}function l(h,d){var y=f((h=vr(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Qe(d)/3)))*3,m=Math.pow(10,-p),x=ao[8+p/3];return function(g){return y(m*g)+x}}return{format:f,formatPrefix:l}}var Vn,Ea,Rc;xy({thousands:",",grouping:[3],currency:["$",""]});function xy(t){return Vn=yy(t),Ea=Vn.format,Rc=Vn.formatPrefix,Vn}function vy(t){return Math.max(0,-Qe(Math.abs(t)))}function by(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qe(e)/3)))*3-Qe(Math.abs(t)))}function wy(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qe(e)-Qe(t))+1}function _y(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function eI(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}function Ty(t){return function(){return t}}function Sy(t){return+t}var so=[0,1];function Ue(t){return t}function Zi(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ty(isNaN(e)?NaN:.5)}function ky(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Cy(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Zi(i,r),a=n(s,a)):(r=Zi(r,i),a=n(a,s)),function(o){return a(r(o))}}function Ay(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Zi(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=xp(t,o,1,r)-1;return a[c](i[c](o))}}function jy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Iy(){var t=so,e=so,n=Fr,r,i,a,s=Ue,o,c,f;function l(){var d=Math.min(t.length,e.length);return s!==Ue&&(s=ky(t[0],t[d-1])),o=d>2?Ay:Cy,c=f=null,h}function h(d){return d==null||isNaN(d=+d)?a:(c||(c=o(t.map(r),e,n)))(r(s(d)))}return h.invert=function(d){return s(i((f||(f=o(e,t.map(r),Ut)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,Sy),l()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),l()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=Og,l()},h.clamp=function(d){return arguments.length?(s=d?!0:Ue,l()):s!==Ue},h.interpolate=function(d){return arguments.length?(n=d,l()):n},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,y){return r=d,i=y,l()}}function Ey(){return Iy()(Ue,Ue)}function $y(t,e,n,r){var i=bp(t,e,n),a;switch(r=vr(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=by(i,s))&&(r.precision=a),Rc(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=wy(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=vy(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ea(r)}function My(t){var e=t.domain;return t.ticks=function(n){var r=e();return vp(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return $y(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,f,l=10;for(o<s&&(f=s,s=o,o=f,f=i,i=a,a=f);l-- >0;){if(f=oc(s,o,n),f===c)return r[i]=s,r[a]=o,e(r);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;c=f}return t},t}function Qi(){var t=Ey();return t.copy=function(){return jy(t,Qi())},_y.apply(t,arguments),My(t)}function vt(t){return function(){return t}}function Dc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Nc(t){this._context=t}Nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Fc(t){return new Nc(t)}function zc(t){return t[0]}function Bc(t){return t[1]}function Ly(t,e){var n=vt(!0),r=null,i=Fc,a=null;t=typeof t=="function"?t:t===void 0?zc:vt(t),e=typeof e=="function"?e:e===void 0?Bc:vt(e);function s(o){var c,f=(o=Dc(o)).length,l,h=!1,d;for(r==null&&(a=i(d=ja())),c=0;c<=f;++c)!(c<f&&n(l=o[c],c,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(l,c,o),+e(l,c,o));if(d)return a=null,d+""||null}return s.x=function(o){return arguments.length?(t=typeof o=="function"?o:vt(+o),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:vt(+o),s):e},s.defined=function(o){return arguments.length?(n=typeof o=="function"?o:vt(!!o),s):n},s.curve=function(o){return arguments.length?(i=o,r!=null&&(a=i(r)),s):i},s.context=function(o){return arguments.length?(o==null?r=a=null:a=i(r=o),s):r},s}function Oy(t,e,n){var r=null,i=vt(!0),a=null,s=Fc,o=null;t=typeof t=="function"?t:t===void 0?zc:vt(+t),e=typeof e=="function"?e:vt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Bc:vt(+n);function c(l){var h,d,y,p=(l=Dc(l)).length,m,x=!1,g,v=new Array(p),w=new Array(p);for(a==null&&(o=s(g=ja())),h=0;h<=p;++h){if(!(h<p&&i(m=l[h],h,l))===x)if(x=!x)d=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=h-1;y>=d;--y)o.point(v[y],w[y]);o.lineEnd(),o.areaEnd()}x&&(v[h]=+t(m,h,l),w[h]=+e(m,h,l),o.point(r?+r(m,h,l):v[h],n?+n(m,h,l):w[h]))}if(g)return o=null,g+""||null}function f(){return Ly().defined(i).curve(s).context(a)}return c.x=function(l){return arguments.length?(t=typeof l=="function"?l:vt(+l),r=null,c):t},c.x0=function(l){return arguments.length?(t=typeof l=="function"?l:vt(+l),c):t},c.x1=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:vt(+l),c):r},c.y=function(l){return arguments.length?(e=typeof l=="function"?l:vt(+l),n=null,c):e},c.y0=function(l){return arguments.length?(e=typeof l=="function"?l:vt(+l),c):e},c.y1=function(l){return arguments.length?(n=l==null?null:typeof l=="function"?l:vt(+l),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(l){return arguments.length?(i=typeof l=="function"?l:vt(!!l),c):i},c.curve=function(l){return arguments.length?(s=l,a!=null&&(o=s(a)),c):s},c.context=function(l){return arguments.length?(l==null?a=o=null:o=s(a=l),c):a},c}function qc(t,e){this._context=t,this._t=e}qc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Py(t){return new qc(t,1)}const Hn=t=>()=>t;function Ry(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function se(t,e,n){this.k=t,this.x=e,this.y=n}se.prototype={constructor:se,scale:function(t){return t===1?this:new se(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new se(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $a=new se(1,0,0);se.prototype;function mi(t){t.stopImmediatePropagation()}function gn(t){t.preventDefault(),t.stopImmediatePropagation()}function Dy(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ny(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function oo(){return this.__zoom||$a}function Fy(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function zy(){return navigator.maxTouchPoints||"ontouchstart"in this}function By(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function qy(){var t=Dy,e=Ny,n=By,r=Fy,i=zy,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,c=qg,f=Dr("start","zoom","end"),l,h,d,y=500,p=150,m=0,x=10;function g(b){b.property("__zoom",oo).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",E).filter(i).on("touchstart.zoom",$).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(b,A,_,T){var P=b.selection?b.selection():b;P.property("__zoom",oo),b!==P?C(b,A,_,T):P.interrupt().each(function(){k(this,arguments).event(T).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},g.scaleBy=function(b,A,_,T){g.scaleTo(b,function(){var P=this.__zoom.k,O=typeof A=="function"?A.apply(this,arguments):A;return P*O},_,T)},g.scaleTo=function(b,A,_,T){g.transform(b,function(){var P=e.apply(this,arguments),O=this.__zoom,j=_==null?S(P):typeof _=="function"?_.apply(this,arguments):_,M=O.invert(j),B=typeof A=="function"?A.apply(this,arguments):A;return n(w(v(O,B),j,M),P,s)},_,T)},g.translateBy=function(b,A,_,T){g.transform(b,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof _=="function"?_.apply(this,arguments):_),e.apply(this,arguments),s)},null,T)},g.translateTo=function(b,A,_,T,P){g.transform(b,function(){var O=e.apply(this,arguments),j=this.__zoom,M=T==null?S(O):typeof T=="function"?T.apply(this,arguments):T;return n($a.translate(M[0],M[1]).scale(j.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof _=="function"?-_.apply(this,arguments):-_),O,s)},T,P)};function v(b,A){return A=Math.max(a[0],Math.min(a[1],A)),A===b.k?b:new se(A,b.x,b.y)}function w(b,A,_){var T=A[0]-_[0]*b.k,P=A[1]-_[1]*b.k;return T===b.x&&P===b.y?b:new se(b.k,T,P)}function S(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function C(b,A,_,T){b.on("start.zoom",function(){k(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(T).end()}).tween("zoom",function(){var P=this,O=arguments,j=k(P,O).event(T),M=e.apply(P,O),B=_==null?S(M):typeof _=="function"?_.apply(P,O):_,H=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),W=P.__zoom,G=typeof A=="function"?A.apply(P,O):A,X=c(W.invert(B).concat(H/W.k),G.invert(B).concat(H/G.k));return function(q){if(q===1)q=G;else{var Y=X(q),rt=H/Y[2];q=new se(rt,B[0]-Y[0]*rt,B[1]-Y[1]*rt)}j.zoom(null,q)}})}function k(b,A,_){return!_&&b.__zooming||new F(b,A)}function F(b,A){this.that=b,this.args=A,this.active=0,this.sourceEvent=null,this.extent=e.apply(b,A),this.taps=0}F.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,A){return this.mouse&&b!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var A=dt(this.that).datum();f.call(b,this.that,new Ry(b,{sourceEvent:this.sourceEvent,target:g,type:b,transform:this.that.__zoom,dispatch:f}),A)}};function R(b,...A){if(!t.apply(this,arguments))return;var _=k(this,A).event(b),T=this.__zoom,P=Math.max(a[0],Math.min(a[1],T.k*Math.pow(2,r.apply(this,arguments)))),O=re(b);if(_.wheel)(_.mouse[0][0]!==O[0]||_.mouse[0][1]!==O[1])&&(_.mouse[1]=T.invert(_.mouse[0]=O)),clearTimeout(_.wheel);else{if(T.k===P)return;_.mouse=[O,T.invert(O)],We(this),_.start()}gn(b),_.wheel=setTimeout(j,p),_.zoom("mouse",n(w(v(T,P),_.mouse[0],_.mouse[1]),_.extent,s));function j(){_.wheel=null,_.end()}}function I(b,...A){if(d||!t.apply(this,arguments))return;var _=b.currentTarget,T=k(this,A,!0).event(b),P=dt(b.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",H,!0),O=re(b,_),j=b.clientX,M=b.clientY;bc(b.view),mi(b),T.mouse=[O,this.__zoom.invert(O)],We(this),T.start();function B(W){if(gn(W),!T.moved){var G=W.clientX-j,X=W.clientY-M;T.moved=G*G+X*X>m}T.event(W).zoom("mouse",n(w(T.that.__zoom,T.mouse[0]=re(W,_),T.mouse[1]),T.extent,s))}function H(W){P.on("mousemove.zoom mouseup.zoom",null),wc(W.view,T.moved),gn(W),T.event(W).end()}}function E(b,...A){if(t.apply(this,arguments)){var _=this.__zoom,T=re(b.changedTouches?b.changedTouches[0]:b,this),P=_.invert(T),O=_.k*(b.shiftKey?.5:2),j=n(w(v(_,O),T,P),e.apply(this,A),s);gn(b),o>0?dt(this).transition().duration(o).call(C,j,T,b):dt(this).call(g.transform,j,T,b)}}function $(b,...A){if(t.apply(this,arguments)){var _=b.touches,T=_.length,P=k(this,A,b.changedTouches.length===T).event(b),O,j,M,B;for(mi(b),j=0;j<T;++j)M=_[j],B=re(M,this),B=[B,this.__zoom.invert(B),M.identifier],P.touch0?!P.touch1&&P.touch0[2]!==B[2]&&(P.touch1=B,P.taps=0):(P.touch0=B,O=!0,P.taps=1+!!l);l&&(l=clearTimeout(l)),O&&(P.taps<2&&(h=B[0],l=setTimeout(function(){l=null},y)),We(this),P.start())}}function z(b,...A){if(this.__zooming){var _=k(this,A).event(b),T=b.changedTouches,P=T.length,O,j,M,B;for(gn(b),O=0;O<P;++O)j=T[O],M=re(j,this),_.touch0&&_.touch0[2]===j.identifier?_.touch0[0]=M:_.touch1&&_.touch1[2]===j.identifier&&(_.touch1[0]=M);if(j=_.that.__zoom,_.touch1){var H=_.touch0[0],W=_.touch0[1],G=_.touch1[0],X=_.touch1[1],q=(q=G[0]-H[0])*q+(q=G[1]-H[1])*q,Y=(Y=X[0]-W[0])*Y+(Y=X[1]-W[1])*Y;j=v(j,Math.sqrt(q/Y)),M=[(H[0]+G[0])/2,(H[1]+G[1])/2],B=[(W[0]+X[0])/2,(W[1]+X[1])/2]}else if(_.touch0)M=_.touch0[0],B=_.touch0[1];else return;_.zoom("touch",n(w(j,M,B),_.extent,s))}}function N(b,...A){if(this.__zooming){var _=k(this,A).event(b),T=b.changedTouches,P=T.length,O,j;for(mi(b),d&&clearTimeout(d),d=setTimeout(function(){d=null},y),O=0;O<P;++O)j=T[O],_.touch0&&_.touch0[2]===j.identifier?delete _.touch0:_.touch1&&_.touch1[2]===j.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(j=re(j,this),Math.hypot(h[0]-j[0],h[1]-j[1])<x)){var M=dt(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return g.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:Hn(+b),g):r},g.filter=function(b){return arguments.length?(t=typeof b=="function"?b:Hn(!!b),g):t},g.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:Hn(!!b),g):i},g.extent=function(b){return arguments.length?(e=typeof b=="function"?b:Hn([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),g):e},g.scaleExtent=function(b){return arguments.length?(a[0]=+b[0],a[1]=+b[1],g):[a[0],a[1]]},g.translateExtent=function(b){return arguments.length?(s[0][0]=+b[0][0],s[1][0]=+b[1][0],s[0][1]=+b[0][1],s[1][1]=+b[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(b){return arguments.length?(n=b,g):n},g.duration=function(b){return arguments.length?(o=+b,g):o},g.interpolate=function(b){return arguments.length?(c=b,g):c},g.on=function(){var b=f.on.apply(f,arguments);return b===f?g:b},g.clickDistance=function(b){return arguments.length?(m=(b=+b)*b,g):Math.sqrt(m)},g.tapDistance=function(b){return arguments.length?(x=+b,g):x},g}function Uy(){return u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"57",height:"52",viewBox:"0 0 57 52",fill:"none",children:[u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.6236 7.1995L53.1532 34.7998C56.9726 41.5995 52.0671 50 44.2637 50H13.2095C5.41125 50 0.500647 41.6046 4.32515 34.8049L19.8548 7.20465C23.7462 0.265975 33.7219 0.265975 37.6236 7.1995Z",stroke:"#6C7284",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M28.7395 26.6576V17.3048",stroke:"#6C7284",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M28.7344 36.9721C28.477 36.9721 28.2711 37.1832 28.2763 37.4354C28.2763 37.6928 28.4873 37.8987 28.7395 37.8987C28.9917 37.8987 29.1976 37.6876 29.1976 37.4354C29.1976 37.1832 28.9917 36.9721 28.7344 36.9721",stroke:"#6C7284",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}var Wn={},tn={},Mn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getColorIndex=t.getColorDiffStatus=t.hexDiff=t.rgbDiff=t.deltaE94=t.rgbToCIELab=t.xyzToCIELab=t.rgbToXyz=t.hslToRgb=t.rgbToHsl=t.rgbToHex=t.hexToRgb=t.defer=t.RSHIFT=t.SIGBITS=t.DELTAE94_DIFF_STATUS=void 0,t.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},t.SIGBITS=5,t.RSHIFT=8-t.SIGBITS;function e(){var p,m,x=new Promise(function(g,v){p=g,m=v});return{resolve:p,reject:m,promise:x}}t.defer=e;function n(p){var m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(p);return m===null?null:[m[1],m[2],m[3]].map(function(x){return parseInt(x,16)})}t.hexToRgb=n;function r(p,m,x){return"#"+((1<<24)+(p<<16)+(m<<8)+x).toString(16).slice(1,7)}t.rgbToHex=r;function i(p,m,x){p/=255,m/=255,x/=255;var g=Math.max(p,m,x),v=Math.min(p,m,x),w,S,C=(g+v)/2;if(g===v)w=S=0;else{var k=g-v;switch(S=C>.5?k/(2-g-v):k/(g+v),g){case p:w=(m-x)/k+(m<x?6:0);break;case m:w=(x-p)/k+2;break;case x:w=(p-m)/k+4;break}w/=6}return[w,S,C]}t.rgbToHsl=i;function a(p,m,x){var g,v,w;function S(F,R,I){return I<0&&(I+=1),I>1&&(I-=1),I<1/6?F+(R-F)*6*I:I<1/2?R:I<2/3?F+(R-F)*(2/3-I)*6:F}if(m===0)g=v=w=x;else{var C=x<.5?x*(1+m):x+m-x*m,k=2*x-C;g=S(k,C,p+1/3),v=S(k,C,p),w=S(k,C,p-1/3)}return[g*255,v*255,w*255]}t.hslToRgb=a;function s(p,m,x){p/=255,m/=255,x/=255,p=p>.04045?Math.pow((p+.005)/1.055,2.4):p/12.92,m=m>.04045?Math.pow((m+.005)/1.055,2.4):m/12.92,x=x>.04045?Math.pow((x+.005)/1.055,2.4):x/12.92,p*=100,m*=100,x*=100;var g=p*.4124+m*.3576+x*.1805,v=p*.2126+m*.7152+x*.0722,w=p*.0193+m*.1192+x*.9505;return[g,v,w]}t.rgbToXyz=s;function o(p,m,x){var g=95.047,v=100,w=108.883;p/=g,m/=v,x/=w,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116;var S=116*m-16,C=500*(p-m),k=200*(m-x);return[S,C,k]}t.xyzToCIELab=o;function c(p,m,x){var g=s(p,m,x),v=g[0],w=g[1],S=g[2];return o(v,w,S)}t.rgbToCIELab=c;function f(p,m){var x=1,g=1,v=1,w=p[0],S=p[1],C=p[2],k=m[0],F=m[1],R=m[2],I=w-k,E=S-F,$=C-R,z=Math.sqrt(S*S+C*C),N=Math.sqrt(F*F+R*R),b=k-w,A=N-z,_=Math.sqrt(I*I+E*E+$*$),T=Math.sqrt(_)>Math.sqrt(Math.abs(b))+Math.sqrt(Math.abs(A))?Math.sqrt(_*_-b*b-A*A):0,P=1+.045*z,O=1+.015*z;return b/=x,A/=g*P,T/=v*O,Math.sqrt(b*b+A*A+T*T)}t.deltaE94=f;function l(p,m){var x=c.apply(void 0,p),g=c.apply(void 0,m);return f(x,g)}t.rgbDiff=l;function h(p,m){var x=n(p),g=n(m);return l(x,g)}t.hexDiff=h;function d(p){return p<t.DELTAE94_DIFF_STATUS.NA?"N/A":p<=t.DELTAE94_DIFF_STATUS.PERFECT?"Perfect":p<=t.DELTAE94_DIFF_STATUS.CLOSE?"Close":p<=t.DELTAE94_DIFF_STATUS.GOOD?"Good":p<t.DELTAE94_DIFF_STATUS.SIMILAR?"Similar":"Wrong"}t.getColorDiffStatus=d;function y(p,m,x){return(p<<2*t.SIGBITS)+(m<<t.SIGBITS)+x}t.getColorIndex=y})(Mn);function Vy(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}var Uc=Vy;function Hy(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var c=s[t?o:++i];if(n(a[c],c,a)===!1)break}return e}}var Wy=Hy,Gy=Wy,Ky=Gy(),Yy=Ky;function Xy(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Zy=Xy,Qy=Or,Jy=Je,t1="[object Arguments]";function e1(t){return Jy(t)&&Qy(t)==t1}var n1=e1,uo=n1,r1=Je,Vc=Object.prototype,i1=Vc.hasOwnProperty,a1=Vc.propertyIsEnumerable,s1=uo(function(){return arguments}())?uo:function(t){return r1(t)&&i1.call(t,"callee")&&!a1.call(t,"callee")},Hc=s1,o1=Array.isArray,Gt=o1;const nI=Pr(Gt);var br={exports:{}};function u1(){return!1}var c1=u1;br.exports;(function(t,e){var n=fe,r=c1,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,c=o?o.isBuffer:void 0,f=c||r;t.exports=f})(br,br.exports);var Ma=br.exports,l1=9007199254740991,f1=/^(?:0|[1-9]\d*)$/;function d1(t,e){var n=typeof t;return e=e??l1,!!e&&(n=="number"||n!="symbol"&&f1.test(t))&&t>-1&&t%1==0&&t<e}var La=d1,h1=9007199254740991;function p1(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=h1}var Oa=p1,g1=Or,m1=Oa,y1=Je,x1="[object Arguments]",v1="[object Array]",b1="[object Boolean]",w1="[object Date]",_1="[object Error]",T1="[object Function]",S1="[object Map]",k1="[object Number]",C1="[object Object]",A1="[object RegExp]",j1="[object Set]",I1="[object String]",E1="[object WeakMap]",$1="[object ArrayBuffer]",M1="[object DataView]",L1="[object Float32Array]",O1="[object Float64Array]",P1="[object Int8Array]",R1="[object Int16Array]",D1="[object Int32Array]",N1="[object Uint8Array]",F1="[object Uint8ClampedArray]",z1="[object Uint16Array]",B1="[object Uint32Array]",lt={};lt[L1]=lt[O1]=lt[P1]=lt[R1]=lt[D1]=lt[N1]=lt[F1]=lt[z1]=lt[B1]=!0;lt[x1]=lt[v1]=lt[$1]=lt[b1]=lt[M1]=lt[w1]=lt[_1]=lt[T1]=lt[S1]=lt[k1]=lt[C1]=lt[A1]=lt[j1]=lt[I1]=lt[E1]=!1;function q1(t){return y1(t)&&m1(t.length)&&!!lt[g1(t)]}var U1=q1;function V1(t){return function(e){return t(e)}}var Pa=V1,wr={exports:{}};wr.exports;(function(t,e){var n=Ef,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(wr,wr.exports);var Ra=wr.exports,H1=U1,W1=Pa,co=Ra,lo=co&&co.isTypedArray,G1=lo?W1(lo):H1,Wc=G1,K1=Zy,Y1=Hc,X1=Gt,Z1=Ma,Q1=La,J1=Wc,tx=Object.prototype,ex=tx.hasOwnProperty;function nx(t,e){var n=X1(t),r=!n&&Y1(t),i=!n&&!r&&Z1(t),a=!n&&!r&&!i&&J1(t),s=n||r||i||a,o=s?K1(t.length,String):[],c=o.length;for(var f in t)(e||ex.call(t,f))&&!(s&&(f=="length"||i&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Q1(f,c)))&&o.push(f);return o}var Gc=nx,rx=Object.prototype;function ix(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||rx;return t===n}var Da=ix;function ax(t,e){return function(n){return t(e(n))}}var Kc=ax,sx=Kc,ox=sx(Object.keys,Object),ux=ox,cx=Da,lx=ux,fx=Object.prototype,dx=fx.hasOwnProperty;function hx(t){if(!cx(t))return lx(t);var e=[];for(var n in Object(t))dx.call(t,n)&&n!="constructor"&&e.push(n);return e}var px=hx,gx=Or,mx=Pe,yx="[object AsyncFunction]",xx="[object Function]",vx="[object GeneratorFunction]",bx="[object Proxy]";function wx(t){if(!mx(t))return!1;var e=gx(t);return e==xx||e==vx||e==yx||e==bx}var Na=wx;const rI=Pr(Na);var _x=Na,Tx=Oa;function Sx(t){return t!=null&&Tx(t.length)&&!_x(t)}var qr=Sx,kx=Gc,Cx=px,Ax=qr;function jx(t){return Ax(t)?kx(t):Cx(t)}var Ln=jx,Ix=Yy,Ex=Ln;function $x(t,e){return t&&Ix(t,e,Ex)}var Mx=$x,Lx=qr;function Ox(t,e){return function(n,r){if(n==null)return n;if(!Lx(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var Px=Ox,Rx=Mx,Dx=Px,Nx=Dx(Rx),Fx=Nx,zx=Fx;function Bx(t,e){var n=[];return zx(t,function(r,i,a){e(r,i,a)&&n.push(r)}),n}var qx=Bx;function Ux(){this.__data__=[],this.size=0}var Vx=Ux;function Hx(t,e){return t===e||t!==t&&e!==e}var On=Hx,Wx=On;function Gx(t,e){for(var n=t.length;n--;)if(Wx(t[n][0],e))return n;return-1}var Ur=Gx,Kx=Ur,Yx=Array.prototype,Xx=Yx.splice;function Zx(t){var e=this.__data__,n=Kx(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Xx.call(e,n,1),--this.size,!0}var Qx=Zx,Jx=Ur;function tv(t){var e=this.__data__,n=Jx(e,t);return n<0?void 0:e[n][1]}var ev=tv,nv=Ur;function rv(t){return nv(this.__data__,t)>-1}var iv=rv,av=Ur;function sv(t,e){var n=this.__data__,r=av(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var ov=sv,uv=Vx,cv=Qx,lv=ev,fv=iv,dv=ov;function en(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}en.prototype.clear=uv;en.prototype.delete=cv;en.prototype.get=lv;en.prototype.has=fv;en.prototype.set=dv;var Vr=en,hv=Vr;function pv(){this.__data__=new hv,this.size=0}var gv=pv;function mv(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var yv=mv;function xv(t){return this.__data__.get(t)}var vv=xv;function bv(t){return this.__data__.has(t)}var wv=bv,_v=fe,Tv=_v["__core-js_shared__"],Sv=Tv,yi=Sv,fo=function(){var t=/[^.]+$/.exec(yi&&yi.keys&&yi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function kv(t){return!!fo&&fo in t}var Cv=kv,Av=Function.prototype,jv=Av.toString;function Iv(t){if(t!=null){try{return jv.call(t)}catch{}try{return t+""}catch{}}return""}var Yc=Iv,Ev=Na,$v=Cv,Mv=Pe,Lv=Yc,Ov=/[\\^$.*+?()[\]{}|]/g,Pv=/^\[object .+?Constructor\]$/,Rv=Function.prototype,Dv=Object.prototype,Nv=Rv.toString,Fv=Dv.hasOwnProperty,zv=RegExp("^"+Nv.call(Fv).replace(Ov,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bv(t){if(!Mv(t)||$v(t))return!1;var e=Ev(t)?zv:Pv;return e.test(Lv(t))}var qv=Bv;function Uv(t,e){return t==null?void 0:t[e]}var Vv=Uv,Hv=qv,Wv=Vv;function Gv(t,e){var n=Wv(t,e);return Hv(n)?n:void 0}var Re=Gv,Kv=Re,Yv=fe,Xv=Kv(Yv,"Map"),Fa=Xv,Zv=Re,Qv=Zv(Object,"create"),Hr=Qv,ho=Hr;function Jv(){this.__data__=ho?ho(null):{},this.size=0}var tb=Jv;function eb(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var nb=eb,rb=Hr,ib="__lodash_hash_undefined__",ab=Object.prototype,sb=ab.hasOwnProperty;function ob(t){var e=this.__data__;if(rb){var n=e[t];return n===ib?void 0:n}return sb.call(e,t)?e[t]:void 0}var ub=ob,cb=Hr,lb=Object.prototype,fb=lb.hasOwnProperty;function db(t){var e=this.__data__;return cb?e[t]!==void 0:fb.call(e,t)}var hb=db,pb=Hr,gb="__lodash_hash_undefined__";function mb(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=pb&&e===void 0?gb:e,this}var yb=mb,xb=tb,vb=nb,bb=ub,wb=hb,_b=yb;function nn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}nn.prototype.clear=xb;nn.prototype.delete=vb;nn.prototype.get=bb;nn.prototype.has=wb;nn.prototype.set=_b;var Tb=nn,po=Tb,Sb=Vr,kb=Fa;function Cb(){this.size=0,this.__data__={hash:new po,map:new(kb||Sb),string:new po}}var Ab=Cb;function jb(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Ib=jb,Eb=Ib;function $b(t,e){var n=t.__data__;return Eb(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Wr=$b,Mb=Wr;function Lb(t){var e=Mb(this,t).delete(t);return this.size-=e?1:0,e}var Ob=Lb,Pb=Wr;function Rb(t){return Pb(this,t).get(t)}var Db=Rb,Nb=Wr;function Fb(t){return Nb(this,t).has(t)}var zb=Fb,Bb=Wr;function qb(t,e){var n=Bb(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Ub=qb,Vb=Ab,Hb=Ob,Wb=Db,Gb=zb,Kb=Ub;function rn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rn.prototype.clear=Vb;rn.prototype.delete=Hb;rn.prototype.get=Wb;rn.prototype.has=Gb;rn.prototype.set=Kb;var za=rn,Yb=Vr,Xb=Fa,Zb=za,Qb=200;function Jb(t,e){var n=this.__data__;if(n instanceof Yb){var r=n.__data__;if(!Xb||r.length<Qb-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Zb(r)}return n.set(t,e),this.size=n.size,this}var tw=Jb,ew=Vr,nw=gv,rw=yv,iw=vv,aw=wv,sw=tw;function an(t){var e=this.__data__=new ew(t);this.size=e.size}an.prototype.clear=nw;an.prototype.delete=rw;an.prototype.get=iw;an.prototype.has=aw;an.prototype.set=sw;var Ba=an,ow="__lodash_hash_undefined__";function uw(t){return this.__data__.set(t,ow),this}var cw=uw;function lw(t){return this.__data__.has(t)}var fw=lw,dw=za,hw=cw,pw=fw;function _r(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new dw;++e<n;)this.add(t[e])}_r.prototype.add=_r.prototype.push=hw;_r.prototype.has=pw;var gw=_r;function mw(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var yw=mw;function xw(t,e){return t.has(e)}var vw=xw,bw=gw,ww=yw,_w=vw,Tw=1,Sw=2;function kw(t,e,n,r,i,a){var s=n&Tw,o=t.length,c=e.length;if(o!=c&&!(s&&c>o))return!1;var f=a.get(t),l=a.get(e);if(f&&l)return f==e&&l==t;var h=-1,d=!0,y=n&Sw?new bw:void 0;for(a.set(t,e),a.set(e,t);++h<o;){var p=t[h],m=e[h];if(r)var x=s?r(m,p,h,e,t,a):r(p,m,h,t,e,a);if(x!==void 0){if(x)continue;d=!1;break}if(y){if(!ww(e,function(g,v){if(!_w(y,v)&&(p===g||i(p,g,n,r,a)))return y.push(v)})){d=!1;break}}else if(!(p===m||i(p,m,n,r,a))){d=!1;break}}return a.delete(t),a.delete(e),d}var Xc=kw,Cw=fe,Aw=Cw.Uint8Array,Zc=Aw;function jw(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Iw=jw;function Ew(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var $w=Ew,go=ha,mo=Zc,Mw=On,Lw=Xc,Ow=Iw,Pw=$w,Rw=1,Dw=2,Nw="[object Boolean]",Fw="[object Date]",zw="[object Error]",Bw="[object Map]",qw="[object Number]",Uw="[object RegExp]",Vw="[object Set]",Hw="[object String]",Ww="[object Symbol]",Gw="[object ArrayBuffer]",Kw="[object DataView]",yo=go?go.prototype:void 0,xi=yo?yo.valueOf:void 0;function Yw(t,e,n,r,i,a,s){switch(n){case Kw:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Gw:return!(t.byteLength!=e.byteLength||!a(new mo(t),new mo(e)));case Nw:case Fw:case qw:return Mw(+t,+e);case zw:return t.name==e.name&&t.message==e.message;case Uw:case Hw:return t==e+"";case Bw:var o=Ow;case Vw:var c=r&Rw;if(o||(o=Pw),t.size!=e.size&&!c)return!1;var f=s.get(t);if(f)return f==e;r|=Dw,s.set(t,e);var l=Lw(o(t),o(e),r,i,a,s);return s.delete(t),l;case Ww:if(xi)return xi.call(t)==xi.call(e)}return!1}var Xw=Yw;function Zw(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Qc=Zw,Qw=Qc,Jw=Gt;function t_(t,e,n){var r=e(t);return Jw(t)?r:Qw(r,n(t))}var Jc=t_;function e_(){return[]}var tl=e_,n_=Uc,r_=tl,i_=Object.prototype,a_=i_.propertyIsEnumerable,xo=Object.getOwnPropertySymbols,s_=xo?function(t){return t==null?[]:(t=Object(t),n_(xo(t),function(e){return a_.call(t,e)}))}:r_,qa=s_,o_=Jc,u_=qa,c_=Ln;function l_(t){return o_(t,c_,u_)}var el=l_,vo=el,f_=1,d_=Object.prototype,h_=d_.hasOwnProperty;function p_(t,e,n,r,i,a){var s=n&f_,o=vo(t),c=o.length,f=vo(e),l=f.length;if(c!=l&&!s)return!1;for(var h=c;h--;){var d=o[h];if(!(s?d in e:h_.call(e,d)))return!1}var y=a.get(t),p=a.get(e);if(y&&p)return y==e&&p==t;var m=!0;a.set(t,e),a.set(e,t);for(var x=s;++h<c;){d=o[h];var g=t[d],v=e[d];if(r)var w=s?r(v,g,d,e,t,a):r(g,v,d,t,e,a);if(!(w===void 0?g===v||i(g,v,n,r,a):w)){m=!1;break}x||(x=d=="constructor")}if(m&&!x){var S=t.constructor,C=e.constructor;S!=C&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(m=!1)}return a.delete(t),a.delete(e),m}var g_=p_,m_=Re,y_=fe,x_=m_(y_,"DataView"),v_=x_,b_=Re,w_=fe,__=b_(w_,"Promise"),T_=__,S_=Re,k_=fe,C_=S_(k_,"Set"),A_=C_,j_=Re,I_=fe,E_=j_(I_,"WeakMap"),$_=E_,Ji=v_,ta=Fa,ea=T_,na=A_,ra=$_,nl=Or,sn=Yc,bo="[object Map]",M_="[object Object]",wo="[object Promise]",_o="[object Set]",To="[object WeakMap]",So="[object DataView]",L_=sn(Ji),O_=sn(ta),P_=sn(ea),R_=sn(na),D_=sn(ra),Te=nl;(Ji&&Te(new Ji(new ArrayBuffer(1)))!=So||ta&&Te(new ta)!=bo||ea&&Te(ea.resolve())!=wo||na&&Te(new na)!=_o||ra&&Te(new ra)!=To)&&(Te=function(t){var e=nl(t),n=e==M_?t.constructor:void 0,r=n?sn(n):"";if(r)switch(r){case L_:return So;case O_:return bo;case P_:return wo;case R_:return _o;case D_:return To}return e});var Gr=Te,vi=Ba,N_=Xc,F_=Xw,z_=g_,ko=Gr,Co=Gt,Ao=Ma,B_=Wc,q_=1,jo="[object Arguments]",Io="[object Array]",Gn="[object Object]",U_=Object.prototype,Eo=U_.hasOwnProperty;function V_(t,e,n,r,i,a){var s=Co(t),o=Co(e),c=s?Io:ko(t),f=o?Io:ko(e);c=c==jo?Gn:c,f=f==jo?Gn:f;var l=c==Gn,h=f==Gn,d=c==f;if(d&&Ao(t)){if(!Ao(e))return!1;s=!0,l=!1}if(d&&!l)return a||(a=new vi),s||B_(t)?N_(t,e,n,r,i,a):F_(t,e,c,n,r,i,a);if(!(n&q_)){var y=l&&Eo.call(t,"__wrapped__"),p=h&&Eo.call(e,"__wrapped__");if(y||p){var m=y?t.value():t,x=p?e.value():e;return a||(a=new vi),i(m,x,n,r,a)}}return d?(a||(a=new vi),z_(t,e,n,r,i,a)):!1}var H_=V_,W_=H_,$o=Je;function rl(t,e,n,r,i){return t===e?!0:t==null||e==null||!$o(t)&&!$o(e)?t!==t&&e!==e:W_(t,e,n,r,rl,i)}var il=rl,G_=Ba,K_=il,Y_=1,X_=2;function Z_(t,e,n,r){var i=n.length,a=i,s=!r;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var c=o[0],f=t[c],l=o[1];if(s&&o[2]){if(f===void 0&&!(c in t))return!1}else{var h=new G_;if(r)var d=r(f,l,c,t,e,h);if(!(d===void 0?K_(l,f,Y_|X_,r,h):d))return!1}}return!0}var Q_=Z_,J_=Pe;function t2(t){return t===t&&!J_(t)}var al=t2,e2=al,n2=Ln;function r2(t){for(var e=n2(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,e2(i)]}return e}var i2=r2;function a2(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var sl=a2,s2=Q_,o2=i2,u2=sl;function c2(t){var e=o2(t);return e.length==1&&e[0][2]?u2(e[0][0],e[0][1]):function(n){return n===t||s2(n,t,e)}}var l2=c2,f2=Gt,d2=pa,h2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p2=/^\w*$/;function g2(t,e){if(f2(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||d2(t)?!0:p2.test(t)||!h2.test(t)||e!=null&&t in Object(e)}var Ua=g2,ol=za,m2="Expected a function";function Va(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(m2);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(Va.Cache||ol),n}Va.Cache=ol;var y2=Va,x2=y2,v2=500;function b2(t){var e=x2(t,function(r){return n.size===v2&&n.clear(),r}),n=e.cache;return e}var w2=b2,_2=w2,T2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S2=/\\(\\)?/g,k2=_2(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(T2,function(n,r,i,a){e.push(i?a.replace(S2,"$1"):r||n)}),e}),C2=k2;function A2(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var j2=A2,Mo=ha,I2=j2,E2=Gt,$2=pa,M2=1/0,Lo=Mo?Mo.prototype:void 0,Oo=Lo?Lo.toString:void 0;function ul(t){if(typeof t=="string")return t;if(E2(t))return I2(t,ul)+"";if($2(t))return Oo?Oo.call(t):"";var e=t+"";return e=="0"&&1/t==-M2?"-0":e}var L2=ul,O2=L2;function P2(t){return t==null?"":O2(t)}var R2=P2,D2=Gt,N2=Ua,F2=C2,z2=R2;function B2(t,e){return D2(t)?t:N2(t,e)?[t]:F2(z2(t))}var cl=B2,q2=pa,U2=1/0;function V2(t){if(typeof t=="string"||q2(t))return t;var e=t+"";return e=="0"&&1/t==-U2?"-0":e}var Kr=V2,H2=cl,W2=Kr;function G2(t,e){e=H2(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[W2(e[n++])];return n&&n==r?t:void 0}var ll=G2,K2=ll;function Y2(t,e,n){var r=t==null?void 0:K2(t,e);return r===void 0?n:r}var fl=Y2;const iI=Pr(fl);function X2(t,e){return t!=null&&e in Object(t)}var Z2=X2,Q2=cl,J2=Hc,tT=Gt,eT=La,nT=Oa,rT=Kr;function iT(t,e,n){e=Q2(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=rT(e[r]);if(!(a=t!=null&&n(t,s)))break;t=t[s]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&nT(i)&&eT(s,i)&&(tT(t)||J2(t)))}var aT=iT,sT=Z2,oT=aT;function uT(t,e){return t!=null&&oT(t,e,sT)}var cT=uT,lT=il,fT=fl,dT=cT,hT=Ua,pT=al,gT=sl,mT=Kr,yT=1,xT=2;function vT(t,e){return hT(t)&&pT(e)?gT(mT(t),e):function(n){var r=fT(n,t);return r===void 0&&r===e?dT(n,t):lT(e,r,yT|xT)}}var bT=vT;function wT(t){return t}var Ha=wT;function _T(t){return function(e){return e==null?void 0:e[t]}}var TT=_T,ST=ll;function kT(t){return function(e){return ST(e,t)}}var CT=kT,AT=TT,jT=CT,IT=Ua,ET=Kr;function $T(t){return IT(t)?AT(ET(t)):jT(t)}var MT=$T,LT=l2,OT=bT,PT=Ha,RT=Gt,DT=MT;function NT(t){return typeof t=="function"?t:t==null?PT:typeof t=="object"?RT(t)?OT(t[0],t[1]):LT(t):DT(t)}var FT=NT,zT=Uc,BT=qx,qT=FT,UT=Gt;function VT(t,e){var n=UT(t)?zT:BT;return n(t,qT(e))}var HT=VT;Object.defineProperty(tn,"__esModule",{value:!0});tn.Swatch=void 0;var Po=Mn,WT=HT,GT=function(){function t(e,n){this._rgb=e,this._population=n}return t.applyFilter=function(e,n){return typeof n=="function"?WT(e,function(r){var i=r.r,a=r.g,s=r.b;return n(i,a,s,255)}):e},Object.defineProperty(t.prototype,"r",{get:function(){return this._rgb[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._rgb[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._rgb[2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb",{get:function(){return this._rgb},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hsl",{get:function(){if(!this._hsl){var e=this._rgb,n=e[0],r=e[1],i=e[2];this._hsl=Po.rgbToHsl(n,r,i)}return this._hsl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hex",{get:function(){if(!this._hex){var e=this._rgb,n=e[0],r=e[1],i=e[2];this._hex=Po.rgbToHex(n,r,i)}return this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"population",{get:function(){return this._population},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{rgb:this.rgb,population:this.population}},t.prototype.getRgb=function(){return this._rgb},t.prototype.getHsl=function(){return this.hsl},t.prototype.getPopulation=function(){return this._population},t.prototype.getHex=function(){return this.hex},t.prototype.getYiq=function(){if(!this._yiq){var e=this._rgb;this._yiq=(e[0]*299+e[1]*587+e[2]*114)/1e3}return this._yiq},Object.defineProperty(t.prototype,"titleTextColor",{get:function(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyTextColor",{get:function(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor},enumerable:!1,configurable:!0}),t.prototype.getTitleTextColor=function(){return this.titleTextColor},t.prototype.getBodyTextColor=function(){return this.bodyTextColor},t}();tn.Swatch=GT;var Kn={};function KT(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var YT=KT,XT=Re,ZT=function(){try{var t=XT(Object,"defineProperty");return t({},"",{}),t}catch{}}(),dl=ZT,Ro=dl;function QT(t,e,n){e=="__proto__"&&Ro?Ro(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var hl=QT,JT=hl,tS=On,eS=Object.prototype,nS=eS.hasOwnProperty;function rS(t,e,n){var r=t[e];(!(nS.call(t,e)&&tS(r,n))||n===void 0&&!(e in t))&&JT(t,e,n)}var pl=rS,iS=pl,aS=hl;function sS(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var o=e[a],c=r?r(n[o],t[o],o,n,t):void 0;c===void 0&&(c=t[o]),i?aS(n,o,c):iS(n,o,c)}return n}var Yr=sS,oS=Yr,uS=Ln;function cS(t,e){return t&&oS(e,uS(e),t)}var lS=cS;function fS(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var dS=fS,hS=Pe,pS=Da,gS=dS,mS=Object.prototype,yS=mS.hasOwnProperty;function xS(t){if(!hS(t))return gS(t);var e=pS(t),n=[];for(var r in t)r=="constructor"&&(e||!yS.call(t,r))||n.push(r);return n}var vS=xS,bS=Gc,wS=vS,_S=qr;function TS(t){return _S(t)?bS(t,!0):wS(t)}var Xr=TS,SS=Yr,kS=Xr;function CS(t,e){return t&&SS(e,kS(e),t)}var AS=CS,Tr={exports:{}};Tr.exports;(function(t,e){var n=fe,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function c(f,l){if(l)return f.slice();var h=f.length,d=o?o(h):new f.constructor(h);return f.copy(d),d}t.exports=c})(Tr,Tr.exports);var jS=Tr.exports;function IS(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var ES=IS,$S=Yr,MS=qa;function LS(t,e){return $S(t,MS(t),e)}var OS=LS,PS=Kc,RS=PS(Object.getPrototypeOf,Object),gl=RS,DS=Qc,NS=gl,FS=qa,zS=tl,BS=Object.getOwnPropertySymbols,qS=BS?function(t){for(var e=[];t;)DS(e,FS(t)),t=NS(t);return e}:zS,ml=qS,US=Yr,VS=ml;function HS(t,e){return US(t,VS(t),e)}var WS=HS,GS=Jc,KS=ml,YS=Xr;function XS(t){return GS(t,YS,KS)}var ZS=XS,QS=Object.prototype,JS=QS.hasOwnProperty;function tk(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&JS.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var ek=tk,Do=Zc;function nk(t){var e=new t.constructor(t.byteLength);return new Do(e).set(new Do(t)),e}var Wa=nk,rk=Wa;function ik(t,e){var n=e?rk(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var ak=ik,sk=/\w*$/;function ok(t){var e=new t.constructor(t.source,sk.exec(t));return e.lastIndex=t.lastIndex,e}var uk=ok,No=ha,Fo=No?No.prototype:void 0,zo=Fo?Fo.valueOf:void 0;function ck(t){return zo?Object(zo.call(t)):{}}var lk=ck,fk=Wa;function dk(t,e){var n=e?fk(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var hk=dk,pk=Wa,gk=ak,mk=uk,yk=lk,xk=hk,vk="[object Boolean]",bk="[object Date]",wk="[object Map]",_k="[object Number]",Tk="[object RegExp]",Sk="[object Set]",kk="[object String]",Ck="[object Symbol]",Ak="[object ArrayBuffer]",jk="[object DataView]",Ik="[object Float32Array]",Ek="[object Float64Array]",$k="[object Int8Array]",Mk="[object Int16Array]",Lk="[object Int32Array]",Ok="[object Uint8Array]",Pk="[object Uint8ClampedArray]",Rk="[object Uint16Array]",Dk="[object Uint32Array]";function Nk(t,e,n){var r=t.constructor;switch(e){case Ak:return pk(t);case vk:case bk:return new r(+t);case jk:return gk(t,n);case Ik:case Ek:case $k:case Mk:case Lk:case Ok:case Pk:case Rk:case Dk:return xk(t,n);case wk:return new r;case _k:case kk:return new r(t);case Tk:return mk(t);case Sk:return new r;case Ck:return yk(t)}}var Fk=Nk,zk=Pe,Bo=Object.create,Bk=function(){function t(){}return function(e){if(!zk(e))return{};if(Bo)return Bo(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),qk=Bk,Uk=qk,Vk=gl,Hk=Da;function Wk(t){return typeof t.constructor=="function"&&!Hk(t)?Uk(Vk(t)):{}}var Gk=Wk,Kk=Gr,Yk=Je,Xk="[object Map]";function Zk(t){return Yk(t)&&Kk(t)==Xk}var Qk=Zk,Jk=Qk,tC=Pa,qo=Ra,Uo=qo&&qo.isMap,eC=Uo?tC(Uo):Jk,nC=eC,rC=Gr,iC=Je,aC="[object Set]";function sC(t){return iC(t)&&rC(t)==aC}var oC=sC,uC=oC,cC=Pa,Vo=Ra,Ho=Vo&&Vo.isSet,lC=Ho?cC(Ho):uC,fC=lC,dC=Ba,hC=YT,pC=pl,gC=lS,mC=AS,yC=jS,xC=ES,vC=OS,bC=WS,wC=el,_C=ZS,TC=Gr,SC=ek,kC=Fk,CC=Gk,AC=Gt,jC=Ma,IC=nC,EC=Pe,$C=fC,MC=Ln,LC=Xr,OC=1,PC=2,RC=4,yl="[object Arguments]",DC="[object Array]",NC="[object Boolean]",FC="[object Date]",zC="[object Error]",xl="[object Function]",BC="[object GeneratorFunction]",qC="[object Map]",UC="[object Number]",vl="[object Object]",VC="[object RegExp]",HC="[object Set]",WC="[object String]",GC="[object Symbol]",KC="[object WeakMap]",YC="[object ArrayBuffer]",XC="[object DataView]",ZC="[object Float32Array]",QC="[object Float64Array]",JC="[object Int8Array]",t6="[object Int16Array]",e6="[object Int32Array]",n6="[object Uint8Array]",r6="[object Uint8ClampedArray]",i6="[object Uint16Array]",a6="[object Uint32Array]",ut={};ut[yl]=ut[DC]=ut[YC]=ut[XC]=ut[NC]=ut[FC]=ut[ZC]=ut[QC]=ut[JC]=ut[t6]=ut[e6]=ut[qC]=ut[UC]=ut[vl]=ut[VC]=ut[HC]=ut[WC]=ut[GC]=ut[n6]=ut[r6]=ut[i6]=ut[a6]=!0;ut[zC]=ut[xl]=ut[KC]=!1;function ir(t,e,n,r,i,a){var s,o=e&OC,c=e&PC,f=e&RC;if(n&&(s=i?n(t,r,i,a):n(t)),s!==void 0)return s;if(!EC(t))return t;var l=AC(t);if(l){if(s=SC(t),!o)return xC(t,s)}else{var h=TC(t),d=h==xl||h==BC;if(jC(t))return yC(t,o);if(h==vl||h==yl||d&&!i){if(s=c||d?{}:CC(t),!o)return c?bC(t,mC(s,t)):vC(t,gC(s,t))}else{if(!ut[h])return i?t:{};s=kC(t,h,o)}}a||(a=new dC);var y=a.get(t);if(y)return y;a.set(t,s),$C(t)?t.forEach(function(x){s.add(ir(x,e,n,x,t,a))}):IC(t)&&t.forEach(function(x,g){s.set(g,ir(x,e,n,g,t,a))});var p=f?c?_C:wC:c?LC:MC,m=l?void 0:p(t);return hC(m||t,function(x,g){m&&(g=x,x=t[g]),pC(s,g,ir(x,e,n,g,t,a))}),s}var s6=ir,o6=s6,u6=4;function c6(t){return o6(t,u6)}var l6=c6,Wo;function f6(){if(Wo)return Kn;Wo=1;var t=ft&&ft.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Kn,"__esModule",{value:!0});var e=t(Cl()),n=l6,r=function(){function i(a,s){s===void 0&&(s={}),this._src=a,this._opts=s,this._opts.filters=n(e.default.DefaultOpts.filters)}return i.prototype.maxColorCount=function(a){return this._opts.colorCount=a,this},i.prototype.maxDimension=function(a){return this._opts.maxDimension=a,this},i.prototype.addFilter=function(a){return this._opts.filters.push(a),this},i.prototype.removeFilter=function(a){var s=this._opts.filters.indexOf(a);return s>0&&this._opts.filters.splice(s),this},i.prototype.clearFilters=function(){return this._opts.filters=[],this},i.prototype.quality=function(a){return this._opts.quality=a,this},i.prototype.useImageClass=function(a){return this._opts.ImageClass=a,this},i.prototype.useGenerator=function(a){return this._opts.generator=a,this},i.prototype.useQuantizer=function(a){return this._opts.quantizer=a,this},i.prototype.build=function(){return new e.default(this._src,this._opts)},i.prototype.getPalette=function(a){return this.build().getPalette(a)},i.prototype.getSwatches=function(a){return this.build().getPalette(a)},i}();return Kn.default=r,Kn}var bl={},Ga={},Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});var Et=Mn,d6=function(){function t(e,n,r,i,a,s,o){this._volume=-1,this._count=-1,this.dimension={r1:e,r2:n,g1:r,g2:i,b1:a,b2:s},this.hist=o}return t.build=function(e,n){var r=1<<3*Et.SIGBITS,i=new Uint32Array(r),a,s,o,c,f,l,h,d,y,p;a=o=f=0,s=c=l=Number.MAX_VALUE;for(var m=e.length/4,x=0;x<m;){var g=x*4;if(x++,h=e[g+0],d=e[g+1],y=e[g+2],p=e[g+3],p!==0){h=h>>Et.RSHIFT,d=d>>Et.RSHIFT,y=y>>Et.RSHIFT;var v=Et.getColorIndex(h,d,y);i[v]+=1,h>a&&(a=h),h<s&&(s=h),d>o&&(o=d),d<c&&(c=d),y>f&&(f=y),y<l&&(l=y)}}return new t(s,a,c,o,l,f,i)},t.prototype.invalidate=function(){this._volume=this._count=-1,this._avg=null},t.prototype.volume=function(){if(this._volume<0){var e=this.dimension,n=e.r1,r=e.r2,i=e.g1,a=e.g2,s=e.b1,o=e.b2;this._volume=(r-n+1)*(a-i+1)*(o-s+1)}return this._volume},t.prototype.count=function(){if(this._count<0){for(var e=this.hist,n=this.dimension,r=n.r1,i=n.r2,a=n.g1,s=n.g2,o=n.b1,c=n.b2,f=0,l=r;l<=i;l++)for(var h=a;h<=s;h++)for(var d=o;d<=c;d++){var y=Et.getColorIndex(l,h,d);f+=e[y]}this._count=f}return this._count},t.prototype.clone=function(){var e=this.hist,n=this.dimension,r=n.r1,i=n.r2,a=n.g1,s=n.g2,o=n.b1,c=n.b2;return new t(r,i,a,s,o,c,e)},t.prototype.avg=function(){if(!this._avg){var e=this.hist,n=this.dimension,r=n.r1,i=n.r2,a=n.g1,s=n.g2,o=n.b1,c=n.b2,f=0,l=1<<8-Et.SIGBITS,h=void 0,d=void 0,y=void 0;h=d=y=0;for(var p=r;p<=i;p++)for(var m=a;m<=s;m++)for(var x=o;x<=c;x++){var g=Et.getColorIndex(p,m,x),v=e[g];f+=v,h+=v*(p+.5)*l,d+=v*(m+.5)*l,y+=v*(x+.5)*l}f?this._avg=[~~(h/f),~~(d/f),~~(y/f)]:this._avg=[~~(l*(r+i+1)/2),~~(l*(a+s+1)/2),~~(l*(o+c+1)/2)]}return this._avg},t.prototype.contains=function(e){var n=e[0],r=e[1],i=e[2],a=this.dimension,s=a.r1,o=a.r2,c=a.g1,f=a.g2,l=a.b1,h=a.b2;return n>>=Et.RSHIFT,r>>=Et.RSHIFT,i>>=Et.RSHIFT,n>=s&&n<=o&&r>=c&&r<=f&&i>=l&&i<=h},t.prototype.split=function(){var e=this.hist,n=this.dimension,r=n.r1,i=n.r2,a=n.g1,s=n.g2,o=n.b1,c=n.b2,f=this.count();if(!f)return[];if(f===1)return[this.clone()];var l=i-r+1,h=s-a+1,d=c-o+1,y=Math.max(l,h,d),p=null,m,x;m=x=0;var g=null;if(y===l){g="r",p=new Uint32Array(i+1);for(var v=r;v<=i;v++){m=0;for(var w=a;w<=s;w++)for(var S=o;S<=c;S++){var C=Et.getColorIndex(v,w,S);m+=e[C]}x+=m,p[v]=x}}else if(y===h){g="g",p=new Uint32Array(s+1);for(var w=a;w<=s;w++){m=0;for(var v=r;v<=i;v++)for(var S=o;S<=c;S++){var C=Et.getColorIndex(v,w,S);m+=e[C]}x+=m,p[w]=x}}else{g="b",p=new Uint32Array(c+1);for(var S=o;S<=c;S++){m=0;for(var v=r;v<=i;v++)for(var w=a;w<=s;w++){var C=Et.getColorIndex(v,w,S);m+=e[C]}x+=m,p[S]=x}}for(var k=-1,F=new Uint32Array(p.length),R=0;R<p.length;R++){var I=p[R];k<0&&I>x/2&&(k=R),F[R]=x-I}var E=this;function $(z){var N=z+"1",b=z+"2",A=E.dimension[N],_=E.dimension[b],T=E.clone(),P=E.clone(),O=k-A,j=_-k;for(O<=j?(_=Math.min(_-1,~~(k+j/2)),_=Math.max(0,_)):(_=Math.max(A,~~(k-1-O/2)),_=Math.min(E.dimension[b],_));!p[_];)_++;for(var M=F[_];!M&&p[_-1];)M=F[--_];return T.dimension[b]=_,P.dimension[N]=_+1,[T,P]}return $(g)},t}();Ka.default=d6;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});var h6=function(){function t(e){this._comparator=e,this.contents=[],this._sorted=!1}return t.prototype._sort=function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)},t.prototype.push=function(e){this.contents.push(e),this._sorted=!1},t.prototype.peek=function(e){return this._sort(),e=typeof e=="number"?e:this.contents.length-1,this.contents[e]},t.prototype.pop=function(){return this._sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(e){return this._sort(),this.contents.map(e)},t}();Ya.default=h6;var wl=ft&&ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ga,"__esModule",{value:!0});var p6=tn,g6=wl(Ka),Go=wl(Ya),m6=.75;function Ko(t,e){for(var n=t.size();t.size()<e;){var r=t.pop();if(r&&r.count()>0){var i=r.split(),a=i[0],s=i[1];if(t.push(a),s&&s.count()>0&&t.push(s),t.size()===n)break;n=t.size()}else break}}var y6=function(t,e){if(t.length===0||e.colorCount<2||e.colorCount>256)throw new Error("Wrong MMCQ parameters");var n=g6.default.build(t),r=n.hist;Object.keys(r).length;var i=new Go.default(function(s,o){return s.count()-o.count()});i.push(n),Ko(i,m6*e.colorCount);var a=new Go.default(function(s,o){return s.count()*s.volume()-o.count()*o.volume()});return a.contents=i.contents,Ko(a,e.colorCount-a.size()),x6(a)};function x6(t){for(var e=[];t.size();){var n=t.pop(),r=n.avg();r[0],r[1],r[2],e.push(new p6.Swatch(r,n.count()))}return e}Ga.default=y6;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorker=void 0;var e=Ga;Object.defineProperty(t,"MMCQ",{enumerable:!0,get:function(){return e.default}}),t.WebWorker=null})(bl);var _l={},Xa={};function v6(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var b6=v6,w6=b6,Yo=Math.max;function _6(t,e,n){return e=Yo(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Yo(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),w6(t,this,o)}}var T6=_6;function S6(t){return function(){return t}}var k6=S6,C6=k6,Xo=dl,A6=Ha,j6=Xo?function(t,e){return Xo(t,"toString",{configurable:!0,enumerable:!1,value:C6(e),writable:!0})}:A6,I6=j6,E6=800,$6=16,M6=Date.now;function L6(t){var e=0,n=0;return function(){var r=M6(),i=$6-(r-n);if(n=r,i>0){if(++e>=E6)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var O6=L6,P6=I6,R6=O6,D6=R6(P6),N6=D6,F6=Ha,z6=T6,B6=N6;function q6(t,e){return B6(z6(t,e,F6),t+"")}var U6=q6,V6=On,H6=qr,W6=La,G6=Pe;function K6(t,e,n){if(!G6(n))return!1;var r=typeof e;return(r=="number"?H6(n)&&W6(e,n.length):r=="string"&&e in n)?V6(n[e],t):!1}var Y6=K6,X6=U6,Z6=On,Q6=Y6,J6=Xr,Tl=Object.prototype,tA=Tl.hasOwnProperty,eA=X6(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Q6(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],s=J6(a),o=-1,c=s.length;++o<c;){var f=s[o],l=t[f];(l===void 0||Z6(l,Tl[f])&&!tA.call(t,f))&&(t[f]=a[f])}return t}),Sl=eA;Object.defineProperty(Xa,"__esModule",{value:!0});var ee=tn,ne=Mn,nA=Sl,rA={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function iA(t){var e=0;return t.forEach(function(n){e=Math.max(e,n.getPopulation())}),e}function aA(t,e){return t.Vibrant===e||t.DarkVibrant===e||t.LightVibrant===e||t.Muted===e||t.DarkMuted===e||t.LightMuted===e}function sA(t,e,n,r,i,a,s){function o(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];for(var h=0,d=0,y=0;y<f.length;y+=2){var p=f[y],m=f[y+1];h+=p*m,d+=m}return h/d}function c(f,l){return 1-Math.abs(f-l)}return o(c(t,e),s.weightSaturation,c(n,r),s.weightLuma,i/a,s.weightPopulation)}function qe(t,e,n,r,i,a,s,o,c,f){var l=null,h=0;return e.forEach(function(d){var y=d.getHsl(),p=y[1],m=y[2];if(p>=o&&p<=c&&m>=i&&m<=a&&!aA(t,d)){var x=sA(p,s,m,r,d.getPopulation(),n,f);(l===null||x>h)&&(l=d,h=x)}}),l}function oA(t,e,n){var r={};return r.Vibrant=qe(r,t,e,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.LightVibrant=qe(r,t,e,n.targetLightLuma,n.minLightLuma,1,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.DarkVibrant=qe(r,t,e,n.targetDarkLuma,0,n.maxDarkLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),r.Muted=qe(r,t,e,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r.LightMuted=qe(r,t,e,n.targetLightLuma,n.minLightLuma,1,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r.DarkMuted=qe(r,t,e,n.targetDarkLuma,0,n.maxDarkLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),r}function uA(t,e,n){if(t.Vibrant===null&&t.DarkVibrant===null&&t.LightVibrant===null){if(t.DarkVibrant===null&&t.DarkMuted!==null){var r=t.DarkMuted.getHsl(),i=r[0],a=r[1],s=r[2];s=n.targetDarkLuma,t.DarkVibrant=new ee.Swatch(ne.hslToRgb(i,a,s),0)}if(t.LightVibrant===null&&t.LightMuted!==null){var o=t.LightMuted.getHsl(),i=o[0],a=o[1],s=o[2];s=n.targetDarkLuma,t.DarkVibrant=new ee.Swatch(ne.hslToRgb(i,a,s),0)}}if(t.Vibrant===null&&t.DarkVibrant!==null){var c=t.DarkVibrant.getHsl(),i=c[0],a=c[1],s=c[2];s=n.targetNormalLuma,t.Vibrant=new ee.Swatch(ne.hslToRgb(i,a,s),0)}else if(t.Vibrant===null&&t.LightVibrant!==null){var f=t.LightVibrant.getHsl(),i=f[0],a=f[1],s=f[2];s=n.targetNormalLuma,t.Vibrant=new ee.Swatch(ne.hslToRgb(i,a,s),0)}if(t.DarkVibrant===null&&t.Vibrant!==null){var l=t.Vibrant.getHsl(),i=l[0],a=l[1],s=l[2];s=n.targetDarkLuma,t.DarkVibrant=new ee.Swatch(ne.hslToRgb(i,a,s),0)}if(t.LightVibrant===null&&t.Vibrant!==null){var h=t.Vibrant.getHsl(),i=h[0],a=h[1],s=h[2];s=n.targetLightLuma,t.LightVibrant=new ee.Swatch(ne.hslToRgb(i,a,s),0)}if(t.Muted===null&&t.Vibrant!==null){var d=t.Vibrant.getHsl(),i=d[0],a=d[1],s=d[2];s=n.targetMutesSaturation,t.Muted=new ee.Swatch(ne.hslToRgb(i,a,s),0)}if(t.DarkMuted===null&&t.DarkVibrant!==null){var y=t.DarkVibrant.getHsl(),i=y[0],a=y[1],s=y[2];s=n.targetMutesSaturation,t.DarkMuted=new ee.Swatch(ne.hslToRgb(i,a,s),0)}if(t.LightMuted===null&&t.LightVibrant!==null){var p=t.LightVibrant.getHsl(),i=p[0],a=p[1],s=p[2];s=n.targetMutesSaturation,t.LightMuted=new ee.Swatch(ne.hslToRgb(i,a,s),0)}}var cA=function(t,e){e=nA({},e,rA);var n=iA(t),r=oA(t,n,e);return uA(r,n,e),r};Xa.default=cA;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Xa;Object.defineProperty(t,"Default",{enumerable:!0,get:function(){return e.default}})})(_l);var kl={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});function lA(t,e,n,r){return r>=125&&!(t>250&&e>250&&n>250)}Za.default=lA;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.combineFilters=void 0;var e=Za;Object.defineProperty(t,"Default",{enumerable:!0,get:function(){return e.default}});function n(r){return!Array.isArray(r)||r.length===0?null:function(i,a,s,o){if(o===0)return!1;for(var c=0;c<r.length;c++)if(!r[c](i,a,s,o))return!1;return!0}}t.combineFilters=n})(kl);var Zo;function Cl(){if(Zo)return Wn;Zo=1;var t=ft&&ft.__createBinding||(Object.create?function(d,y,p,m){m===void 0&&(m=p),Object.defineProperty(d,m,{enumerable:!0,get:function(){return y[p]}})}:function(d,y,p,m){m===void 0&&(m=p),d[m]=y[p]}),e=ft&&ft.__setModuleDefault||(Object.create?function(d,y){Object.defineProperty(d,"default",{enumerable:!0,value:y})}:function(d,y){d.default=y}),n=ft&&ft.__importStar||function(d){if(d&&d.__esModule)return d;var y={};if(d!=null)for(var p in d)p!=="default"&&Object.hasOwnProperty.call(d,p)&&t(y,d,p);return e(y,d),y},r=ft&&ft.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Wn,"__esModule",{value:!0});var i=tn,a=r(f6()),s=n(Mn),o=n(bl),c=n(_l),f=n(kl),l=Sl,h=function(){function d(y,p){this._src=y,this.opts=l({},p,d.DefaultOpts),this.opts.combinedFilter=f.combineFilters(this.opts.filters)}return d.from=function(y){return new a.default(y)},d.prototype._process=function(y,p){var m=p.quantizer,x=p.generator;return y.scaleDown(p),y.applyFilter(p.combinedFilter).then(function(g){return m(g.data,p)}).then(function(g){return i.Swatch.applyFilter(g,p.combinedFilter)}).then(function(g){return Promise.resolve(x(g))})},d.prototype.palette=function(){return this.swatches()},d.prototype.swatches=function(){return this._palette},d.prototype.getPalette=function(y){var p=this,m=new this.opts.ImageClass,x=m.load(this._src).then(function(g){return p._process(g,p.opts)}).then(function(g){return p._palette=g,m.remove(),g},function(g){throw m.remove(),g});return y&&x.then(function(g){return y(null,g)},function(g){return y(g)}),x},d.Builder=a.default,d.Quantizer=o,d.Generator=c,d.Filter=f,d.Util=s,d.Swatch=i.Swatch,d.DefaultOpts={colorCount:64,quality:5,generator:c.Default,ImageClass:null,quantizer:o.MMCQ,filters:[f.Default]},d}();return Wn.default=h,Wn}var Qa={},Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.ImageBase=void 0;var fA=function(){function t(){}return t.prototype.scaleDown=function(e){var n=this.getWidth(),r=this.getHeight(),i=1;if(e.maxDimension>0){var a=Math.max(n,r);a>e.maxDimension&&(i=e.maxDimension/a)}else i=1/e.quality;i<1&&this.resize(n*i,r*i,i)},t.prototype.applyFilter=function(e){var n=this.getImageData();if(typeof e=="function")for(var r=n.data,i=r.length/4,a=void 0,s=void 0,o=void 0,c=void 0,f=void 0,l=0;l<i;l++)a=l*4,s=r[a+0],o=r[a+1],c=r[a+2],f=r[a+3],e(s,o,c,f)||(r[a+3]=0);return Promise.resolve(n)},t}();Zr.ImageBase=fA;var on={},Sr={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */Sr.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,a=typeof ft=="object"&&ft;(a.global===a||a.window===a||a.self===a)&&(n=a);var s,o=2147483647,c=36,f=1,l=26,h=38,d=700,y=72,p=128,m="-",x=/^xn--/,g=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=c-f,C=Math.floor,k=String.fromCharCode,F;function R(j){throw RangeError(w[j])}function I(j,M){for(var B=j.length,H=[];B--;)H[B]=M(j[B]);return H}function E(j,M){var B=j.split("@"),H="";B.length>1&&(H=B[0]+"@",j=B[1]),j=j.replace(v,".");var W=j.split("."),G=I(W,M).join(".");return H+G}function $(j){for(var M=[],B=0,H=j.length,W,G;B<H;)W=j.charCodeAt(B++),W>=55296&&W<=56319&&B<H?(G=j.charCodeAt(B++),(G&64512)==56320?M.push(((W&1023)<<10)+(G&1023)+65536):(M.push(W),B--)):M.push(W);return M}function z(j){return I(j,function(M){var B="";return M>65535&&(M-=65536,B+=k(M>>>10&1023|55296),M=56320|M&1023),B+=k(M),B}).join("")}function N(j){return j-48<10?j-22:j-65<26?j-65:j-97<26?j-97:c}function b(j,M){return j+22+75*(j<26)-((M!=0)<<5)}function A(j,M,B){var H=0;for(j=B?C(j/d):j>>1,j+=C(j/M);j>S*l>>1;H+=c)j=C(j/S);return C(H+(S+1)*j/(j+h))}function _(j){var M=[],B=j.length,H,W=0,G=p,X=y,q,Y,rt,nt,tt,K,ct,Ct,Ot;for(q=j.lastIndexOf(m),q<0&&(q=0),Y=0;Y<q;++Y)j.charCodeAt(Y)>=128&&R("not-basic"),M.push(j.charCodeAt(Y));for(rt=q>0?q+1:0;rt<B;){for(nt=W,tt=1,K=c;rt>=B&&R("invalid-input"),ct=N(j.charCodeAt(rt++)),(ct>=c||ct>C((o-W)/tt))&&R("overflow"),W+=ct*tt,Ct=K<=X?f:K>=X+l?l:K-X,!(ct<Ct);K+=c)Ot=c-Ct,tt>C(o/Ot)&&R("overflow"),tt*=Ot;H=M.length+1,X=A(W-nt,H,nt==0),C(W/H)>o-G&&R("overflow"),G+=C(W/H),W%=H,M.splice(W++,0,G)}return z(M)}function T(j){var M,B,H,W,G,X,q,Y,rt,nt,tt,K=[],ct,Ct,Ot,It;for(j=$(j),ct=j.length,M=p,B=0,G=y,X=0;X<ct;++X)tt=j[X],tt<128&&K.push(k(tt));for(H=W=K.length,W&&K.push(m);H<ct;){for(q=o,X=0;X<ct;++X)tt=j[X],tt>=M&&tt<q&&(q=tt);for(Ct=H+1,q-M>C((o-B)/Ct)&&R("overflow"),B+=(q-M)*Ct,M=q,X=0;X<ct;++X)if(tt=j[X],tt<M&&++B>o&&R("overflow"),tt==M){for(Y=B,rt=c;nt=rt<=G?f:rt>=G+l?l:rt-G,!(Y<nt);rt+=c)It=Y-nt,Ot=c-nt,K.push(k(b(nt+It%Ot,0))),Y=C(It/Ot);K.push(k(b(Y,0))),G=A(B,Ct,H==W),B=0,++H}++B,++M}return K.join("")}function P(j){return E(j,function(M){return x.test(M)?_(M.slice(4).toLowerCase()):M})}function O(j){return E(j,function(M){return g.test(M)?"xn--"+T(M):M})}if(s={version:"1.3.2",ucs2:{decode:$,encode:z},decode:_,encode:T,toASCII:O,toUnicode:P},r&&i)if(t.exports==r)i.exports=s;else for(F in s)s.hasOwnProperty(F)&&(r[F]=s[F]);else n.punycode=s})(ft)})(Sr,Sr.exports);var dA=Sr.exports,hA={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},pA=dA,Yt=hA;on.parse=Pn;on.resolve=SA;on.resolveObject=kA;on.format=TA;on.Url=zt;function zt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var gA=/^([a-z0-9.+-]+:)/i,mA=/:[0-9]*$/,yA=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,xA=["<",">",'"',"`"," ","\r",`
`,"	"],vA=["{","}","|","\\","^","`"].concat(xA),ia=["'"].concat(vA),Qo=["%","/","?",";","#"].concat(ia),Jo=["/","?","#"],bA=255,tu=/^[+a-z0-9A-Z_-]{0,63}$/,wA=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_A={javascript:!0,"javascript:":!0},aa={javascript:!0,"javascript:":!0},Ge={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},sa=$f;function Pn(t,e,n){if(t&&Yt.isObject(t)&&t instanceof zt)return t;var r=new zt;return r.parse(t,e,n),r}zt.prototype.parse=function(t,e,n){if(!Yt.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",a=t.split(i),s=/\\/g;a[0]=a[0].replace(s,"/"),t=a.join(i);var o=t;if(o=o.trim(),!n&&t.split("#").length===1){var c=yA.exec(o);if(c)return this.path=o,this.href=o,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=sa.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=gA.exec(o);if(f){f=f[0];var l=f.toLowerCase();this.protocol=l,o=o.substr(f.length)}if(n||f||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=o.substr(0,2)==="//";h&&!(f&&aa[f])&&(o=o.substr(2),this.slashes=!0)}if(!aa[f]&&(h||f&&!Ge[f])){for(var d=-1,y=0;y<Jo.length;y++){var p=o.indexOf(Jo[y]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,x;d===-1?x=o.lastIndexOf("@"):x=o.lastIndexOf("@",d),x!==-1&&(m=o.slice(0,x),o=o.slice(x+1),this.auth=decodeURIComponent(m)),d=-1;for(var y=0;y<Qo.length;y++){var p=o.indexOf(Qo[y]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var v=this.hostname.split(/\./),y=0,w=v.length;y<w;y++){var S=v[y];if(S&&!S.match(tu)){for(var C="",k=0,F=S.length;k<F;k++)S.charCodeAt(k)>127?C+="x":C+=S[k];if(!C.match(tu)){var R=v.slice(0,y),I=v.slice(y+1),E=S.match(wA);E&&(R.push(E[1]),I.unshift(E[2])),I.length&&(o="/"+I.join(".")+o),this.hostname=R.join(".");break}}}this.hostname.length>bA?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=pA.toASCII(this.hostname));var $=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+$,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!_A[l])for(var y=0,w=ia.length;y<w;y++){var N=ia[y];if(o.indexOf(N)!==-1){var b=encodeURIComponent(N);b===N&&(b=escape(N)),o=o.split(N).join(b)}}var A=o.indexOf("#");A!==-1&&(this.hash=o.substr(A),o=o.slice(0,A));var _=o.indexOf("?");if(_!==-1?(this.search=o.substr(_),this.query=o.substr(_+1),e&&(this.query=sa.parse(this.query)),o=o.slice(0,_)):e&&(this.search="",this.query={}),o&&(this.pathname=o),Ge[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",T=this.search||"";this.path=$+T}return this.href=this.format(),this};function TA(t){return Yt.isString(t)&&(t=Pn(t)),t instanceof zt?t.format():zt.prototype.format.call(t)}zt.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Yt.isObject(this.query)&&Object.keys(this.query).length&&(a=sa.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Ge[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),n=n.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),s=s.replace("#","%23"),e+i+n+s+r};function SA(t,e){return Pn(t,!1,!0).resolve(e)}zt.prototype.resolve=function(t){return this.resolveObject(Pn(t,!1,!0)).format()};function kA(t,e){return t?Pn(t,!1,!0).resolveObject(e):e}zt.prototype.resolveObject=function(t){if(Yt.isString(t)){var e=new zt;e.parse(t,!1,!0),t=e}for(var n=new zt,r=Object.keys(this),i=0;i<r.length;i++){var a=r[i];n[a]=this[a]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),o=0;o<s.length;o++){var c=s[o];c!=="protocol"&&(n[c]=t[c])}return Ge[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!Ge[t.protocol]){for(var f=Object.keys(t),l=0;l<f.length;l++){var h=f[l];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!aa[t.protocol]){for(var w=(t.pathname||"").split("/");w.length&&!(t.host=w.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),n.pathname=w.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var d=n.pathname||"",y=n.search||"";n.path=d+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var p=n.pathname&&n.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",x=m||p||n.host&&t.pathname,g=x,v=n.pathname&&n.pathname.split("/")||[],w=t.pathname&&t.pathname.split("/")||[],S=n.protocol&&!Ge[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(v[0]===""?v[0]=n.host:v.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(w[0]===""?w[0]=t.host:w.unshift(t.host)),t.host=null),x=x&&(w[0]===""||v[0]==="")),m)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,v=w;else if(w.length)v||(v=[]),v.pop(),v=v.concat(w),n.search=t.search,n.query=t.query;else if(!Yt.isNullOrUndefined(t.search)){if(S){n.hostname=n.host=v.shift();var C=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return n.search=t.search,n.query=t.query,(!Yt.isNull(n.pathname)||!Yt.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!v.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var k=v.slice(-1)[0],F=(n.host||t.host||v.length>1)&&(k==="."||k==="..")||k==="",R=0,I=v.length;I>=0;I--)k=v[I],k==="."?v.splice(I,1):k===".."?(v.splice(I,1),R++):R&&(v.splice(I,1),R--);if(!x&&!g)for(;R--;R)v.unshift("..");x&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),F&&v.join("/").substr(-1)!=="/"&&v.push("");var E=v[0]===""||v[0]&&v[0].charAt(0)==="/";if(S){n.hostname=n.host=E?"":v.length?v.shift():"";var C=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return x=x||n.host&&v.length,x&&!E&&v.unshift(""),v.length?n.pathname=v.join("/"):(n.pathname=null,n.path=null),(!Yt.isNull(n.pathname)||!Yt.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};zt.prototype.parseHost=function(){var t=this.host,e=mA.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var CA=ft&&ft.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),AA=ft&&ft.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),jA=ft&&ft.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IA=ft&&ft.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&AA(e,t,n);return jA(e,t),e};Object.defineProperty(Qa,"__esModule",{value:!0});var EA=Zr,oa=IA(on);function $A(t){var e=oa.parse(t);return e.protocol===null&&e.host===null&&e.port===null}function MA(t,e){var n=oa.parse(t),r=oa.parse(e);return n.protocol===r.protocol&&n.hostname===r.hostname&&n.port===r.port}var LA=function(t){CA(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._initCanvas=function(){var n=this.image,r=this._canvas=document.createElement("canvas"),i=this._context=r.getContext("2d");r.className="vibrant-canvas",r.style.display="none",this._width=r.width=n.width,this._height=r.height=n.height,i.drawImage(n,0,0),document.body.appendChild(r)},e.prototype.load=function(n){var r=this,i=null,a=null;if(typeof n=="string")i=document.createElement("img"),!$A(n)&&!MA(window.location.href,n)&&(i.crossOrigin="anonymous"),a=i.src=n;else if(n instanceof HTMLImageElement)i=n,a=n.src;else return Promise.reject(new Error("Cannot load buffer as an image in browser"));return this.image=i,new Promise(function(s,o){var c=function(){r._initCanvas(),s(r)};i.complete?c():(i.onload=c,i.onerror=function(f){return o(new Error("Fail to load image: "+a))})})},e.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)},e.prototype.update=function(n){this._context.putImageData(n,0,0)},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.resize=function(n,r,i){var a=this,s=a._canvas,o=a._context,c=a.image;this._width=s.width=n,this._height=s.height=r,o.scale(i,i),o.drawImage(c,0,0)},e.prototype.getPixelCount=function(){return this._width*this._height},e.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)},e.prototype.remove=function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)},e}(EA.ImageBase);Qa.default=LA;var Al=ft&&ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},jl=Al(Cl()),OA=Al(Qa);jl.default.DefaultOpts.ImageClass=OA.default;var PA=jl.default;const RA=Pr(PA);var DA=.2126,NA=.7152,FA=.0722,bi=1/12.92;function wi(t){return Math.pow((t+.055)/1.055,2.4)}function eu(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=e<=.03928?e*bi:wi(e),a=n<=.03928?n*bi:wi(n),s=r<=.03928?r*bi:wi(r);return i*DA+a*NA+s*FA}function nu(t){var e=255;(t=t.replace(/^#/,"")).length===8&&(e=parseInt(t.slice(6,8),16),t=t.substring(0,6)),t.length===4&&(e=parseInt(t.slice(3,4).repeat(2),16),t=t.substring(0,3)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n=parseInt(t,16);return[n>>16,n>>8&255,255&n,e]}function zA(t,e){return(Math.max(t,e)+.05)/(Math.min(t,e)+.05)}function BA(t,e){return zA(eu(t),eu(e))}function ru(t,e){return BA(nu(t),nu(e))}async function qA(t){const e=Mf(t.isNative?jr[t.chainId].icon:Lf(t.address,t.chainId));return RA.from(e).getPalette().then(n=>{if(n!=null&&n.Vibrant){let r=n.Vibrant.hex,i=ru(r,"#FFF");for(;i<3;)r=Of(.005,r),i=ru(r,"#FFF");return r}return null}).catch(()=>null)}function iu(t){const[e,n]=L.useState("#2172E5");return L.useLayoutEffect(()=>{let r=!1;return t&&qA(t).then(i=>{!r&&i!==null&&n(i)}),()=>{r=!0,n("#2172E5")}},[t]),e}const UA=J.path`
  opacity: 0.5;
  stroke: ${({fill:t,theme:e})=>t??e.blue1};
  fill: ${({fill:t,theme:e})=>t??e.blue1};
`,au=({series:t,xScale:e,yScale:n,xValue:r,yValue:i,fill:a})=>L.useMemo(()=>u.jsx(UA,{fill:a,d:Oy().curve(Py).x(s=>e(r(s))).y1(s=>n(i(s))).y0(n(0))(t.filter(s=>{const o=e(r(s));return o>0&&o<=window.innerWidth}))??void 0}),[a,t,e,r,n,i]),VA=J.g`
  line {
    display: none;
  }

  text {
    color: ${({theme:t})=>t.text2};
    transform: translateY(5px);
  }
`,HA=({axisGenerator:t})=>{const e=n=>{n&&dt(n).call(t).call(r=>r.select(".domain").remove())};return u.jsx("g",{ref:e})},WA=({xScale:t,innerHeight:e,offset:n=0})=>L.useMemo(()=>u.jsx(VA,{transform:`translate(0, ${e+n})`,children:u.jsx(HA,{axisGenerator:Ip(t).tickFormat(r=>{const i=Pf(r.toString());return r.valueOf()>1e10||r.valueOf()<-1e10?i.format("0e+0"):r.toString()}).ticks(6)})}),[e,n,t]),su=(t,e)=>e?["M 0 0",`v ${t}`,"m 1 0","V 0","M 0 1","h 12","q 2 0, 2 2","v 22","q 0 2 -2 2","h -12","z"].join(" "):["M 0 0",`v ${t}`,"m 1 0","V 0","M 0 1"].join(" "),ou=t=>t?["m 5 7","v 14","M 0 0","m 9 7","v 14","z"].join(" "):"",uu=({color:t,size:e=10,margin:n=10})=>u.jsx("polygon",{points:`0 0, ${e} ${e}, 0 ${e}`,transform:` translate(${e+n}, ${n}) rotate(45) `,fill:t,stroke:t,strokeWidth:"4",strokeLinejoin:"round"}),cu=J.path`
  cursor: ${({interactive:t})=>t?"ew-resize":"default"};
  pointer-events: none;

  stroke-width: 3;
  stroke: ${({color:t})=>t};
  fill: ${({color:t})=>t};
`,lu=J.path`
  cursor: ${({interactive:t})=>t?"ew-resize":"default"};
  pointer-events: none;

  stroke-width: 1.5;
  stroke: ${({theme:t})=>t.white};
  opacity: 0.6;
`,fu=J.g`
  opacity: ${({visible:t})=>t?"1":"0"};
  transition: opacity 300ms;
`,du=J.rect`
  fill: ${({theme:t})=>t.bg2};
`,hu=J.text`
  text-anchor: middle;
  font-size: 13px;
  fill: ${({theme:t})=>t.text};
`,pu=20,gu=2,mu=(t,e,n)=>{const r=t.map(a=>n(a).toFixed(1)),i=e.map(a=>n(a).toFixed(1));return r.every((a,s)=>a===i[s])},GA=({id:t,xScale:e,interactive:n,brushLabelValue:r,brushExtent:i,setBrushExtent:a,innerWidth:s,innerHeight:o,westHandleColor:c,eastHandleColor:f})=>{const l=L.useRef(null),h=L.useRef(null),[d,y]=L.useState(i),[p,m]=L.useState(!1),[x,g]=L.useState(!1),v=Rf(i),w=L.useCallback(E=>{const{type:$,selection:z,mode:N}=E;if(!z){y(null);return}const b=z.map(e.invert);$==="end"&&!mu(i,b,e)&&a(b,N),y(b)},[e,i,a]);L.useEffect(()=>{y(i)},[i]),L.useEffect(()=>{l.current&&(h.current=uy().extent([[Math.max(0+gu,e(0)),0],[s-gu,o]]).handleSize(30).filter(()=>n).on("brush end",w),h.current(dt(l.current)),v&&mu(i,v,e)&&dt(l.current).transition().call(h.current.move,i.map(e)),dt(l.current).selectAll(".selection").attr("stroke","none").attr("fill-opacity","0.1").attr("fill",`url(#${t}-gradient-selection)`).attr("cursor",n?"ew-resize":"default"),n||(dt(l.current).selectAll(".handle").attr("cursor","default"),dt(l.current).selectAll(".overlay").attr("cursor","default")))},[i,w,t,o,s,n,v,e]),L.useEffect(()=>{!l.current||!h.current||h.current.move(dt(l.current),i.map(e))},[i,e]),L.useEffect(()=>{m(!0);const E=setTimeout(()=>m(!1),1500);return()=>clearTimeout(E)},[d]);const S=d&&e(d[0])>pu,C=d&&e(d[1])>s-pu,k=d&&(e(d[0])<0||e(d[1])<0),F=d&&(e(d[0])>s||e(d[1])>s),R=d&&e(d[0])>=0&&e(d[0])<=s,I=d&&e(d[1])>=0&&e(d[1])<=s;return L.useMemo(()=>u.jsxs(u.Fragment,{children:[u.jsxs("defs",{children:[u.jsxs("linearGradient",{id:`${t}-gradient-selection`,x1:"0%",y1:"100%",x2:"100%",y2:"100%",children:[u.jsx("stop",{stopColor:c}),u.jsx("stop",{stopColor:f,offset:"1"})]}),u.jsx("clipPath",{id:`${t}-brush-clip`,children:u.jsx("rect",{x:"0",y:"0",width:s,height:o})})]}),u.jsx("g",{ref:l,clipPath:`url(#${t}-brush-clip)`,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1)}),d&&u.jsxs(u.Fragment,{children:[R?u.jsxs("g",{transform:`translate(${Math.max(0,e(d[0]))}, 0), scale(${S?"-1":"1"}, 1)`,children:[u.jsxs("g",{children:[u.jsx(cu,{color:c,d:su(o,n),interactive:n}),u.jsx(lu,{d:ou(n),interactive:n})]}),u.jsxs(fu,{transform:`translate(50,0), scale(${S?"1":"-1"}, 1)`,visible:p||x,children:[u.jsx(du,{y:"0",x:"-30",height:"30",width:"60",rx:"8"}),u.jsx(hu,{transform:"scale(-1, 1)",y:"15",dominantBaseline:"middle",children:r("w",d[0])})]})]}):null,I?u.jsxs("g",{transform:`translate(${e(d[1])}, 0), scale(${C?"-1":"1"}, 1)`,children:[u.jsxs("g",{children:[u.jsx(cu,{color:f,d:su(o,n),interactive:n}),u.jsx(lu,{d:ou(n),interactive:n})]}),u.jsxs(fu,{transform:`translate(50,0), scale(${C?"-1":"1"}, 1)`,visible:p||x,children:[u.jsx(du,{y:"0",x:"-30",height:"30",width:"60",rx:"8"}),u.jsx(hu,{y:"15",dominantBaseline:"middle",children:r("e",d[1])})]})]}):null,k&&u.jsx(uu,{color:c}),F&&u.jsx("g",{transform:`translate(${s}, 0) scale(-1, 1)`,children:u.jsx(uu,{color:f})})]})]}),[n,r,f,I,C,S,x,t,o,s,d,F,p,k,c,R,e])},KA=J.line`
  opacity: 0.7;
  stroke-width: 3;
  stroke: ${({theme:t})=>t.text};
  fill: none;
`,YA=({value:t,xScale:e,innerHeight:n})=>L.useMemo(()=>u.jsx(KA,{x1:e(t),y1:"0",x2:e(t),y2:n}),[t,e,n]),XA=J.div`
  display: grid;
  grid-template-columns: repeat(${({count:t})=>t.toString()}, 1fr);
  grid-gap: 6px;

  position: absolute;
  top: -25px;
  right: 0;
  ${({theme:t})=>t.mediaWidth.upToMedium`
    top: -64px;
  `}
`,_i=J(Df)`
  background-color: transparent;
  &:hover {
    color: ${({theme:t})=>t.text};
  }

  width: 28px;
  height: 28px;
  padding: 4px;
`,ZA=J.rect`
  fill: transparent;
  cursor: grab;

  &:active {
    cursor: grabbing;
  }
`;function QA({svg:t,xScale:e,setZoom:n,width:r,height:i,resetBrush:a,showResetButton:s,zoomLevels:o,style:c,className:f}){const l=L.useRef(),[h,d,y,p]=L.useMemo(()=>[()=>t&&l.current&&dt(t).transition().call(l.current.scaleBy,2),()=>t&&l.current&&dt(t).transition().call(l.current.scaleBy,.5),()=>t&&l.current&&dt(t).transition().call(l.current.scaleTo,.5),()=>t&&l.current&&dt(t).call(l.current.transform,$a.translate(0,0).scale(1)).transition().call(l.current.scaleTo,.5)],[t]);return L.useEffect(()=>{t&&(l.current=qy().scaleExtent([o.min,o.max]).extent([[0,0],[r,i]]).on("zoom",({transform:m})=>n(m)),dt(t).call(l.current))},[i,r,n,t,e,l,o,o.max,o.min]),L.useEffect(()=>{y()},[y,o]),u.jsxs(XA,{count:s?3:2,style:c,className:f,children:[s&&u.jsx(_i,{onClick:()=>{a(),p()},disabled:!1,children:u.jsx(zd,{size:16})}),u.jsx(_i,{onClick:h,disabled:!1,children:u.jsx(Ud,{size:16})}),u.jsx(_i,{onClick:d,disabled:!1,children:u.jsx(Wd,{size:16})})]})}const JA=J(QA)``,yu=t=>t.price0,Ti=t=>t.activeLiquidity,tj=J(JA)`
  ${({$interactive:t})=>t?"":"top: -46px;"}
`;function ej({data:{series:t,current:e},ticksAtLimit:n,styles:r,dimensions:{viewBoxWidth:i,height:a},margins:s,interactive:o=!0,brushDomain:c,brushLabels:f,onBrushDomainChange:l,zoomLevels:h}){const d=L.useId(),y=200,p=L.useRef(null),[m,x]=L.useState(null),[g,v]=L.useMemo(()=>[y-s.top-s.bottom-10,i-s.left-s.right],[i,y,s]),{xScale:w,yScale:S}=L.useMemo(()=>{const C=c!=null&&c[0]?c[0]<e?c[0]:e:e*h.initialMin,k=c!=null&&c[1]?c[1]>e?c[1]:e:e*h.initialMax,F={xScale:Qi().domain([C,k]).range([0,v]),yScale:Qi().domain([0,wp(t,Ti)]).range([g,0])};if(m){const R=m.rescaleX(F.xScale);F.xScale.domain(R.domain())}return F},[c,e,h.initialMin,h.initialMax,v,t,g,m]);return L.useEffect(()=>{x(null)},[h]),L.useEffect(()=>{c||l(w.domain(),void 0)},[c,l,w]),u.jsxs(u.Fragment,{children:[u.jsx(tj,{$interactive:!!o,svg:p.current,xScale:w,setZoom:x,width:v,height:y,resetBrush:()=>{l([e*h.initialMin,e*h.initialMax],"reset")},showResetButton:!!(n[gt.LOWER]||n[gt.UPPER]),zoomLevels:h}),u.jsxs("svg",{width:"100%",height:a||"100%",viewBox:`0 0 ${i} ${y}`,style:{overflow:"hidden"},children:[u.jsxs("defs",{children:[u.jsx("clipPath",{id:`${d}-chart-clip`,children:u.jsx("rect",{x:"0",y:"0",width:v,height:y})}),c&&u.jsx("mask",{id:`${d}-chart-area-mask`,children:u.jsx("rect",{fill:"white",x:w(c[0]),y:"0",width:w(c[1])-w(c[0]),height:g})})]}),u.jsxs("g",{transform:`translate(${s.left},${s.top})`,children:[u.jsxs("g",{clipPath:`url(#${d}-chart-clip)`,children:[u.jsx(au,{series:t,xScale:w,yScale:S,xValue:yu,yValue:Ti}),c&&u.jsx("g",{mask:`url(#${d}-chart-area-mask)`,children:u.jsx(au,{series:t,xScale:w,yScale:S,xValue:yu,yValue:Ti,fill:r.area.selection})}),u.jsx(YA,{value:e,xScale:w,innerHeight:g}),u.jsx(WA,{xScale:w,innerHeight:g})]}),u.jsx(ZA,{width:v,height:y,ref:p}),u.jsx(GA,{id:d,xScale:w,interactive:o,brushLabelValue:f,brushExtent:c??w.domain(),innerWidth:v,innerHeight:g,setBrushExtent:l,westHandleColor:r.brush.handle.west,eastHandleColor:r.brush.handle.east})]})]})]})}const vn=new Nf(vd.abi),nj=(t,e)=>{const n=t.returnData?t.returnData.map(i=>i[1]):t,r={};if(!n)return r;for(let i=0,a=e.length;i<a;i++){const s=e[i];if(!n[i])continue;let o;try{o=vn==null?void 0:vn.decodeFunctionResult(s.fragment,n[i])}catch{continue}const c=o||void 0;c&&(r[s.key]=c)}return r},xu={slot0State:void 0,liquidityState:void 0},rj=(t,e,n,r,i)=>{const[a,s]=L.useState(!1),[o,c]=L.useState(xu),f=ua(t),l=L.useCallback(async()=>{if(!f||!e||!n||!r||!i){c(xu),s(!1);return}const h=[{callData:vn.encodeFunctionData("getPoolState"),target:e,fragment:"getPoolState",key:"slot0State"},{callData:vn.encodeFunctionData("getLiquidityState"),target:e,fragment:"getLiquidityState",key:"liquidityState"}];s(!0);const d=await f.callStatic.tryBlockAndAggregate(!1,h.map(({callData:m,target:x})=>({callData:m,target:x}))),{slot0State:y,liquidityState:p}=nj(d,h);c({slot0State:y,liquidityState:p}),s(!1)},[n,r,i,f,e]);return L.useEffect(()=>{l()},[l]),L.useMemo(()=>{if(!n||!r||!i)return[ie.INVALID,void 0];if(a)return[ie.LOADING,void 0];if(!o.slot0State||!o.liquidityState)return[ie.NOT_EXISTS,void 0];if(!o.slot0State.sqrtP||o.slot0State.sqrtP.eq(0))return[ie.NOT_EXISTS,void 0];try{const h=new An(n,r,i,o.slot0State.sqrtP,o.liquidityState.baseL,o.liquidityState.reinvestL,o.slot0State.currentTick);return[ie.EXISTS,h]}catch(h){return console.error("Error when constructing the pool",h),[ie.NOT_EXISTS,void 0]}},[o.liquidityState,o.slot0State,i,a,n,r])};function ij(t,e,n,r,i){const a=jr[t],s=L.useMemo(()=>{if(!e||!n||!r)return;const l=e==null?void 0:e.wrapped,h=n==null?void 0:n.wrapped;if(!l||!h||l.equals(h))return;const[d,y]=l.sortsBefore(h)?[l,h]:[h,l];return[d,y,r]},[e,n,r]),o=L.useMemo(()=>{if(i)return i;if(!s)return;const h={factoryAddress:a.elastic.coreFactory,tokenA:s[0],tokenB:s[1],fee:s[2],initCodeHashManualOverride:a.elastic.initCodeHash};return zu(h)},[a,i,s]),[c,f]=rj(t,o,s==null?void 0:s[0],s==null?void 0:s[1],s==null?void 0:s[2]);return L.useMemo(()=>({poolState:c,pool:f,computedPoolAddress:o}),[f,o,c])}const aj=8;function vu(t,e,n,r,i,a){let s={...n},o=[];for(let c=i+(a?1:-1);a?c<r.length:c>=0;a?c++:c--){const f=Number(r[c].tickIdx),l={liquidityActive:s.liquidityActive,tickIdx:f,liquidityNet:et.BigInt(r[c].liquidityNet),price0:pe(t,e,f).toFixed(aj)};a?l.liquidityActive=et.add(s.liquidityActive,et.BigInt(r[c].liquidityNet)):!a&&et.notEqual(s.liquidityNet,et.BigInt(0))&&(l.liquidityActive=et.subtract(s.liquidityActive,s.liquidityNet)),o.push(l),s=l}return a||(o=o.reverse()),o}const sj=8,oj=(t,e)=>t!==void 0&&e?Math.floor(t/oe[e])*oe[e]:void 0;function uj(t,e=""){const{elasticClient:n}=Oe(t),{loading:r,data:i,error:a}=$u(Ff(e.toLowerCase()),{client:n,pollInterval:3e4,skip:!e});return{isLoading:r,isUninitialized:!1,isError:!!a,error:a,ticks:i==null?void 0:i.ticks}}function cj(t,e,n){const{chainId:r}=mt(),i=(t==null?void 0:t.chainId)||r,{pool:a,poolState:s,computedPoolAddress:o}=ij(i,t,e,n),c=L.useMemo(()=>oj(a==null?void 0:a.tickCurrent,n),[a,n]),{isLoading:f,isUninitialized:l,isError:h,error:d,ticks:y}=uj(i,o);return L.useMemo(()=>{if(!t||!e||c===void 0||s!==ie.EXISTS||!y||y.length===0||f||l)return{isLoading:f||s===ie.LOADING,isUninitialized:l,isError:h,error:d,activeTick:c,data:void 0};const p=t==null?void 0:t.wrapped,m=e==null?void 0:e.wrapped,x=y.findIndex(({tickIdx:C})=>C>c)-1;if(x<0)return console.error("TickData pivot not found"),{isLoading:f,isUninitialized:l,isError:h,error:d,activeTick:c,data:void 0};const g={liquidityActive:et.BigInt((a==null?void 0:a.liquidity)??0),tickIdx:c,liquidityNet:Number(y[x].tickIdx)===c?et.BigInt(y[x].liquidityNet):et.BigInt(0),price0:pe(p,m,c).toFixed(sj)},v=vu(p,m,g,y,x,!0),S=vu(p,m,g,y,x,!1).concat(g).concat(v);return{isLoading:f,isUninitialized:l,isError:h,error:d,activeTick:c,data:S}},[c,t,e,d,h,f,l,a==null?void 0:a.liquidity,s,y])}function lj({currencyA:t,currencyB:e,feeAmount:n}){const{isLoading:r,isUninitialized:i,isError:a,error:s,data:o}=cj(t,e,n),c=L.useCallback(()=>{if(!(o!=null&&o.length))return;const f=[];for(let l=0;l<o.length;l++){const h=o[l],d={activeLiquidity:parseFloat(h.liquidityActive.toString()),price0:parseFloat(h.price0)};d.activeLiquidity>0&&f.push(d)}return f},[o]);return L.useMemo(()=>({isLoading:r,isUninitialized:i,isError:a,error:s,formattedData:!r&&!i?c():void 0}),[r,i,a,s,c])}const fj={[it.VERY_STABLE]:{initialMin:.999,initialMax:1.001,min:1e-5,max:1.5},[it.VERY_STABLE1]:{initialMin:.999,initialMax:1.001,min:1e-5,max:1.5},[it.VERY_STABLE2]:{initialMin:.999,initialMax:1.001,min:1e-5,max:1.5},[it.STABLE]:{initialMin:.999,initialMax:1.001,min:1e-5,max:1.5},[it.MOST_PAIR]:{initialMin:.5,initialMax:2,min:1e-5,max:20},[it.MOST_PAIR1]:{initialMin:.5,initialMax:2,min:1e-5,max:20},[it.MOST_PAIR2]:{initialMin:.5,initialMax:2,min:1e-5,max:20},[it.EXOTIC]:{initialMin:.5,initialMax:2,min:1e-5,max:20},[it.VOLATILE]:{initialMin:.5,initialMax:2,min:1e-5,max:20},[it.RARE]:{initialMin:.5,initialMax:2,min:1e-5,max:20}},dj=J.div`
  position: relative;

  justify-content: center;
  align-content: center;
`;function Yn({message:t,icon:e}){return u.jsxs(qf,{style:{height:"100%",justifyContent:"center"},children:[e,t&&u.jsx(D,{padding:10,marginTop:"20px",textAlign:"center",children:t})]})}function hj({currencyA:t,currencyB:e,feeAmount:n,ticksAtLimit:r,price:i,leftPrice:a,rightPrice:s,onLeftRangeInput:o,onRightRangeInput:c,interactive:f,style:l={},height:h,className:d}){var N;const y=kt(),p=L.useRef(null),m=iu(t),x=iu(e),g=t&&e&&(t==null?void 0:t.wrapped.sortsBefore(e==null?void 0:e.wrapped)),{isLoading:v,isUninitialized:w,isError:S,formattedData:C}=lj({currencyA:t,currencyB:e,feeAmount:n}),k=L.useCallback((b,A)=>{let _=Number(b[0]);const T=Number(b[1]);_<=0&&(_=1/10**6),Mu.batch(()=>{(!r[g?gt.LOWER:gt.UPPER]||A==="handle"||A==="reset")&&_>0&&o(_.toFixed(6)),(!r[g?gt.UPPER:gt.LOWER]||A==="reset")&&T>0&&T<1e35&&c(T.toFixed(6))})},[g,o,c,r]);f=f&&!!(C!=null&&C.length);const F=L.useMemo(()=>a&&s?[parseFloat(a==null?void 0:a.toSignificant(6)),parseFloat(s==null?void 0:s.toSignificant(6))]:void 0,[a,s]),R=L.useCallback((b,A)=>{if(!i)return"";if(b==="w"&&r[g?gt.LOWER:gt.UPPER])return"0";if(b==="e"&&r[g?gt.UPPER:gt.LOWER])return"∞";const _=(A<i?-1:1)*((Math.max(A,i)-Math.min(A,i))/i)*100;return i?`${Ea(Math.abs(_)>1?".2~s":".2~f")(_)}%`:""},[g,i,r]),[,I]=L.useState({}),E=typeof window=="object";L.useEffect(()=>{if(!E)return;function b(){I({})}return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[E]);const $=(N=p.current)==null?void 0:N.clientWidth,z=L.useMemo(()=>h&&$?$*.8:400,[h,$]);return u.jsx(Lu,{ref:p,gap:"md",style:{minHeight:"237px",...l},className:d,children:w?u.jsx(Yn,{message:u.jsx(V,{id:"OZUH85"}),icon:u.jsx(Dd,{size:56,stroke:y.text})}):v?u.jsx(Yn,{icon:u.jsx(zf,{size:"40px",stroke:y.subText})}):S?u.jsx(Yn,{message:u.jsx(V,{id:"79D0qY"}),icon:u.jsx(Uy,{})}):!(C!=null&&C.length)||!i?u.jsx(Yn,{message:u.jsx(V,{id:"rH6vg9"}),icon:u.jsx(Bf,{size:56,stroke:y.subText})}):u.jsx(dj,{children:u.jsx(ej,{data:{series:C,current:i},dimensions:{viewBoxWidth:z,height:h},margins:{top:10,right:2,bottom:20,left:0},styles:{area:{selection:y.blue1},brush:{handle:{west:hs(.1,m)??y.red1,east:hs(.1,x)??y.blue1}}},interactive:f,brushLabels:R,brushDomain:F,onBrushDomainChange:k,zoomLevels:fj[n??it.MOST_PAIR2],ticksAtLimit:r})})})}function kr(t,e,n,r){return n&&(e!=null&&e[n])?n===gt.LOWER?"0":"∞":!t&&r!==void 0?r:Uf(t,{significantDigits:6})}function pj({position:t,ticksAtLimit:e}){const n=kt(),r=Q(t.pool.token0),i=Q(t.pool.token1),[a,s]=L.useState(r),o=a.symbol===r.symbol,c=o?i:r,f=o?t.pool.priceOf(t.pool.token0):t.pool.priceOf(t.pool.token1),l=o?t.token0PriceLower:t.token0PriceUpper.invert(),h=o?t.token0PriceUpper:t.token0PriceLower.invert(),d=L.useCallback(()=>{s(c)},[c]),y=a==null?void 0:a.symbol,p=c==null?void 0:c.symbol;return u.jsx(Ai,{marginTop:"1rem",padding:"1rem",children:u.jsxs(Lu,{gap:"12px",children:[u.jsxs(U,{children:[u.jsx(D,{fontSize:12,fontWeight:500,color:n.subText,children:u.jsx(V,{id:"WW7t2n"})}),u.jsx(ei,{text:Ve._({id:"P3XNVC"}),placement:"right",size:12})]}),u.jsxs("div",{children:[u.jsxs(U,{alignItems:"center",justifyContent:"center",sx:{gap:"8px"},children:[u.jsx(D,{fontSize:12,fontWeight:500,color:n.subText,children:u.jsx(V,{id:"kNeEXg"})}),u.jsxs(Vf,{children:[u.jsx(D,{fontSize:"12px",fontWeight:"500",style:{textAlign:"right"},children:`${f.toSignificant(6)} ${c.symbol} per ${a.symbol}`}),u.jsx("span",{onClick:d,style:{marginLeft:"2px",cursor:"pointer"},children:u.jsx(Sd,{rotated:a!==r,size:14})})]})]}),u.jsx(hj,{style:{minHeight:"180px"},currencyA:a,currencyB:c,feeAmount:t.pool.fee,ticksAtLimit:e,price:f?parseFloat(f.toSignificant(8)):void 0,leftPrice:l,rightPrice:h,onLeftRangeInput:()=>{},onRightRangeInput:()=>{},interactive:!1})]}),u.jsxs(ji,{style:{gap:"12px"},children:[u.jsxs(U,{children:[u.jsx(D,{fontSize:"12px",fontWeight:500,color:n.subText,children:u.jsx(V,{id:"jjuKOj"})}),u.jsx(ei,{text:Ve._({id:"PVnccD",values:{baseSymbol:y}}),placement:"right",size:12})]}),u.jsx(D,{fontWeight:"500",fontSize:"12px",children:u.jsx(V,{id:"U9L5V3",values:{0:kr(l,e,gt.LOWER),1:c.symbol,2:a.symbol}})})]}),u.jsxs(ji,{style:{gap:"12px"},children:[u.jsxs(U,{children:[u.jsx(D,{fontSize:"12px",fontWeight:500,color:n.subText,children:u.jsx(V,{id:"Eq83tw"})}),u.jsx(ei,{text:Ve._({id:"zJblm1",values:{quoteSymbol:p}}),placement:"right",size:12})]}),u.jsx(D,{fontSize:"12px",fontWeight:"500",children:u.jsx(V,{id:"U9L5V3",values:{0:kr(h,e,gt.UPPER),1:c.symbol,2:a.symbol}})})]})]})})}const gj=Hf`
  to {
    background-position-x: -200%;
  }
`,mj=J.div`
  border: none;
  background: ${({theme:t})=>t.background};
  position: relative;
  overflow: hidden;
  border-radius: 20px;
  padding: 28px 20px 16px;
  display: flex;
  gap: 1rem;
  flex-direction: column;
`,Se=J.div`
  background: linear-gradient(
    90deg,
    ${({theme:t})=>t.buttonGray} 8%,
    ${({theme:t})=>xe(t.buttonGray,.6)} 18%,
    ${({theme:t})=>t.buttonGray} 33%
  );
  border-radius: 20px;
  background-size: 200% 100%;
  animation: ${gj} 1.5s linear infinite;
`,yj=J(Se)`
  height: 41px;
`,xj=J(Se)`
  height: 28px;
  border-radius: 999px;
`;function vj(){return u.jsxs(mj,{children:[u.jsx(yj,{}),u.jsx(xj,{}),u.jsx(Se,{style:{height:"185px"}}),u.jsx(Se,{style:{height:"160px"}}),u.jsxs(U,{children:[u.jsx(Se,{style:{height:"36px",flex:1,borderRadius:"999px"}}),u.jsx(Se,{style:{height:"36px",flex:1,marginLeft:"1rem",borderRadius:"999px"}})]}),u.jsx($r,{}),u.jsx(Se,{style:{height:"15px",width:"80px",borderRadius:"999px"}})]})}const bj=J(Wf)`
  border: none;
  background: ${({theme:t})=>t.background};
  position: relative;
  overflow: hidden;
  border-radius: 20px;
  padding: 20px;
  display: flex;
  flex-direction: column;

  ${({theme:t})=>t.mediaWidth.upToMedium`
    padding: 16px;
  `}
`,Il=J.div`
  display: flex;
  border-radius: 999px;
  background-color: ${({theme:t})=>t.tabBackground};
  padding: 2px;
`,Cr=J(Ii)`
  display: flex;
  justify-content: center;
  align-items: center;
  flex: 1;
  background-color: ${({theme:t,isActive:e})=>e?t.tabActive:t.tabBackground};
  color: ${({theme:t,isActive:e})=>e?t.text:t.subText};
  padding: 4px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 20px;
  transition: all 0.2s;

  &:hover {
    text-decoration: none;
  }
`,wj=J.div`
  border-radius: 4px;
  border: 1px solid ${({theme:t})=>t.border};
  padding: 12px;
  margin-top: 16px;
`,Xn=J.div`
  line-height: 24px;
  display: flex;
  justify-content: space-between;
  font-size: 12px;
`,_j=J.div`
  display: flex;
  gap: 1rem;
  margin-bottom: 20px;

  > * {
    /* to make sure all immediate buttons take equal width */
    flex: 1 1 50%;
  }
`;var bu;(function(t){t.MY_LIQUIDITY="my-liquidity",t.PRICE_RANGE="price-range"})(bu||(bu={}));function Tj(t){if(!t)return{};const e=t.amount0.currency,n=t.amount1.currency;return{priceLower:t.token0PriceLower,priceUpper:t.token0PriceUpper,quote:n,base:e}}function Sj({stakedLayout:t,hasUserDepositedInFarm:e,positionDetails:n,refe:r,rawFeeRewards:i,liquidityTime:a,farmingTime:s,createdAt:o}){const{chainId:c,networkInfo:f}=mt(),{token0:l,token1:h,fee:d,liquidity:y,tickLower:p,tickUpper:m}=n,{farms:x}=kd(),{farms:g,userInfo:v}=qu();let w="",S=[],C=!1;x==null||x.forEach(bt=>{bt.pools.forEach(wt=>{wt.poolAddress.toLowerCase()===n.poolId.toLowerCase()&&(w=bt.id,S=wt.rewardTokens,wt.endTime>Date.now()/1e3&&(C=!0))})});const k=!!(g!=null&&g.filter(bt=>bt.endTime>Date.now()/1e3&&bt.poolAddress.toLowerCase()===n.poolId.toLowerCase()&&bt.ranges.some(wt=>n.tickLower<=wt.tickLower&&n.tickUpper>=wt.tickUpper)).length),F=n.tokenId.toString(),[R,I]=L.useState(null),E=ar(l),$=ar(h);r&&E&&!r.current[l.toLocaleLowerCase()]&&E.symbol&&(r.current[l.toLocaleLowerCase()]=E.symbol.toLowerCase()),r&&$&&!r.current[h.toLocaleLowerCase()]&&$.symbol&&(r.current[h.toLocaleLowerCase()]=$.symbol.toLowerCase());const z=E?Q(E):void 0,N=$?Q($):void 0,b=Cn([(z==null?void 0:z.wrapped.address)||"",(N==null?void 0:N.wrapped.address)||"",...S.map(bt=>bt.wrapped.address)]),[,A]=bd(z??void 0,N??void 0,d),_=L.useMemo(()=>{if(A)return new ve({pool:A,liquidity:y.toString(),tickLower:p,tickUpper:m})},[y,A,p,m]),T=z&&yt.fromRawAmount(z,i[0]),P=N&&yt.fromRawAmount(N,i[1]),O=A&&e?new ve({pool:A,liquidity:n.stakedLiquidity.toString(),tickLower:p,tickUpper:m}):void 0,j=parseFloat((_==null?void 0:_.amount0.toExact())||"0")*b[(E==null?void 0:E.wrapped.address)||""]+parseFloat((_==null?void 0:_.amount1.toExact())||"0")*b[($==null?void 0:$.wrapped.address)||""],M=parseFloat((O==null?void 0:O.amount0.toExact())||"0")*b[(E==null?void 0:E.wrapped.address)||""]+parseFloat((O==null?void 0:O.amount1.toExact())||"0")*b[($==null?void 0:$.wrapped.address)||""],B=Number((T==null?void 0:T.toExact())||"0")*b[(E==null?void 0:E.wrapped.address)||""]+Number((P==null?void 0:P.toExact())||"0")*b[($==null?void 0:$.wrapped.address)||""],H=a&&B*365*24*60*60/a,W=a&&j?((H||0)*100/j).toFixed(2):"--",G=S.map((bt,wt)=>{var Ne;return yt.fromRawAmount(bt,((Ne=R==null?void 0:R[wt])==null?void 0:Ne.toString())||0)}),X=S.reduce((bt,wt,Ne)=>{const he=R==null?void 0:R[Ne];return bt+ +yt.fromRawAmount(wt,he!=null&&he.gt("0")?he==null?void 0:he.toString():"0").toExact()*b[wt.wrapped.address]},0),q=s&&X*365*24*60*60/s,Y=R!==null&&s&&j?(q||0)*100/j:0,rt=Xu(d,p,m),nt=v==null?void 0:v.find(bt=>bt.nftId.toString()===F.toString()),tt=s&&((nt==null?void 0:nt.unclaimedRewardsUsd)||0)*365*24*60*60/s,K=nt!=null&&nt.unclaimedRewardsUsd&&s&&j?(tt||0)*100/j:0,{priceLower:ct,priceUpper:Ct}=Tj(_),Ot=y==null?void 0:y.eq(0),It=kt(),{mixpanelHandler:Z}=Gf(),[at,Bt]=L.useState("my-liquidity"),At=Date.now()/1e3,Rn=(()=>Ot?Ve._({id:"Xoid9B"}):"")(),[De,de]=L.useState(!1);return!_||!ct||!Ct?u.jsx(vj,{}):u.jsxs(bj,{children:[u.jsx(fp,{poolAddress:n.poolId,tokenId:n.tokenId.toString(),isOpen:De,onDismiss:()=>de(!1)}),u.jsxs(u.Fragment,{children:[u.jsx(Cd,{position:_,tokenId:n.tokenId.toString(),isFarmActive:C,isFarmV2Active:k}),u.jsxs(Il,{style:{marginTop:"1rem"},children:[u.jsx(Cr,{isActive:at==="my-liquidity",padding:"0",onClick:()=>Bt("my-liquidity"),children:u.jsx(V,{id:"YHc3B+"})}),u.jsx(Cr,{isActive:at==="price-range",padding:"0",onClick:()=>Bt("price-range"),children:u.jsx(V,{id:"YA4hwj"})})]}),at==="my-liquidity"&&u.jsxs(u.Fragment,{children:[t?u.jsxs(wj,{children:[u.jsxs(Xn,{children:[u.jsx(D,{color:It.subText,children:u.jsx(V,{id:"bEml4G"})}),u.jsx(D,{children:ae(M)})]}),u.jsxs(Xn,{children:[u.jsx(D,{color:It.subText,children:u.jsx(V,{id:"punwOu",values:{0:_.amount0.currency.symbol}})}),u.jsx(D,{children:O==null?void 0:O.amount0.toSignificant(6)})]}),u.jsxs(Xn,{children:[u.jsx(D,{color:It.subText,children:u.jsx(V,{id:"punwOu",values:{0:_.amount1.currency.symbol}})}),u.jsx(D,{children:O==null?void 0:O.amount1.toSignificant(6)})]}),u.jsxs(Xn,{children:[u.jsx(D,{color:It.subText,children:u.jsx(V,{id:"vGuIOQ"})}),u.jsx(D,{color:It.apr,children:Y||K?(Y||K).toFixed(2)+"%":"--"})]})]}):u.jsx(Ad,{positionAPR:W,createdAt:o,farmAPR:Y||K,farmRewardAmount:(nt==null?void 0:nt.unclaimedRewards)||G,valueUSD:j,stakedUsd:M,liquidityValue0:yt.fromRawAmount(Q(_.pool.token0),_.amount0.quotient),liquidityValue1:yt.fromRawAmount(Q(_.pool.token1),_.amount1.quotient),layout:1}),!t&&u.jsx(jd,{farmAddress:w,totalFeeRewardUSD:B,feeValue0:T,feeValue1:P,position:_,tokenId:n.tokenId,layout:1,hasUserDepositedInFarm:e})]}),at==="price-range"&&u.jsx(pj,{position:_,ticksAtLimit:rt}),u.jsx("div",{style:{marginTop:"20px"}}),u.jsxs(U,{flexDirection:"column",marginTop:"auto",children:[t?u.jsx($e,{style:{marginBottom:"20px",textDecoration:"none",color:It.textReverse,fontSize:"14px"},padding:"8px",as:sr,to:`${Xt.FARMS}/${f.route}?${Kf({tab:"elastic",type:n.endTime?n.endTime>At?"active":"ended":"active",search:n.poolId})}`,children:u.jsx(V,{id:"fivkhA"})}):u.jsxs(_j,{children:[Rn?u.jsx(ye,{text:Rn,placement:"top",children:u.jsx(U,{sx:{cursor:"not-allowed",width:"100%"},children:u.jsx(Ee,{style:{padding:"8px",width:"100%",pointerEvents:"none"},disabled:!0,children:u.jsx(D,{width:"max-content",fontSize:"14px",children:u.jsx(V,{id:"3XBvkd"})})})})}):u.jsx(Ee,{padding:"8px",as:or,to:`/${f.route}${Xt.ELASTIC_REMOVE_POOL}/${n.tokenId}`,onClick:()=>{Z(ps.ELASTIC_REMOVE_LIQUIDITY_INITIATED,{token_1:(E==null?void 0:E.symbol)||"",token_2:($==null?void 0:$.symbol)||"",fee_tier:(A==null?void 0:A.fee)/1e4})},children:u.jsx(D,{width:"max-content",fontSize:"14px",children:u.jsx(V,{id:"3XBvkd"})})}),u.jsx($e,{id:"increase-liquidity-button",padding:"8px",style:{borderRadius:"18px",fontSize:"14px"},as:or,to:`/${f.route}${Xt.ELASTIC_INCREASE_LIQ}/${gs(z,c)}/${gs(N,c)}/${d}/${n.tokenId}`,onClick:()=>{Z(ps.ELASTIC_INCREASE_LIQUIDITY_INITIATED,{token_1:(E==null?void 0:E.symbol)||"",token_2:($==null?void 0:$.symbol)||"",fee_tier:(A==null?void 0:A.fee)/1e4})},children:u.jsx(D,{width:"max-content",fontSize:"14px",children:u.jsx(V,{id:"+zruvG"})})}),u.jsx(lp,{onClick:()=>{de(!0),Zn.track("Zap - Click Quick Zap",{token0:(E==null?void 0:E.symbol)||"",token1:($==null?void 0:$.symbol)||"",source:"my_pool_page"})}})]}),u.jsx($r,{sx:{marginBottom:"20px"}}),u.jsxs(ji,{children:[u.jsx(Ii,{width:"max-content",style:{fontSize:"14px"},padding:"0",children:u.jsx(ga,{style:{width:"100%",textAlign:"center"},href:`${Yf[c]}/pool/${n.poolId.toLowerCase()}`,children:u.jsx(V,{id:"CIAgRF"})})}),(e||C||k)&&u.jsx(Ii,{width:"max-content",style:{fontSize:"14px"},padding:"0",children:u.jsx(sr,{style:{width:"100%",textAlign:"center"},to:`${Xt.FARMS}/${f.route}`,children:u.jsx(V,{id:"G0bqwP"})})})]})]})]})]})}const kj=xt.memo(Sj),Cj=J(Ou)`
  overflow-x: hidden !important;

  /* width */
  ::-webkit-scrollbar {
    display: unset;
    width: 4px;
    border-radius: 999px;
  }

  /* Track */
  ::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 999px;
    margin: 8px 0;
  }

  /* Handle */
  ::-webkit-scrollbar-thumb {
    background: ${({theme:t})=>t.border};
    border-radius: 999px;
  }
`;J.div`
  display: grid;
  grid-template-columns: minmax(392px, auto) minmax(392px, auto) minmax(392px, auto);
  gap: 24px;

  ${({theme:t})=>t.mediaWidth.upToLarge`
    grid-template-columns: 1fr 1fr;
    max-width: 832px;
  `}
  ${({theme:t})=>t.mediaWidth.upToSmall`
    grid-template-columns: 1fr;
    max-width: 392px;
  `};
`;const Aj=Pu`
  query positions($ids: [String]!) {
    positions(where: { id_in: $ids }) {
      id
      createdAtTimestamp
      lastCollectedFeeAt
      lastHarvestedFarmRewardAt
    }
  }
`;function aI({positions:t,refe:e}){const{chainId:n}=mt(),{elasticClient:r}=Oe(n),i=ue(`(max-width: ${ce.upToSmall}px)`),a=ue(`(max-width: ${ce.upToLarge}px)`),s=L.useMemo(()=>t.map(p=>p.tokenId.toString()),[t]),{data:o}=$u(Aj,{client:r,variables:{ids:s},fetchPolicy:"cache-first",skip:!s.length}),c=L.useMemo(()=>o==null?void 0:o.positions.reduce((p,m)=>({...p,[m.id]:Date.now()/1e3-Number(m.lastCollectedFeeAt)}),{}),[o==null?void 0:o.positions]),f=L.useMemo(()=>o==null?void 0:o.positions.reduce((p,m)=>({...p,[m.id]:m!=null&&m.lastHarvestedFarmRewardAt?Date.now()/1e3-Number(m.lastHarvestedFarmRewardAt):0}),{}),[o==null?void 0:o.positions]),l=L.useMemo(()=>o==null?void 0:o.positions.reduce((p,m)=>({...p,[m.id]:Number(m.createdAtTimestamp)}),{}),[o]),h=L.useMemo(()=>t.reduce((p,m,x)=>({...p,[m.tokenId.toString()]:["0","0"]}),{}),[t]),d=jj(t,c,f,h,l,e),y=i?1:a?2:3;return u.jsx(Cj,{width:1e4,columnCount:y,outerElementType:Ja,rowCount:Math.ceil(t.length/y),height:1260,columnWidth:i?368:392,rowHeight:630,itemData:d,children:El})}const jj=Yu((t,e,n,r,i,a)=>({positions:t,liquidityTimes:e,farmingTimes:n,feeRewards:r,createdAts:i,refe:a})),El=L.memo(({data:t,rowIndex:e,columnIndex:n,style:r})=>{const{positions:i,refe:a,feeRewards:s,liquidityTimes:o,farmingTimes:c,createdAts:f}=t,l={...r,left:n===0?r.left:Number(r.left)+n*24,right:n===3?r.right:Number(r.right)+n*24},h=ue(`(max-width: ${ce.upToSmall}px)`),d=ue(`(max-width: ${ce.upToLarge}px)`),p=e*(h?1:d?2:3)+n,m=i[p];return m?u.jsx("div",{style:l,children:u.jsx(kj,{refe:a,positionDetails:m,rawFeeRewards:s[m.tokenId.toString()]||["0","0"],liquidityTime:o==null?void 0:o[m.tokenId.toString()],farmingTime:c==null?void 0:c[m.tokenId.toString()],createdAt:f==null?void 0:f[m.tokenId.toString()],hasUserDepositedInFarm:!!m.stakedLiquidity})},m.tokenId.toString()):u.jsx("div",{})},Ru);El.displayName="RowItem";const wu=()=>{},Ja=L.forwardRef(({onScroll:t,children:e},n)=>{const r=L.useRef(null);return Hh(()=>{if(!(t instanceof Function))return;const{clientWidth:i,clientHeight:a,scrollLeft:s,scrollTop:o,scrollHeight:c,scrollWidth:f}=document.documentElement;t({currentTarget:{clientHeight:a,clientWidth:i,scrollLeft:s,addEventListener:wu,removeEventListener:wu,dispatchEvent:()=>!1,scrollTop:o-(r.current?r.current.getBoundingClientRect().top+o:0),scrollHeight:c,scrollWidth:f}})},{target:window}),n!=null&&!(n instanceof Function)&&(n.current=document.documentElement),u.jsx("div",{ref:r,style:{position:"relative"},children:e})});Ja.displayName="outerElementType";const Ij=J.div`
  border-radius: 20px;
  background: ${({theme:t})=>t.background};
  padding: 20px;
`;function Ej({positions:t}){const e=Wu(t),n=ue(`(max-width: ${ce.upToSmall}px)`),r=ue(`(max-width: ${ce.upToLarge}px)`),i=[...new Set(t.map(c=>[c.token0.id,c.token1.id]).flat())],a=Cn(i),s=n?1:r?2:3,o=$j(t,a,e);return u.jsxs(u.Fragment,{children:[u.jsx(U,{marginTop:"1.25rem"}),u.jsx(Ou,{width:1176,columnCount:s,outerElementType:Ja,rowCount:Math.ceil(t.length/s),height:752,columnWidth:n?368:392,rowHeight:376,itemData:o,children:$l})]})}const $l=L.memo(({rowIndex:t,columnIndex:e,style:n,data:r})=>{var M;const i={...n,left:e===0?n.left:Number(n.left)+e*24,right:e===3?n.right:Number(n.right)+e*24},{positions:a,feeRewards:s,tokenPrices:o}=r,c=kt(),[f,l]=L.useState("liquidity"),{chainId:h}=mt(),d=a.sort((B,H)=>+H.liquidity-+B.liquidity),y=ue(`(max-width: ${ce.upToSmall}px)`),p=ue(`(max-width: ${ce.upToLarge}px)`),x=t*(y?1:p?2:3)+e,g=d[x],{removeLiquidity:v,collectFee:w,handleDismiss:S,removeLiquidityError:C,attemptingTxn:k,txnHash:F,showPendingModal:R,token0:I,token1:E,position:$,feeValue0:z,feeValue1:N,usd:b}=Ku(g||a[0],o,s),A=g||a[0],_=Xu(+A.pool.feeTier,+A.tickLower.tickIdx,+A.tickUpper.tickIdx);if(!g)return u.jsx("div",{});const T=+g.pool.tick<+g.tickLower.tickIdx||+g.pool.tick>=+g.tickUpper.tickIdx,P=$.pool.priceOf($.pool.token0),O=$.token0PriceLower,j=$.token0PriceUpper;return u.jsxs("div",{style:i,children:[u.jsxs(Ij,{children:[u.jsxs(U,{justifyContent:"space-between",alignItems:"center",children:[u.jsxs(U,{alignItems:"center",children:[u.jsx(Lr,{currency0:Q(I),currency1:Q(E),size:20}),u.jsxs(D,{fontWeight:"500",children:[Q(I).symbol," - ",Q(E).symbol]}),u.jsxs(Rr,{children:["Fee ",(Number((M=g.pool)==null?void 0:M.feeTier)||0)*100/Er,"%"]})]}),u.jsx(Id,{hideText:!0,removed:g.liquidity==="0",inRange:!T})]}),u.jsxs(U,{marginTop:"8px",color:c.subText,fontSize:"12px",justifyContent:"space-between",children:[u.jsxs(U,{alignItems:"center",children:[Xf(h,g.pool.id),u.jsx(Zf,{toCopy:g.pool.id})]}),u.jsxs(D,{children:["ID:"," ",u.jsx(D,{as:"span",color:c.text,children:g.id})]})]}),u.jsxs(Il,{style:{marginTop:"1rem"},children:[u.jsx(Cr,{isActive:f==="liquidity",onClick:()=>l("liquidity"),children:u.jsx(V,{id:"YHc3B+"})}),u.jsx(Cr,{isActive:f==="price_range",onClick:()=>l("price_range"),children:u.jsx(V,{id:"YA4hwj"})})]}),f==="liquidity"&&u.jsxs(Ai,{padding:"12px",marginTop:"1rem",borderRadius:"1rem",children:[u.jsxs(U,{justifyContent:"space-between",fontSize:"12px",color:c.subText,children:[u.jsx(D,{children:u.jsx(V,{id:"UTDllE"})}),u.jsx(D,{color:c.text,fontWeight:"500",children:ae(b)})]}),u.jsxs(U,{justifyContent:"space-between",fontSize:"12px",color:c.subText,marginTop:"12px",children:[u.jsx(D,{children:u.jsx(V,{id:"zwZk2C",values:{0:Q(I).symbol}})}),u.jsxs(U,{color:c.text,fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[u.jsx(Rt,{currency:Q(I),size:"12px"}),$.amount0.toSignificant(6)]})]}),u.jsxs(U,{justifyContent:"space-between",fontSize:"12px",color:c.subText,marginY:"12px",children:[u.jsx(D,{children:u.jsx(V,{id:"zwZk2C",values:{0:Q(E).symbol}})}),u.jsxs(U,{color:c.text,fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[u.jsx(Rt,{currency:Q(E),size:"12px"}),$.amount1.toSignificant(6)]})]}),u.jsx($r,{}),u.jsxs(U,{justifyContent:"space-between",fontSize:"12px",color:c.subText,marginTop:"12px",children:[u.jsx(D,{children:u.jsx(V,{id:"JbzAAx",values:{0:Q(I).symbol}})}),u.jsxs(U,{color:c.text,fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[u.jsx(Rt,{currency:Q(I),size:"12px"}),z.toSignificant(6)]})]}),u.jsxs(U,{justifyContent:"space-between",fontSize:"12px",color:c.subText,marginTop:"12px",children:[u.jsx(D,{children:u.jsx(V,{id:"JbzAAx",values:{0:Q(E).symbol}})}),u.jsxs(U,{color:c.text,fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[u.jsx(Rt,{currency:Q(E),size:"12px"}),N.toSignificant(6)]})]})]}),f==="price_range"&&u.jsxs(u.Fragment,{children:[u.jsxs(Ai,{padding:"12px",marginTop:"1rem",borderRadius:"1rem",children:[u.jsxs(D,{fontSize:"12px",color:c.subText,children:[u.jsx(V,{id:"WW7t2n"}),":"]}),u.jsxs(U,{justifyContent:"space-between",fontSize:"12px",color:c.subText,marginTop:"12px",children:[u.jsx(D,{children:u.jsx(V,{id:"kNeEXg"})}),u.jsxs(U,{color:c.text,fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[P.toSignificant(6)," ",Q(E).symbol," per ",Q(I).symbol]})]}),u.jsxs(U,{justifyContent:"space-between",fontSize:"12px",color:c.subText,marginTop:"12px",children:[u.jsx(D,{children:u.jsx(V,{id:"jjuKOj"})}),u.jsxs(U,{color:c.text,fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[kr(O,_,gt.LOWER)," ",Q(E).symbol," per"," ",Q(I).symbol]})]}),u.jsxs(U,{justifyContent:"space-between",fontSize:"12px",color:c.subText,marginTop:"12px",children:[u.jsx(D,{children:u.jsx(V,{id:"Eq83tw"})}),u.jsxs(U,{color:c.text,fontWeight:"500",alignItems:"center",sx:{gap:"4px"},children:[kr(j,_,gt.UPPER)," ",Q(E).symbol," per"," ",Q(I).symbol]})]})]}),u.jsx(U,{height:"38px"})]}),u.jsxs(U,{marginTop:"1rem",sx:{gap:"12px"},children:[u.jsx($e,{style:{height:"36px"},disabled:g.liquidity==="0",onClick:()=>v(!0),children:"Remove Liquidity"}),u.jsx(Ee,{style:{height:"36px"},disabled:z.equalTo("0")&&N.equalTo("0"),onClick:()=>{w()},children:"Collect Fees"})]})]}),u.jsx(ma,{isOpen:!!R,onDismiss:S,hash:F,attemptingTxn:k,pendingText:R==="collectFee"?Ve._({id:"GHUxDd"}):Ve._({id:"UipT5Q"}),content:()=>u.jsx(U,{flexDirection:"column",width:"100%",children:C?u.jsx(Mr,{onDismiss:S,message:C,confirmText:C!=null&&C.includes("burn amount exceeds balance")?"Remove without Fees":"",confirmAction:()=>{C!=null&&C.includes("burn amount exceeds balance")&&v(!1)}}):null})})]})},Ru);$l.displayName="RowItem";const $j=Yu((t,e,n)=>({positions:t,tokenPrices:e,feeRewards:n})),Mj=J.div`
  border-radius: 1rem;
  border: 1px solid ${({theme:t})=>t.border};
  padding: 24px;
  background: ${({theme:t})=>t.background};
  color: ${({theme:t})=>t.subText};
  line-height: 1.5;
  font-size: 14px;
  text-align: center;
  overflow-x: scroll;
`,Lj=J.div`
  min-width: 860px;
  overflow-x: scroll;
`,Ml=J.div`
  display: grid;
  font-size: 12px;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
  grid-template-columns: 1fr 2fr 1fr 1fr;
  font-weight: 500;
  padding: 1rem;
  background: ${({theme:t})=>t.tableHeader};
  color: ${({theme:t})=>t.subText};
  align-items: center;
`,Oj=J(Ml)`
  background: ${({theme:t})=>t.background};
  color: ${({theme:t})=>t.text};
  border-bottom: 1px solid ${({theme:t})=>t.border};
  font-size: 14px;
`;function Pj({farmPositions:t,pendingRewards:e,claimInfo:n}){var R;const{chainId:r}=mt(),i=[...new Set(t.map(I=>[I.token0.id,I.token1.id]).flat().concat(e.map(I=>I.token_address===Ht?ge[r].wrapped.address:I.token_address)))],a=Cn(i),s=Du(!0),o=e.reduce((I,E)=>{const $=E.token_address===Ht?ge[r].wrapped.address:E.token_address,z=a[$]||0;if(E.token_address===Ht)I+=+yt.fromRawAmount(ge[r],E.amount).toExact()*z;else{const N=s[$.toLowerCase()];N&&(I+=+yt.fromRawAmount(N,E.amount).toExact()*z)}return I},0),c=kt(),f=t.length,[l,h]=L.useState(null),[d,y]=L.useState(""),[p,m]=L.useState(""),[x,g]=L.useState(!1),v=()=>{y(""),h(null),m(""),g(!1)},w=fa(),{library:S}=ca(),C=async()=>{if(S&&n)try{h("claim"),g(!0);const I=await S.getSigner().estimateGas({to:n.address,data:n.encodedData}),{hash:E}=await S.getSigner().sendTransaction({to:n.address,data:n.encodedData,gasLimit:bn(I)});g(!1),y(E||""),w({hash:E,type:wn.CLAIM_REWARD,extraInfo:{summary:"farming rewards"}})}catch(I){g(!1),m((I==null?void 0:I.message)||JSON.stringify(I))}},k=Qf(((R=je[r])==null?void 0:R.farmContract)||""),F=async()=>{if(h("withdraw"),!k){m("No contract found");return}try{const I=t.map(z=>z.id),E=await k.estimateGas.emergencyWithdraw(I),$=await k.emergencyWithdraw(I,{gasLimit:bn(E)});g(!1),y($.hash||""),w({hash:$.hash,type:wn.ELASTIC_FORCE_WITHDRAW_LIQUIDITY,extraInfo:{contract:je[r].farmContract}})}catch(I){g(!1),m((I==null?void 0:I.message)||JSON.stringify(I))}};return u.jsxs(Mj,{children:[u.jsxs(D,{children:["We paused all our Elastic farms on 18 April 2023, 4pm UTC. Information on this can be found in our announcement"," ",u.jsx(ga,{href:"https://twitter.com/KyberNetwork/status/1648265647858790400?s=20",children:"here"})]}),f&&n?u.jsxs(D,{children:["You still have"," ",u.jsxs(D,{color:c.warning,as:"span",children:[f," liquidity positions"]})," ","and"," ",u.jsxs(D,{color:c.warning,as:"span",children:[ae(o)," unclaimed farming rewards"]})," ","that you haven't withdrawn from the Elastic farms yet. You will first need to withdraw all your liquidity positions by clicking on ‘Withdraw Positions’ button before you can claim your reward by clicking the 'Claim Rewards' button"," "]}):f?u.jsxs(D,{children:["You still have"," ",u.jsxs(D,{as:"span",color:c.warning,children:[f," liquidity positions"]})," ","that you haven't withdrawn from the Elastic farms yet, please withdraw and remove your funds on Elastic as soon as possible"]}):u.jsxs(D,{children:["You are eligible for"," ",u.jsxs(D,{as:"span",color:c.warning,children:[ae(o)," unclaimed farming rewards"]}),", you can claim them by clicking the 'Claim Rewards' button below."]}),!!f&&u.jsxs(U,{alignItems:"center",sx:{gap:"8px"},justifyContent:"flex-end",marginY:"1rem",children:[u.jsx(D,{fontSize:"12px",children:"Total Rewards"}),u.jsx(D,{fontSize:"1rem",fontWeight:"500",color:c.text,children:ae(o)})]}),u.jsxs(Lj,{children:[!!f&&u.jsxs(Ml,{children:[u.jsx(D,{textAlign:"left",children:"NFT ID"}),u.jsx(D,{textAlign:"left",children:"FARMS"}),u.jsx(D,{textAlign:"left",children:"STAKED LIQUIDITY"}),u.jsx(D,{textAlign:"right",children:"REWARD"})]}),t.map(I=>{var A;const{token0:E,token1:$,position:z,usd:N}=Gu(I,r,a),b=I.pendingRewards.map(_=>{if(_.token_address===Ht)return yt.fromRawAmount(ge[r],_.amount);const T=s[_.token_address.toLowerCase()];return T?yt.fromRawAmount(T,_.amount):null});return u.jsxs(Oj,{children:[u.jsx(D,{textAlign:"left",color:c.subText,children:I.id}),u.jsxs(U,{alignItems:"center",children:[u.jsx(Lr,{currency0:E,currency1:$}),u.jsxs(D,{color:c.primary,children:[E.symbol," - ",$.symbol]}),u.jsxs(Rr,{children:["Fee ",(Number((A=I.pool)==null?void 0:A.feeTier)||0)*100/Er,"%"]})]}),u.jsx(U,{alignItems:"center",justifyContent:"flex-start",width:"fit-content",children:u.jsxs(ye,{width:"fit-content",placement:"bottom",text:u.jsxs(U,{flexDirection:"column",children:[u.jsxs(U,{sx:{gap:"4px"},alignItems:"center",children:[u.jsx(Rt,{currency:z.amount0.currency,size:"16px"}),u.jsx(D,{fontWeight:"500",children:z.amount0.toSignificant(6)}),u.jsx(D,{fontWeight:"500",children:z.amount0.currency.symbol})]}),u.jsxs(U,{sx:{gap:"4px"},alignItems:"center",marginTop:"6px",children:[u.jsx(Rt,{currency:z.amount1.currency,size:"16px"}),u.jsx(D,{fontWeight:"500",children:z.amount1.toSignificant(6)}),u.jsx(D,{fontWeight:"500",children:z.amount1.currency.symbol})]})]}),children:[ae(N),u.jsx(Ar,{})]})}),u.jsxs(U,{justifyContent:"flex-end",flexDirection:"column",sx:{gap:"8px"},children:[!b.length&&u.jsx(D,{textAlign:"right",children:"--"}),b.map((_,T)=>_&&u.jsxs(U,{sx:{gap:"4px"},justifyContent:"flex-end",alignItems:"center",children:[u.jsx(Rt,{currency:_.currency,size:"14px"}),_.toSignificant(6)]},T))]})]},I.id)})]}),u.jsxs(U,{marginTop:"24px",sx:{gap:"12px"},justifyContent:f?"flex-end":"center",children:[!!f&&u.jsx(Eu,{onClick:F,color:c.red,width:"170px",padding:"8px",style:{border:`1px solid ${c.red}`},children:"Withdraw Positions"}),n&&u.jsx($e,{width:"170px",padding:"8px",onClick:C,children:"Claim Rewards"})]}),u.jsx(ma,{isOpen:!!l,onDismiss:v,hash:d,attemptingTxn:x,pendingText:"Claiming Rewards",content:()=>u.jsx(U,{flexDirection:"column",width:"100%",children:p?u.jsx(Mr,{onDismiss:v,message:p}):null})})]})}const Rj=J.div`
  border-radius: 1rem;
  border: 1px solid ${({theme:t})=>t.border};
  padding: 24px;
  background: ${({theme:t})=>t.background};
  color: ${({theme:t})=>t.subText};
  line-height: 1.5;
  font-size: 14px;
  overflow-x: scroll;
`,Dj=J.div`
  min-width: 860px;
  overflow-x: scroll;
`,Ll=J.div`
  display: grid;
  font-size: 12px;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
  grid-template-columns: 0.75fr 2fr 1fr 1.5fr 1fr;
  font-weight: 500;
  padding: 1rem;
  background: ${({theme:t})=>t.tableHeader};
  color: ${({theme:t})=>t.subText};
  align-items: center;
`,Nj=J(Ll)`
  background: ${({theme:t})=>t.background};
  color: ${({theme:t})=>t.text};
  border-bottom: 1px solid ${({theme:t})=>t.border};
  font-size: 14px;
`;function Fj({positions:t}){const e=[...new Set(t.map(i=>[i.token0.id,i.token1.id]).flat())],n=Cn(e),r=Wu(t);return u.jsx(Rj,{children:u.jsxs(Dj,{children:[u.jsxs(Ll,{children:[u.jsx(D,{children:"NFT ID"}),u.jsx(D,{children:"POOLS"}),u.jsx(D,{children:"MY LIQUIDITY"}),u.jsx(D,{children:"MY FEES EARNED"}),u.jsx(D,{textAlign:"right",children:"ACTION"})]}),t.map(i=>u.jsx(zj,{position:i,feeRewards:r,tokenPrices:n},i.id))]})})}const zj=({position:t,tokenPrices:e,feeRewards:n})=>{var g;const{removeLiquidity:r,handleDismiss:i,removeLiquidityError:a,attemptingTxn:s,txnHash:o,showPendingModal:c,token0:f,token1:l,position:h,feeValue0:d,feeValue1:y,usd:p}=Ku(t,e,n),m=kt(),{account:x}=mt();return u.jsxs(Nj,{children:[u.jsx(D,{color:m.subText,children:t.id}),u.jsxs(U,{alignItems:"center",children:[u.jsx(Lr,{currency0:Q(f),currency1:Q(l)}),u.jsxs(D,{color:m.primary,children:[Q(f).symbol," - ",Q(l).symbol]}),u.jsxs(Rr,{children:["Fee ",(Number((g=t.pool)==null?void 0:g.feeTier)||0)*100/Er,"%"]})]}),u.jsx(U,{alignItems:"center",justifyContent:"flex-start",width:"fit-content",children:u.jsxs(ye,{width:"fit-content",placement:"bottom",text:u.jsxs(U,{flexDirection:"column",fontSize:"12px",children:[u.jsxs(U,{sx:{gap:"4px"},alignItems:"center",children:[u.jsx(Rt,{currency:Q(h.amount0.currency),size:"16px"}),u.jsx(D,{fontWeight:"500",children:h.amount0.toSignificant(6)}),u.jsx(D,{fontWeight:"500",children:Q(h.amount0.currency).symbol})]}),u.jsxs(U,{sx:{gap:"4px"},alignItems:"center",marginTop:"6px",children:[u.jsx(Rt,{currency:Q(h.amount1.currency),size:"16px"}),u.jsx(D,{fontWeight:"500",children:h.amount1.toSignificant(6)}),u.jsx(D,{fontWeight:"500",children:Q(h.amount1.currency).symbol})]})]}),children:[ae(p),u.jsx(Ar,{})]})}),u.jsxs(U,{flexDirection:"column",sx:{gap:"6px"},fontSize:"12px",children:[u.jsxs(U,{sx:{gap:"4px"},alignItems:"center",children:[u.jsx(Rt,{currency:Q(f),size:"16px"}),u.jsx(D,{fontWeight:"500",children:d.toSignificant(6)}),u.jsx(D,{fontWeight:"500",children:Q(f).symbol})]}),u.jsxs(U,{sx:{gap:"4px"},alignItems:"center",children:[u.jsx(Rt,{currency:Q(l),size:"16px"}),u.jsx(D,{fontWeight:"500",children:y.toSignificant(6)}),u.jsx(D,{fontWeight:"500",children:Q(l).symbol})]})]}),u.jsx(U,{justifyContent:"flex-end",children:t.owner!==(x==null?void 0:x.toLowerCase())?u.jsx(ye,{placement:"top",text:"You need to withdraw your deposited liquidity position from the Farm first.",children:u.jsx($e,{padding:"6px 12px",style:{background:m.buttonGray,color:m.border},children:u.jsx(D,{fontSize:"12px",children:"Remove Liquidity"})})}):u.jsx(Ee,{padding:"6px 12px",width:"fit-content",onClick:()=>r(!0),children:u.jsx(D,{fontSize:"12px",children:"Remove Liquidity"})})}),u.jsx(ma,{isOpen:!!c,onDismiss:i,hash:o,attemptingTxn:s,pendingText:"Removing liquidity",content:()=>u.jsx(U,{flexDirection:"column",width:"100%",children:a?u.jsx(Mr,{onDismiss:i,message:a,confirmText:a!=null&&a.includes("burn amount exceeds balance")?"Remove without Fees":"",confirmAction:()=>{a!=null&&a.includes("burn amount exceeds balance")&&r(!1)}}):null})})]},t.id)},Ol=J.div`
  border-radius: 24px;
  background: ${({theme:t})=>t.background};
  border: 1px solid ${({theme:t})=>t.border};
  padding: 12px 20px;
  font-size: 14px;
  line-height: 1.5;
  color: ${({theme:t})=>t.subText};
`,Bj=J(Ol)`
  background: ${({theme:t})=>xe(t.warning,.3)};
  border: none;
  color: ${({theme:t})=>t.text};
`,_u=({isFarm:t})=>{const e=kt();return u.jsx(Ol,{children:u.jsx(V,{id:"lJWKEx",values:{0:t?"Farms":"Pools",1:t?"farms":"pools",2:t?"Farms":"Pools"},components:{0:u.jsx(D,{as:"span",color:e.text}),1:u.jsx(D,{as:"span",color:e.text}),2:u.jsx(or,{to:t?"/farms":"/pools"})}})})},Si=()=>{const t=kt();return u.jsx(Bj,{children:u.jsx(V,{id:"JWdh73",components:{0:u.jsx(ga,{href:"https://twitter.com/KyberNetwork/status/1647920799557505028?t=3W5CxZULDimB9AgGKFHQ2w&s=19"}),1:u.jsx(D,{as:"span",color:t.warning}),2:u.jsx(or,{to:"/pools"})}})})};function sI({tab:t}){const{loading:e,positions:n,farmPositions:r,allPositions:i}=Hu(),{loading:a,data:s,claimInfo:o}=Vu(),c=!!r.length||!!o,f=!!n.length||!!r.length;return e||a?u.jsx(Iu,{}):u.jsxs(u.Fragment,{children:[u.jsx("div",{}),t==="farm"&&(c?u.jsxs(u.Fragment,{children:[u.jsx(Si,{}),u.jsx(Pj,{claimInfo:o,farmPositions:r.map(l=>{const h=s==null?void 0:s.find(d=>d.nftid.toString()===l.id);return{...l,pendingRewards:(h==null?void 0:h.pending_rewards)||[]}}),pendingRewards:(s||[]).map(l=>l.pending_rewards).flat()})]}):u.jsx(_u,{isFarm:!0})),t==="position"&&(f?u.jsxs(u.Fragment,{children:[u.jsx(Si,{}),u.jsx(Fj,{positions:[...n,...r]})]}):u.jsx(_u,{})),t==="my_positions"&&u.jsxs(U,{flexDirection:"column",marginTop:"1.5rem",children:[u.jsx(Si,{}),u.jsx(Ej,{positions:[...i,...r]})]})]})}const qj=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"PositionNotEligible",type:"error"},{inputs:[{internalType:"address",name:"pAddress",type:"address"},{internalType:"address",name:"nftContract",type:"address"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint256[]",name:"nftIds",type:"uint256[]"}],name:"checkPosition",outputs:[{internalType:"bool",name:"isInvalid",type:"bool"},{internalType:"uint128[]",name:"liquidities",type:"uint128[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IKSElasticLMV2",name:"farm",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"}],name:"getCurrentUnclaimedReward",outputs:[{internalType:"uint256[]",name:"currentUnclaimedRewards",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IKSElasticLMV2",name:"farm",type:"address"},{internalType:"uint256",name:"fId",type:"uint256"},{internalType:"uint256",name:"nftId",type:"uint256"}],name:"getEligibleRanges",outputs:[{internalType:"uint256[]",name:"indexesValid",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"}],name:"getPositionInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"int24",name:"",type:"int24"},{internalType:"int24",name:"",type:"int24"},{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IKSElasticLMV2",name:"farm",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"getUserInfo",outputs:[{components:[{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"fId",type:"uint256"},{internalType:"uint256",name:"rangeId",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256[]",name:"currentUnclaimedRewards",type:"uint256[]"}],internalType:"struct IKSElasticLMHelper.UserInfo[]",name:"result",type:"tuple[]"}],stateMutability:"view",type:"function"}],ki=new Kt.Interface(rd.abi),Uj=Pu`
  {
    farmV2S(first: 1000) {
      id
      startTime
      endTime
      isSettled
      liquidity
      depositedPositions(first: 1000) {
        id
        position {
          id
          liquidity
          tickLower {
            tickIdx
          }
          tickUpper {
            tickIdx
          }
          token0 {
            id
            symbol
            name
            decimals
          }
          token1 {
            id
            symbol
            name
            decimals
          }
        }
      }
      pool {
        id
        feeTier
        tick
        sqrtPrice
        liquidity
        reinvestL
        token0 {
          id
          symbol
          name
          decimals
        }
        token1 {
          id
          symbol
          name
          decimals
        }
      }
      rewards(orderBy: index, orderDirection: asc) {
        token {
          id
          symbol
          name
          decimals
        }
        amount
        index
      }
      ranges(orderBy: isRemoved) {
        id
        index
        isRemoved
        tickUpper
        tickLower
        weight
        createdAt
        updatedAt
      }
    }
  }
`;function oI({interval:t=!0}){const e=Ir(),{networkInfo:n,chainId:r,account:i}=mt(),{elasticClient:a,isEnableKNProtocol:s}=Oe(),o=ua(),c=da(n.elastic.farmv2Quoter,qj),[f,{data:l,error:h}]=Ed(Uj,{client:a,fetchPolicy:"network-only"}),[d,{data:y,error:p}]=Jf(),m=L.useMemo(()=>{var S;return s?{farmV2S:((S=y==null?void 0:y.data)==null?void 0:S.data)||[]}:l},[s,y,l]),x=L.useMemo(()=>s?p:h,[s,h,p]);L.useEffect(()=>{const S=(k,F=!1)=>{F&&e(dn({chainId:k,loading:!0})),s?d(k).finally(()=>{e(dn({chainId:k,loading:!1}))}):f().finally(()=>{e(dn({chainId:k,loading:!1}))})};Promise.resolve(e(td.util.invalidateTags([ed.GET_FARM_V2]))).then(()=>{e(ni({chainId:r,farms:[]})),S(r,!0)}),setTimeout(()=>{e(dn({chainId:r,loading:!1}))},3e3);const C=t?setInterval(()=>S(r,!1),1e4):void 0;return()=>{C&&clearInterval(C)}},[t,r,e,f,d,s]),L.useEffect(()=>{x&&r&&(e(ni({chainId:r,farms:[]})),e(dn({chainId:r,loading:!1})))},[x,e,r]);const{fetchPrices:g}=nd([]),v=L.useRef([]),w=L.useRef({});return L.useEffect(()=>{(async()=>{if(m!=null&&m.farmV2S.length&&r){const C=[...new Set(m.farmV2S.map(I=>[I.pool.token0.id,I.pool.token1.id,...I.rewards.map(E=>E.token.id===Ht||E.token.id.toLowerCase()===Nu.toLowerCase()?ge[r].wrapped.address.toLowerCase():E.token.id.toLowerCase())]).flat())];let k=w.current;v.current.sort().join()!==C.sort().join()&&(v.current=C,k=await g(C),w.current=k);const F=m.farmV2S.map(I=>{var _;const E=(T,P=!1)=>{const O=od(T.id);return!P&&O===Ce[r].address||O===Ht?ge[r]:new me(r,O,Number(T.decimals),T.symbol.toLowerCase()==="mimatic"?"MAI":T.symbol,T.name)},$=E(I.pool.token0),z=E(I.pool.token1),N=new An($.wrapped,z.wrapped,Number(I.pool.feeTier),I.pool.sqrtPrice,I.pool.liquidity,I.pool.reinvestL,Number(I.pool.tick));let b=0;if(I.stakedTvl)b=+I.stakedTvl;else{let T=yt.fromRawAmount($.wrapped,0),P=yt.fromRawAmount(z.wrapped,0);(_=I.depositedPositions)==null||_.forEach(O=>{const j=new ve({pool:N,liquidity:O.position.liquidity,tickLower:Number(O.position.tickLower.tickIdx),tickUpper:Number(O.position.tickUpper.tickIdx)});T=T.add(j.amount0),P=P.add(j.amount1)}),b=Number(T.toExact()||"0")*(k[I.pool.token0.id]||0)+Number(P.toExact()||"0")*(k[I.pool.token1.id]||0)}const A=I.rewards.map(T=>yt.fromRawAmount(E(T.token,!0),T.amount));return{id:I.id,fId:+I.id.split("_")[1],farmAddress:I.id.split("_")[0],startTime:Number(I.startTime),endTime:Number(I.endTime),isSettled:I.isSettled,poolAddress:I.pool.id,pool:N,token0:$,token1:z,totalRewards:A,tvl:b,ranges:I.ranges.map(T=>{const P=(+I.endTime-+I.startTime)/60/60/24,O=A.reduce((Y,rt)=>Y+ +rt.toExact()*(k[rt.currency.wrapped.address]||0),0),j=Math.sqrt(1.0001**+T.tickLower),M=Math.sqrt(1.0001**+T.tickUpper),B=Math.sqrt(1.0001**+N.tickCurrent),H=(k[I.pool.token0.id]||0)/10**+I.pool.token0.decimals,W=(k[I.pool.token1.id]||0)/10**+I.pool.token1.decimals;let G;N.tickCurrent<+T.tickLower?G=(1/j-1/M)*H:N.tickCurrent>=+T.tickUpper?G=(M-j)*W:G=(1/B-1/M)*H+(B-j)*W;const X=+I.liquidity*G,q=I.isSettled||+I.endTime<Date.now()/1e3||I.liquidity==="0"?0:100*(O*+T.weight*365)/P/X||0;return{...T,tickLower:+T.tickLower,tickUpper:+T.tickUpper,tickCurrent:+N.tickCurrent,apr:q,createdAt:+T.createdAt,updatedAt:+T.updatedAt}})}});e(ni({chainId:r,farms:F}));const R=[...new Set(F.map(I=>I.farmAddress))];if(i&&c&&o&&R.length){const I=await Promise.all(R.map($=>c.getUserInfo($,i))),E=await Promise.all(I.map(async($,z)=>{const N=$.map(j=>j.nftId),b=ki.getFunction("positions"),A=N.map(j=>({target:n.elastic.nonfungiblePositionManager,callData:ki.encodeFunctionData(b,[j])})),P=(await o.callStatic.tryBlockAndAggregate(!1,A)).returnData.map(j=>j[0]?ki.decodeFunctionResult(b,j[1]):null).reduce((j,M,B)=>M?{...j,[N[B].toString()]:{poolAddress:id(n.elastic.coreFactory,ad(["bytes"],[sd.encode(["address","address","uint24"],[M.info.token0,M.info.token1,M.info.fee])]),n.elastic.initCodeHash),liquidity:M.pos.liquidity,tickLower:M.pos.tickLower,tickUpper:M.pos.tickUpper}}:j,{});return $.reduce((j,M)=>{var nt;const B=F.find(tt=>tt.farmAddress===R[z]&&tt.poolAddress.toLowerCase()===P[M.nftId.toString()].poolAddress.toLowerCase()&&+tt.fId==+M.fId.toString());if(!B)return j;const H=new ve({pool:B.pool,liquidity:P[M.nftId.toString()].liquidity,tickLower:P[M.nftId.toString()].tickLower,tickUpper:P[M.nftId.toString()].tickUpper}),W=+H.amount0.toExact()*(k[H.amount0.currency.wrapped.address]||0)+ +H.amount1.toExact()*(k[H.amount1.currency.wrapped.address]||0),G=_n.from(M.liquidity.toString()).div(((nt=B.ranges.find(tt=>tt.index.toString()===M.rangeId.toString()))==null?void 0:nt.weight)||1),X=new ve({pool:B.pool,liquidity:G.toString(),tickLower:P[M.nftId.toString()].tickLower,tickUpper:P[M.nftId.toString()].tickUpper}),q=+X.amount0.toExact()*(k[X.amount0.currency.wrapped.address]||0)+ +X.amount1.toExact()*(k[X.amount1.currency.wrapped.address]||0),Y=B.totalRewards.map((tt,K)=>yt.fromRawAmount(tt.currency,M.currentUnclaimedRewards[K].toString())),rt=Y.reduce((tt,K)=>tt+ +K.toExact()*(k[K.currency.wrapped.address]||0),0);return[...j,{nftId:M.nftId,position:H,stakedPosition:X,liquidity:P[M.nftId.toString()].liquidity,stakedLiquidity:G,poolAddress:B.poolAddress,fId:Number(M.fId.toString()),rangeId:Number(M.rangeId.toString()),unclaimedRewards:Y,positionUsdValue:W,stakedUsdValue:q,unclaimedRewardsUsd:rt,farmAddress:R[z]}]},[])}));e(ms({chainId:r,userInfo:E.flat()}))}else e(ms({chainId:r,userInfo:[]}))}})()},[g,n,r,e,m,i,c,o]),null}const Vj=({isInterval:t=!0})=>{const e=Ir(),{chainId:n,account:r}=mt(),{isEnableKNProtocol:i,readProvider:a}=Oe(),[s]=ud();return L.useEffect(()=>{const o=new AbortController;async function c(){var h;try{const d=(h=(await s(n)).data)==null?void 0:h.data.farmPools;return d?await Promise.all(d.map(async p=>{const[m]=p.id.split("_"),x=Number(p.pid),g=p.pool.id,v=Number(p.start)<1e9?Mt.V1:Mt.V2,w=p.rewardTokens.map(({id:O,decimals:j,symbol:M,name:B})=>O===Ht?Ce[n]:new me(n,O,Number(j),M,B)),S=ri(p.stakedAmount).divide(10**18),C=g,k=p.pool.token0.id===Ht?Ce[n]:new me(n,p.pool.token0.id,Number(p.pool.token0.decimals),p.pool.token0.symbol,p.pool.token0.name),F=p.pool.token1.id===Ht?Ce[n]:new me(n,p.pool.token1.id,Number(p.pool.token1.decimals),p.pool.token1.symbol,p.pool.token1.name),R=Number(p.pool.amp),I=p.pool.reserve0,E=p.pool.reserve1,$=p.pool.reserveUSD,z=p.pool.totalSupply,N=ri(p.pool.feeUSD).subtract(ri(p.pool.feesUsdOneDayAgo)).toFixed(18),b="0",A=p.rewardPerUnits.map(O=>Kt.parseUnits(cd(O),0)),_=Number(p.start),T=Number(p.end),P=await(async()=>{if(!r)return{};if(!a)return{};try{const O=ld(m,v===Mt.V1?fd:v===Mt.V2?dd:hd,a),j=(await O.getUserInfo(x,r)).amount;if(o.signal.aborted)throw new Pt;const M=await O.pendingRewards(x,r);if(o.signal.aborted)throw new Pt;return{stakedBalance:j,rewards:v===Mt.V1?M:M.map((H,W)=>H.div(10**(18-w[W].decimals)))}}catch(O){return o.signal.aborted||console.error("fetch userData error",O),{}}})();return v===Mt.V1?{fairLaunchAddress:m,version:v,pid:x,id:g,rewardTokens:w,rewardPerBlocks:A,totalStake:S,stakeToken:C,startBlock:_,endBlock:T,token0:k,token1:F,amp:R,reserve0:I,reserve1:E,reserveUSD:$,totalSupply:z,oneDayFeeUSD:N,oneDayFeeUntracked:b,userData:P}:{fairLaunchAddress:m,version:v,pid:x,id:g,rewardTokens:w,rewardPerSeconds:A,totalStake:S,stakeToken:C,startTime:_,endTime:T,token0:k,token1:F,amp:R,reserve0:I,reserve1:E,reserveUSD:$,totalSupply:z,oneDayFeeUSD:N,oneDayFeeUntracked:b,userData:P}})):[]}catch(d){throw o.signal.aborted||console.error("parse kn error",{error:d}),d}}async function f(){try{e(ur(!0));const h=await c();if(o.signal.aborted)throw new Pt;const d=h.reduce((y,p)=>{const m=p.fairLaunchAddress;return y[m]||(y[m]=[]),y[m].push(p),y},{});e(xn(d))}catch(h){o.signal.aborted||(console.error("fetch farmData KN error",{error:h}),e(Fu(h)))}finally{e(ur(!1))}}e(xn({})),f();const l=t&&setInterval(()=>{f()},3e4);return()=>{o.abort(),l&&clearInterval(l)}},[s,e,n,r,i,t,a]),null};function Hj({isInterval:t=!0}){const e=Ir(),{chainId:n,account:r,networkInfo:i}=mt(),a=pd(),s=gd(),o=L.useRef(s.currentPrice);o.current=s.currentPrice;const c=Du(),{classicClient:f,blockClient:l,isEnableBlockService:h}=Oe(),d=Mu.useSelector(m=>m.farms.data),y=L.useRef(d);y.current=d;const p=L.useRef(n);return p.current=n,L.useEffect(()=>{console.count("running farm updater");const m=new AbortController;async function x(w){var _;const S=(_=i.classic.fairlaunchV3)==null?void 0:_.includes(w.address);let C=[];if(S||(C=await(w==null?void 0:w.getRewardTokens())),m.signal.aborted)throw new Pt;const k=await(w==null?void 0:w.poolLength());if(m.signal.aborted)throw new Pt;const F=[...Array(_n.from(k).toNumber()).keys()],R=i.classic.fairlaunchV2.includes(w.address),I=C.map(T=>T.toLowerCase()===Ht.toLowerCase()?ge[n]:c[T]).filter(Boolean),E=await Promise.all(F.map(async T=>{const P=await(w==null?void 0:w.getPoolInfo(T));if(m.signal.aborted)throw new Pt;return R||S?{...P,totalStake:new ys(P.totalStake.toString(),et.exponentiate(et.BigInt(10),et.BigInt(18))),rewardPerSeconds:P.rewardPerSeconds.map((O,j)=>O.div(S?P.multipliers[j]:P.rewardMultipliers[j])),pid:T,fairLaunchVersion:S?Mt.V3:Mt.V2,rewardTokens:(S?P.rewardTokens.map(O=>O.toLowerCase()===Ht||O.toLowerCase()===Nu.toLowerCase()?ge[n]:c[O]||new me(n,O,18,"unknown","unknown")):I)||[]}:{...P,totalStake:new ys(P.totalStake.toString(),et.exponentiate(et.BigInt(10),et.BigInt(18))),pid:T,fairLaunchVersion:Mt.V1,rewardTokens:I}})),$=await Promise.all(F.map(async T=>{const P=r?await(w==null?void 0:w.getUserInfo(T,r)):{amount:0};if(m.signal.aborted)throw new Pt;return P.amount}));if(m.signal.aborted)throw new Pt;const z=await Promise.all(F.map(async T=>{const P=r?await(w==null?void 0:w.pendingRewards(T,r)):null;if(m.signal.aborted)throw new Pt;return P}));if(m.signal.aborted)throw new Pt;const N=E.map(T=>T.stakeToken.toLowerCase()),b=await md(h,N,f,l,n,o.current);if(m.signal.aborted)throw new Pt;return E.map((T,P)=>{var O;return{...b.find(j=>j&&j.id.toLowerCase()===T.stakeToken.toLowerCase()),...T,version:R?Mt.V2:S?Mt.V3:Mt.V1,rewardTokens:T.rewardTokens,fairLaunchAddress:w.address,userData:{stakedBalance:$[P],rewards:[Mt.V2,Mt.V3].includes(T.fairLaunchVersion)?(O=z[P])==null?void 0:O.map((j,M)=>j.div(S?T.multipliers[M]:T.rewardMultipliers[M])):z[P]}}}).filter(T=>!!T.totalSupply)}async function g(){try{if(!a){e(xn({}));return}e(ur(!0));const w={},S=Object.keys(a),C=S.map(F=>x(a[F])),k=await Promise.all(C);if(m.signal.aborted)throw new Pt;S.forEach((F,R)=>{w[F]=k[R]}),e(xn(w))}catch(w){if(w instanceof Pt||m.signal.aborted)return;console.error(w),e(Fu(w))}e(ur(!1))}e(xn({})),g();const v=t&&setInterval(()=>{g()},3e4);return()=>{m.abort(),v&&clearInterval(v)}},[e,n,a,r,i,f,l,c,t,h]),null}function uI({isInterval:t=!0}){const{isEnableKNProtocol:e}=Oe();return e?u.jsx(Vj,{isInterval:t}):u.jsx(Hj,{isInterval:t})}export{Ln as $,$w as A,gw as B,vj as C,vw as D,oI as E,FT as F,R2 as G,Hc as H,Qc as I,Fx as J,qr as K,j2 as L,Ha as M,ll as N,Pa as O,aI as P,U6 as Q,Y6 as R,il as S,Qi as T,uI as U,$y as V,gl as W,yw as X,Mx as Y,hl as Z,iI as _,Jj as a,kr as a0,Xu as a1,ii as a2,Hu as a3,Vu as a4,sI as b,Jn as c,gp as d,_y as e,Sy as f,jy as g,vp as h,Fr as i,vr as j,Ea as k,My as l,wp as m,tI as n,Ue as o,Ey as p,xp as q,sc as r,bp as s,Iy as t,eI as u,Og as v,Gt as w,nI as x,rI as y,A_ as z};
